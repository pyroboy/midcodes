import React, { useState } from 'react'; import { AlertTriangle, Check, Plus, X, ArrowLeft } from 'lucide-react'; // Flag Component const Flag = ({ closable = false, type = 'blocking', value, description, isSelected = false, onRemove, onClick, disabled = false }) => { const [showInfo, setShowInfo] = useState(false); const styles = { blocking: { container: `${isSelected ? 'bg-red-100 shadow-sm' : 'bg-red-50'} ${onClick && !disabled ? 'hover:bg-red-100' : ''} ${disabled ? 'opacity-40 bg-gray-50' : ''}`, text: 'text-red-700', icon: 'text-red-600', badge: 'text-red-600', border: isSelected ? 'border-red-300 border-2' : 'border-red-200' }, nonBlocking: { container: `${isSelected ? 'bg-yellow-100 shadow-sm' : 'bg-yellow-50'} ${onClick && !disabled ? 'hover:bg-yellow-100' : ''} ${disabled ? 'opacity-40 bg-gray-50' : ''}`, text: 'text-yellow-700', icon: 'text-yellow-600', badge: 'text-yellow-600', border: isSelected ? 'border-yellow-300 border-2' : 'border-yellow-200' } }; const style = styles[type]; return ( <div onClick={() => !disabled && onClick?.()} onMouseEnter={() => setShowInfo(true)} onMouseLeave={() => setShowInfo(false)} className={`p-3 rounded-lg border ${style.border} ${style.container} ${onClick ? 'cursor-pointer' : ''} relative overflow-hidden`} > <div className="flex justify-between items-center"> <div className={`flex items-center gap-2 transition-all duration-300 ${showInfo ? 'opacity-0' : 'opacity-100'}`}> {type === 'blocking' && <AlertTriangle className={`w-4 h-4 ${style.icon}`} />} <span className={`text-base font-semibold ${style.badge}`}>{value}</span> </div> <div className={`absolute top-0 left-0 right-0 p-3 transition-all duration-300 ${showInfo ? 'opacity-100' : 'opacity-0'}`} > <div className="space-y-1"> <p className="text-sm text-gray-600">{description}</p> <p className={`text-xs ${style.badge}`}> {type === 'blocking' ? 'Blocking' : 'Non-blocking'} </p> </div> </div> {closable && ( <button onClick={(e) => { e.stopPropagation(); onRemove?.(e); }} className={`hover:${style.text} h-fit z-10`} > <X className="w-4 h-4" /> </button> )} </div> </div> ); }; // FlagsList Component const FlagsList = ({ flags, flagOptions, removeFlag }) => ( <div className="grid grid-cols-2 gap-4"> {flags.blocking.map(flag => { const option = flagOptions.blocking.find(opt => opt.id === flag); return ( <Flag key={flag} type="blocking" value={flag} description={option?.label} closable onRemove={() => removeFlag('blocking', flag)} /> ); })} {flags.nonBlocking.map(flag => { const option = flagOptions.nonBlocking.find(opt => opt.id === flag); return ( <Flag key={flag} type="nonBlocking" value={flag} description={option?.label} closable onRemove={() => removeFlag('nonBlocking', flag)} /> ); })} </div> ); // FlagOptions Component const FlagOptions = ({ flagOptions, flags, addFlag }) => { const hasBlockingFlag = flags.blocking.length > 0; const hasNonBlockingFlag = flags.nonBlocking.length > 0; return ( <div className="space-y-4"> <div className="grid grid-cols-2 gap-4"> {flagOptions.blocking.map(flag => ( <Flag key={flag.id} type="blocking" value={flag.id} description={flag.label} isSelected={flags.blocking.includes(flag.id)} disabled={!flags.blocking.includes(flag.id) && hasBlockingFlag} onClick={() => !flags.blocking.includes(flag.id) && !hasBlockingFlag && addFlag('blocking', flag.id)} /> ))} </div> <hr className="border-gray-200" /> <div className="grid grid-cols-2 gap-4"> {flagOptions.nonBlocking.map(flag => ( <Flag key={flag.id} type="nonBlocking" value={flag.id} description={flag.label} isSelected={flags.nonBlocking.includes(flag.id)} disabled={!flags.nonBlocking.includes(flag.id) && hasNonBlockingFlag} onClick={() => !flags.nonBlocking.includes(flag.id) && !hasNonBlockingFlag && addFlag('nonBlocking', flag.id)} /> ))} </div> </div> ); }; // Main DocumentRequest Component const DocumentRequest = () => { const [showFlagSelector, setShowFlagSelector] = useState(false); const [flags, setFlags] = useState({ blocking: ['UNVERIFIABLE'], nonBlocking: ['PRIORITY'] }); const [flagNotes, setFlagNotes] = useState(''); const [steps, setSteps] = useState([ {step: 'Verify info', done: true}, {step: 'Check requirements', done: false}, {step: 'Prepare template', done: false}, {step: 'Print document', done: false}, {step: 'Quality check', done: false}, {step: 'Record', done: false} ]); const toggleStep = (index) => { setSteps(currentSteps => { // Don't allow skipping steps - only allow completing the next undone step const nextUndoneIndex = currentSteps.findIndex(step => !step.done); if (index === nextUndoneIndex) { const newSteps = [...currentSteps]; newSteps[index] = { ...newSteps[index], done: !newSteps[index].done }; return newSteps; } // Allow unchecking the last completed step if (index === nextUndoneIndex - 1 && currentSteps[index].done) { const newSteps = [...currentSteps]; newSteps[index] = { ...newSteps[index], done: false }; return newSteps; } return currentSteps; }); }; const flagOptions = { blocking: [ { id: 'UNVERIFIABLE', label: 'Unverifiable Information' }, { id: 'INCOMPLETE', label: 'Incomplete Requirements' }, { id: 'EXPIRED', label: 'Expired Documents' }, { id: 'INVALID_ID', label: 'Invalid Identification' } ], nonBlocking: [ { id: 'PRIORITY', label: 'Priority Processing' }, { id: 'RUSH', label: 'Rush Request' }, { id: 'SPECIAL_HANDLING', label: 'Special Handling' }, { id: 'NEEDS_REVIEW', label: 'Needs Review' } ] }; const addFlag = (type, flagId) => { if (!flags[type].includes(flagId)) { setFlags(prev => ({ ...prev, [type]: [...prev[type], flagId] })); setShowFlagSelector(false); } }; const removeFlag = (type, flagToRemove) => { setFlags(prev => ({ ...prev, [type]: prev[type].filter(flag => flag !== flagToRemove) })); }; const Header = ({ actionButton }) => ( <div className="px-4 py-3 border-b bg-gray-50 flex justify-between items-center"> <div className="font-medium">Request Flags</div> {actionButton} </div> ); const ActionButton = ({ onClick, children }) => ( <button onClick={onClick} className="flex items-center gap-2 px-4 py-2 rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-700 transition-colors" > {children} </button> ); const shouldShowAddFlag = flags.blocking.length === 0 || flags.nonBlocking.length === 0; const InstructionText = () => ( <div className="text-center text-gray-500 text-sm mt-4"> 1 Blocking - 1 Non-Blocking only </div> ); const FlagDisplay = () => { const hasNoFlags = flags.blocking.length === 0 && flags.nonBlocking.length === 0; return ( <> <Header actionButton={shouldShowAddFlag && <ActionButton onClick={() => setShowFlagSelector(true)}> <Plus className="w-4 h-4" /> Add Flag </ActionButton> } /> <div className="p-4"> {/* Notes Input */} <div className="mb-4"> <div className="flex items-center justify-between mb-2"> <label htmlFor="flagNotes" className="text-sm text-gray-600">Flag Notes</label> <span className="text-xs text-gray-500">{flagNotes.length}/70</span> </div> <input id="flagNotes" type="text" value={flagNotes} maxLength={70} onChange={(e) => setFlagNotes(e.target.value)} placeholder="Add notes about the flags..." className="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" /> </div> {hasNoFlags && <InstructionText />} <div className="mt-4"> <FlagsList flags={flags} flagOptions={flagOptions} removeFlag={removeFlag} /> </div> </div> </> ); }; const FlagSelector = () => ( <> <Header actionButton={ <ActionButton onClick={() => setShowFlagSelector(false)}> <ArrowLeft className="w-4 h-4" /> Back </ActionButton> } /> <div className="p-4"> <InstructionText /> <div className="mt-4"> <FlagOptions flagOptions={flagOptions} flags={flags} addFlag={addFlag} /> </div> </div> </> ); // Render active flags and progress const ActiveFlags = () => { const hasBlockingFlag = flags.blocking.length > 0; const hasNonBlockingFlag = flags.nonBlocking.length > 0; const completedSteps = steps.filter(step => step.done).length; const totalSteps = steps.length; return ( <div className="border rounded-lg"> <div className={`${hasBlockingFlag ? 'bg-red-50' : 'bg-white'} px-4 py-3`}> {/* Progress and Flags Row */} <div className="flex justify-between items-center mb-2"> <div className="flex items-center gap-3"> {hasBlockingFlag ? ( <> <AlertTriangle className="h-6 w-6 text-red-600" /> <span className="font-medium text-red-600">{flags.blocking[0]}</span> </> ) : ( <> <div className="w-6 h-6 rounded-full border-2 border-indigo-200 border-t-indigo-500 animate-spin" /> <span className="font-medium text-gray-900">Processing document request</span> </> )} </div> <div className="flex items-center gap-2"> {hasNonBlockingFlag && ( <span className="bg-yellow-100 px-3 py-1 rounded text-yellow-700 text-sm"> {flags.nonBlocking[0]} </span> )} </div> </div> {/* Progress Text and Notes */} <div className="flex justify-between items-center"> <div className="text-gray-600"> {completedSteps} of {totalSteps} steps completed </div> {flagNotes && ( <div className="text-sm text-gray-600 italic"> Note: {flagNotes} </div> )} </div> </div> </div> ); }; return ( <div className="min-h-screen w-full bg-gray-100 p-8 flex items-center justify-center"> <div className={`w-full max-w-7xl aspect-[16/9] bg-white rounded-xl shadow-lg p-6 ${ flags.blocking.length > 0 && flags.nonBlocking.length > 0 ? 'border-2 border-yellow-400 outline outline-2 outline-red-500' : flags.blocking.length > 0 ? 'border-4 border-red-500' : flags.nonBlocking.length > 0 ? 'border-4 border-yellow-400' : '' }`}> <div className="h-full grid grid-rows-[auto_1fr_auto] gap-4"> {/* Top Section */} <div className="grid gap-4"> <ActiveFlags /> {/* Combined Main Info and Details */} <div className="border rounded-lg bg-white p-4"> <div className="space-y-4"> {/* Header Info */} <div className="grid grid-cols-3 gap-4 pb-4 border-b"> <div className="col-span-2"> <div className="text-2xl font-medium">REF-2024-001</div> <div className="text-gray-600">Transcript of Records â€¢ 2 copies</div> </div> <div className="text-right"> <div className="text-2xl font-medium">â‚±600.00</div> <div className="text-sm text-gray-600">Paid on 2/15/2024</div> </div> </div> {/* Details Grid */} <div className="grid grid-cols-2 gap-4"> {[ ['Student', 'John Doe'], ['ID', '2020-00001'], ['Purpose', 'Employment'], ['Status', 'Processing'] ].map(([label, value], i) => ( <div key={i} className="border rounded p-3"> <div className="text-sm text-gray-600">{label}</div> <div className="font-medium">{value}</div> </div> ))} </div> </div> </div> </div> {/* Middle Section */} <div className="grid md:grid-cols-3 gap-4"> {/* Empty col-span-2 to maintain layout */} <div className="md:col-span-2"></div> {/* Steps */} <div className="border rounded-lg bg-white flex flex-col"> <div className="px-4 py-3 border-b bg-gray-50"> <div className="font-medium">Processing Steps</div> </div> <div className="p-4 flex-grow"> <div className="space-y-2"> {steps.map((item, i) => { const isNextStep = i === steps.findIndex(step => !step.done); return ( <button key={i} onClick={() => toggleStep(i)} className={`flex items-center gap-2 px-3 py-2 rounded w-full transition-all duration-150 ${item.done ? 'bg-green-50 text-green-700' : 'bg-gray-50'} ${isNextStep ? 'hover:bg-green-100 cursor-pointer' : ''} ${!isNextStep && !item.done ? 'opacity-50 cursor-not-allowed' : ''} ${item.done && i === steps.findIndex(step => !step.done) - 1 ? 'hover:bg-red-50 hover:text-red-700' : ''} `} > <div className={`w-5 h-5 rounded-full border flex items-center justify-center transition-colors ${item.done ? 'border-green-500' : isNextStep ? 'border-green-300' : 'border-gray-300'} `}> {item.done && <Check className="w-3 h-3" />} </div> {item.step} </button> ); })} </div> </div> </div> </div> {/* Bottom Section - Flag Management */} <div className="border rounded-lg"> {showFlagSelector ? <FlagSelector /> : <FlagDisplay />} </div> </div> </div> </div> ); }; export default DocumentRequest;