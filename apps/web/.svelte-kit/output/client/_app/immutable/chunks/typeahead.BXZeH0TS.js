import{w as p}from"./index.C9tjxovB.js";import{w as g}from"./array.DDZSQHHD.js";import{k as I,a as i,w}from"./utils.DSScpxlp.js";import{s as y}from"./helpers.xm3Hvi3u.js";import{a7 as A}from"./scheduler.O3yElrGi.js";function k(e){e.setAttribute("data-highlighted","")}function N(e){e.removeAttribute("data-highlighted")}function v(e,t=500){let r=null;return function(...a){const o=()=>{r=null,e(...a)};r&&clearTimeout(r),r=setTimeout(o,t)}}function C(e){I&&y(1).then(()=>{const t=document.activeElement;!i(t)||t===e||(t.tabIndex=-1,e&&(e.tabIndex=0,e.focus()))})}function b(){return Array.from(document.querySelectorAll('a[href]:not([tabindex="-1"]), button:not([disabled]):not([tabindex="-1"]), input:not([disabled]):not([tabindex="-1"]), select:not([disabled]):not([tabindex="-1"]), textarea:not([disabled]):not([tabindex="-1"]), [tabindex]:not([tabindex="-1"])'))}function _(e){const t=b(),a=t.indexOf(e)+1,o=t[a];return a<t.length&&i(o)?o:null}function j(e){const t=b(),a=t.indexOf(e)-1,o=t[a];return a>=0&&i(o)?o:null}const T=new Set(["Shift","Control","Alt","Meta","CapsLock","NumLock"]),S={onMatch:C,getCurrentItem:()=>document.activeElement};function q(e={}){const t={...S,...e},r=w(p([])),a=v(()=>{r.update(()=>[])});return{typed:r,resetTyped:a,handleTypeaheadSearch:(l,m)=>{if(T.has(l))return;const u=t.getCurrentItem(),s=A(r);if(!Array.isArray(s))return;s.push(l.toLowerCase()),r.set(s);const f=m.filter(n=>!(n.getAttribute("disabled")==="true"||n.getAttribute("aria-disabled")==="true"||n.hasAttribute("data-disabled"))),h=s.length>1&&s.every(n=>n===s[0])?s[0]:s.join(""),x=i(u)?f.indexOf(u):-1;let c=g(f,Math.max(x,0));h.length===1&&(c=c.filter(n=>n!==u));const d=c.find(n=>(n==null?void 0:n.innerText)&&n.innerText.toLowerCase().startsWith(h.toLowerCase()));i(d)&&d!==u&&t.onMatch(d),a()}}}export{j as a,k as b,q as c,_ as g,C as h,N as r};
