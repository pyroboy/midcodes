import{s as Nt,a as v,b as N,f as g,g as $,d as f,j as C,p as Ct,k as m,a3 as he,U as Ht,i as D,l as o,w as Lt,o as It,t as q,h as H,m as Z,M as Le,N as Mt,r as Ft,O as Me,c as Ye,n as Ze,z as Pt,a8 as zt,v as nt,y as jt}from"../chunks/scheduler.Bl--k1HL.js";import{S as Dt,i as At,c as te,a as le,m as ae,t as z,h as it,b as j,d as se,f as Fe,e as ot,g as ft}from"../chunks/index.DR8de1tj.js";import{g as Ut}from"../chunks/globals.D0QH3NT1.js";import{e as Be}from"../chunks/each.En5UpT5R.js";import{z as $e}from"../chunks/index.D4CdqmV7.js";import{s as Bt}from"../chunks/formData.IVesd0ZS.js";import"../chunks/string.DBeRn4Bt.js";import{a as Ot}from"../chunks/zod.DtCsYocE.js";import"../chunks/index.D4E8IgGl.js";import{I as ze}from"../chunks/input.CkoDOh7A.js";import{L as Re}from"../chunks/label.BX-RGDB2.js";import{c as ve}from"../chunks/utils.D33FkIxg.js";import{p as Gt}from"../chunks/stores.Cq8_Q5sV.js";import{g as Jt}from"../chunks/entry.B5jMEGBp.js";import{t as je}from"../chunks/Toaster.svelte_svelte_type_style_lang.Rgr6G_b5.js";import{T as Kt}from"../chunks/Toaster.ClvMR0yn.js";import{f as ct}from"../chunks/index.NUNB5A5N.js";import{C as Qt}from"../chunks/check.C8hdgrCp.js";import{B as Wt}from"../chunks/button.BqeWxtk_.js";const Xt=$e.object({firstName:$e.string().min(1,"First name is required").max(100,"First name is too long"),lastName:$e.string().min(1,"Last name is required").max(100,"Last name is too long"),email:$e.string().min(1,"Email is required").email("Invalid email address").max(100,"Email is too long"),phone:$e.string().min(1,"Phone number is required").regex(/((^(\+)(\d){12}$)|(^\d{11}$))/,"Phone number must be in Philippine format: +639191234567 or 09191234567").max(20,"Phone number is too long"),ticketType:$e.string().min(1,"Ticket type is required"),recaptchaToken:$e.string().optional(),additionalInfo:$e.record($e.string()).optional()});function ut(s){let e,t,l,a,r,i,u=s[0].referenceCode+"",p;return{c(){e=v("p"),t=q(s[4]),l=N(),a=v("p"),r=q("Reference Code: "),i=v("span"),p=q(u),this.h()},l(d){e=g(d,"P",{class:!0});var c=$(e);t=H(c,s[4]),c.forEach(f),l=C(d),a=g(d,"P",{class:!0});var k=$(a);r=H(k,"Reference Code: "),i=g(k,"SPAN",{class:!0});var y=$(i);p=H(y,u),y.forEach(f),k.forEach(f),this.h()},h(){m(e,"class","text-gray-600 h-6 font-medium"),m(i,"class","font-mono font-bold"),m(a,"class","text-gray-600 mt-2")},m(d,c){D(d,e,c),o(e,t),D(d,l,c),D(d,a,c),o(a,r),o(a,i),o(i,p)},p(d,c){c&16&&Z(t,d[4]),c&1&&u!==(u=d[0].referenceCode+"")&&Z(p,u)},d(d){d&&(f(e),f(l),f(a))}}}function Yt(s){let e,t,l,a,r,i,u,p,d,c,k="Registration Successful!",y,h,w;u=new Qt({props:{class:"w-16 h-16 text-green-600 stroke-[3]"}});let I=s[3]&&ut(s);return{c(){e=v("div"),t=v("div"),l=v("div"),a=v("div"),r=N(),i=v("div"),te(u.$$.fragment),p=N(),d=v("div"),c=v("h2"),c.textContent=k,y=N(),I&&I.c(),this.h()},l(T){e=g(T,"DIV",{class:!0});var E=$(e);t=g(E,"DIV",{class:!0});var V=$(t);l=g(V,"DIV",{class:!0});var P=$(l);a=g(P,"DIV",{class:!0}),$(a).forEach(f),r=C(P),i=g(P,"DIV",{class:!0,style:!0});var F=$(i);le(u.$$.fragment,F),F.forEach(f),P.forEach(f),p=C(V),d=g(V,"DIV",{class:!0});var W=$(d);c=g(W,"H2",{class:!0,"data-svelte-h":!0}),Ct(c)!=="svelte-11yqtdv"&&(c.textContent=k),y=C(W),I&&I.l(W),W.forEach(f),V.forEach(f),E.forEach(f),this.h()},h(){m(a,"class","absolute inset-0 bg-green-100 rounded-full scale-0 animate-in zoom-in duration-500 delay-300 svelte-1tc2qf2"),he(a,"scale-100",s[2]),m(i,"class","absolute inset-0 flex items-center justify-center opacity-0 scale-50 svelte-1tc2qf2"),Ht(i,"transition","all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) 0.3s"),he(i,"opacity-100",s[2]),he(i,"scale-100",s[2]),m(l,"class","relative w-32 h-32 mb-8"),m(c,"class","text-2xl font-bold text-gray-900 animate-in fade-in slide-in-from-bottom duration-500 delay-500"),m(d,"class","text-center space-y-4"),m(t,"class","bg-white rounded-2xl shadow-xl w-full max-w-lg p-12 relative flex flex-col items-center animate-in fade-in zoom-in-95 duration-500"),m(e,"class","fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-[100] svelte-1tc2qf2"),he(e,"opacity-0",!s[1]),he(e,"opacity-100",s[1])},m(T,E){D(T,e,E),o(e,t),o(t,l),o(l,a),o(l,r),o(l,i),ae(u,i,null),o(t,p),o(t,d),o(d,c),o(d,y),I&&I.m(d,null),w=!0},p(T,[E]){(!w||E&4)&&he(a,"scale-100",T[2]),(!w||E&4)&&he(i,"opacity-100",T[2]),(!w||E&4)&&he(i,"scale-100",T[2]),T[3]?I?I.p(T,E):(I=ut(T),I.c(),I.m(d,null)):I&&(I.d(1),I=null),(!w||E&2)&&he(e,"opacity-0",!T[1]),(!w||E&2)&&he(e,"opacity-100",T[1])},i(T){w||(z(u.$$.fragment,T),T&&Lt(()=>{w&&(h||(h=it(e,ct,{duration:200},!0)),h.run(1))}),w=!0)},o(T){j(u.$$.fragment,T),T&&(h||(h=it(e,ct,{duration:200},!1)),h.run(0)),w=!1},d(T){T&&f(e),se(u),I&&I.d(),T&&h&&h.end()}}}function Zt(s,e,t){let{data:l}=e,a=!1,r=!1,i=!1,u="";const p=`Please complete payment within ${l.paymentTimeoutMinutes} minutes`;return It(()=>{t(1,a=!0),setTimeout(()=>t(2,r=!0),300),setTimeout(()=>t(3,i=!0),1e3);let d=0;const c=setInterval(()=>{d<p.length?(t(4,u=p.slice(0,d+1)),d++):clearInterval(c)},50);return()=>clearInterval(c)}),s.$$set=d=>{"data"in d&&t(0,l=d.data)},[l,a,r,i,u]}class xt extends Dt{constructor(e){super(),At(this,e,Zt,Yt,Nt,{data:0})}}const{document:Ue}=Ut;function dt(s,e,t){const l=s.slice();return l[22]=e[t],l}function mt(s,e,t){const l=s.slice();return l[25]=e[t],l}function pt(s){let e,t;return e=new xt({props:{data:s[5]}}),{c(){te(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,a){ae(e,l,a),t=!0},p(l,a){const r={};a&32&&(r.data=l[5]),e.$set(r)},i(l){t||(z(e.$$.fragment,l),t=!0)},o(l){j(e.$$.fragment,l),t=!1},d(l){se(e,l)}}}function _t(s){let e,t=s[0].event.event_long_name+"",l;return{c(){e=v("p"),l=q(t),this.h()},l(a){e=g(a,"P",{class:!0});var r=$(e);l=H(r,t),r.forEach(f),this.h()},h(){m(e,"class","text-lg text-muted-foreground")},m(a,r){D(a,e,r),o(e,l)},p(a,r){r&1&&t!==(t=a[0].event.event_long_name+"")&&Z(l,t)},d(a){a&&f(e)}}}function el(s){let e;return{c(){e=q("First Name")},l(t){e=H(t,"First Name")},m(t,l){D(t,e,l)},d(t){t&&f(e)}}}function ht(s){let e,t=s[9].firstName+"",l;return{c(){e=v("p"),l=q(t),this.h()},l(a){e=g(a,"P",{class:!0});var r=$(e);l=H(r,t),r.forEach(f),this.h()},h(){m(e,"class","text-sm text-destructive")},m(a,r){D(a,e,r),o(e,l)},p(a,r){r&512&&t!==(t=a[9].firstName+"")&&Z(l,t)},d(a){a&&f(e)}}}function tl(s){let e;return{c(){e=q("Last Name")},l(t){e=H(t,"Last Name")},m(t,l){D(t,e,l)},d(t){t&&f(e)}}}function vt(s){let e,t=s[9].lastName+"",l;return{c(){e=v("p"),l=q(t),this.h()},l(a){e=g(a,"P",{class:!0});var r=$(e);l=H(r,t),r.forEach(f),this.h()},h(){m(e,"class","text-sm text-destructive")},m(a,r){D(a,e,r),o(e,l)},p(a,r){r&512&&t!==(t=a[9].lastName+"")&&Z(l,t)},d(a){a&&f(e)}}}function ll(s){let e;return{c(){e=q("Email")},l(t){e=H(t,"Email")},m(t,l){D(t,e,l)},d(t){t&&f(e)}}}function gt(s){let e,t=s[9].email+"",l;return{c(){e=v("p"),l=q(t),this.h()},l(a){e=g(a,"P",{class:!0});var r=$(e);l=H(r,t),r.forEach(f),this.h()},h(){m(e,"class","text-sm text-destructive")},m(a,r){D(a,e,r),o(e,l)},p(a,r){r&512&&t!==(t=a[9].email+"")&&Z(l,t)},d(a){a&&f(e)}}}function al(s){let e;return{c(){e=q("Phone")},l(t){e=H(t,"Phone")},m(t,l){D(t,e,l)},d(t){t&&f(e)}}}function bt(s){let e,t=s[9].phone+"",l;return{c(){e=v("p"),l=q(t),this.h()},l(a){e=g(a,"P",{class:!0});var r=$(e);l=H(r,t),r.forEach(f),this.h()},h(){m(e,"class","text-sm text-destructive")},m(a,r){D(a,e,r),o(e,l)},p(a,r){r&512&&t!==(t=a[9].phone+"")&&Z(l,t)},d(a){a&&f(e)}}}function sl(s){let e,t='<p class="text-destructive font-medium">No tickets available for this event.</p>';return{c(){e=v("div"),e.innerHTML=t,this.h()},l(l){e=g(l,"DIV",{class:!0,"data-svelte-h":!0}),Ct(e)!=="svelte-h0wkk5"&&(e.innerHTML=t),this.h()},h(){m(e,"class","rounded-lg border border-destructive/50 bg-destructive/10 p-4")},m(l,a){D(l,e,a)},p:Ze,i:Ze,o:Ze,d(l){l&&f(e)}}}function rl(s){let e,t,l,a,r,i;t=new Re({props:{class:"text-lg",$$slots:{default:[nl]},$$scope:{ctx:s}}});let u=Be(s[1]),p=[];for(let c=0;c<u.length;c+=1)p[c]=Et(dt(s,u,c));let d=s[9].ticketType&&wt(s);return{c(){e=v("div"),te(t.$$.fragment),l=N(),a=v("div");for(let c=0;c<p.length;c+=1)p[c].c();r=N(),d&&d.c(),this.h()},l(c){e=g(c,"DIV",{class:!0});var k=$(e);le(t.$$.fragment,k),l=C(k),a=g(k,"DIV",{class:!0});var y=$(a);for(let h=0;h<p.length;h+=1)p[h].l(y);y.forEach(f),r=C(k),d&&d.l(k),k.forEach(f),this.h()},h(){m(a,"class","grid gap-4"),m(e,"class","space-y-4")},m(c,k){D(c,e,k),ae(t,e,null),o(e,l),o(e,a);for(let y=0;y<p.length;y+=1)p[y]&&p[y].m(a,null);o(e,r),d&&d.m(e,null),i=!0},p(c,k){const y={};if(k&268435456&&(y.$$scope={dirty:k,ctx:c}),t.$set(y),k&258){u=Be(c[1]);let h;for(h=0;h<u.length;h+=1){const w=dt(c,u,h);p[h]?p[h].p(w,k):(p[h]=Et(w),p[h].c(),p[h].m(a,null))}for(;h<p.length;h+=1)p[h].d(1);p.length=u.length}c[9].ticketType?d?d.p(c,k):(d=wt(c),d.c(),d.m(e,null)):d&&(d.d(1),d=null)},i(c){i||(z(t.$$.fragment,c),i=!0)},o(c){j(t.$$.fragment,c),i=!1},d(c){c&&f(e),se(t),Pt(p,c),d&&d.d()}}}function nl(s){let e;return{c(){e=q("Select Ticket Type")},l(t){e=H(t,"Select Ticket Type")},m(t,l){D(t,e,l)},d(t){t&&f(e)}}}function $t(s){let e,t=Be(s[22].includes),l=[];for(let a=0;a<t.length;a+=1)l[a]=kt(mt(s,t,a));return{c(){e=v("ul");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=g(a,"UL",{class:!0});var r=$(e);for(let i=0;i<l.length;i+=1)l[i].l(r);r.forEach(f),this.h()},h(){m(e,"class","mt-1 text-sm list-disc list-inside space-y-1")},m(a,r){D(a,e,r);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null)},p(a,r){if(r&2){t=Be(a[22].includes);let i;for(i=0;i<t.length;i+=1){const u=mt(a,t,i);l[i]?l[i].p(u,r):(l[i]=kt(u),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=t.length}},d(a){a&&f(e),Pt(l,a)}}}function kt(s){let e,t=s[25]+"",l;return{c(){e=v("li"),l=q(t)},l(a){e=g(a,"LI",{});var r=$(e);l=H(r,t),r.forEach(f)},m(a,r){D(a,e,r),o(e,l)},p(a,r){r&2&&t!==(t=a[25]+"")&&Z(l,t)},d(a){a&&f(e)}}}function Et(s){var Y;let e,t,l,a=!1,r,i,u,p,d=s[22].type+"",c,k,y,h,w,I,T=s[22].price+"",E,V,P,F=s[22].available+"",W,X,ge,oe,_,L,x,R=((Y=s[22].includes)==null?void 0:Y.length)&&$t(s);return _=zt(s[19][0]),{c(){e=v("label"),t=v("input"),r=N(),i=v("div"),u=v("div"),p=v("div"),c=q(d),k=N(),R&&R.c(),y=N(),h=v("div"),w=v("div"),I=q("₱"),E=q(T),V=N(),P=v("span"),W=q(F),X=q(" left"),ge=N(),this.h()},l(S){e=g(S,"LABEL",{class:!0});var A=$(e);t=g(A,"INPUT",{type:!0,name:!0,class:!0}),r=C(A),i=g(A,"DIV",{class:!0});var fe=$(i);u=g(fe,"DIV",{});var U=$(u);p=g(U,"DIV",{class:!0});var ce=$(p);c=H(ce,d),ce.forEach(f),k=C(U),R&&R.l(U),U.forEach(f),y=C(fe),h=g(fe,"DIV",{class:!0});var ke=$(h);w=g(ke,"DIV",{class:!0});var ee=$(w);I=H(ee,"₱"),E=H(ee,T),ee.forEach(f),V=C(ke),P=g(ke,"SPAN",{class:!0});var Ce=$(P);W=H(Ce,F),X=H(Ce," left"),Ce.forEach(f),ke.forEach(f),fe.forEach(f),ge=C(A),A.forEach(f),this.h()},h(){m(t,"type","radio"),m(t,"name","ticketType"),t.__value=l=s[22].type,nt(t,t.__value),m(t,"class","sr-only"),m(p,"class","font-medium"),m(w,"class","font-medium"),m(P,"class","text-sm text-muted-foreground"),m(h,"class","text-right"),m(i,"class","flex justify-between items-start gap-2"),m(e,"class",oe=ve("relative flex flex-col p-4 cursor-pointer rounded-lg border transition-colors",s[8].ticketType===s[22].type?"bg-primary text-primary-foreground border-primary":"hover:bg-muted/50 border-border")),_.p(t)},m(S,A){D(S,e,A),o(e,t),t.checked=t.__value===s[8].ticketType,o(e,r),o(e,i),o(i,u),o(u,p),o(p,c),o(u,k),R&&R.m(u,null),o(i,y),o(i,h),o(h,w),o(w,I),o(w,E),o(h,V),o(h,P),o(P,W),o(P,X),o(e,ge),L||(x=jt(t,"change",s[18]),L=!0)},p(S,A){var fe;A&2&&l!==(l=S[22].type)&&(t.__value=l,nt(t,t.__value),a=!0),(a||A&258)&&(t.checked=t.__value===S[8].ticketType),A&2&&d!==(d=S[22].type+"")&&Z(c,d),(fe=S[22].includes)!=null&&fe.length?R?R.p(S,A):(R=$t(S),R.c(),R.m(u,null)):R&&(R.d(1),R=null),A&2&&T!==(T=S[22].price+"")&&Z(E,T),A&2&&F!==(F=S[22].available+"")&&Z(W,F),A&258&&oe!==(oe=ve("relative flex flex-col p-4 cursor-pointer rounded-lg border transition-colors",S[8].ticketType===S[22].type?"bg-primary text-primary-foreground border-primary":"hover:bg-muted/50 border-border"))&&m(e,"class",oe)},d(S){S&&f(e),R&&R.d(),_.r(),L=!1,x()}}}function wt(s){let e,t=s[9].ticketType+"",l;return{c(){e=v("p"),l=q(t),this.h()},l(a){e=g(a,"P",{class:!0});var r=$(e);l=H(r,t),r.forEach(f),this.h()},h(){m(e,"class","text-sm text-destructive")},m(a,r){D(a,e,r),o(e,l)},p(a,r){r&512&&t!==(t=a[9].ticketType+"")&&Z(l,t)},d(a){a&&f(e)}}}function Tt(s){let e,t,l,a,r=s[3]&&yt(s);return{c(){e=v("div"),t=v("div"),a=N(),r&&r.c(),this.h()},l(i){e=g(i,"DIV",{class:!0});var u=$(e);t=g(u,"DIV",{class:!0,"data-sitekey":!0,"data-callback":!0,"data-error-callback":!0,"data-expired-callback":!0}),$(t).forEach(f),a=C(u),r&&r.l(u),u.forEach(f),this.h()},h(){m(t,"class","g-recaptcha dark:invert-[.95]"),m(t,"data-sitekey",l=s[0].local.recaptcha),m(t,"data-callback","onRecaptchaSuccess"),m(t,"data-error-callback","onRecaptchaError"),m(t,"data-expired-callback","onRecaptchaExpired"),m(e,"class","mt-4")},m(i,u){D(i,e,u),o(e,t),o(e,a),r&&r.m(e,null)},p(i,u){u&1&&l!==(l=i[0].local.recaptcha)&&m(t,"data-sitekey",l),i[3]?r?r.p(i,u):(r=yt(i),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},d(i){i&&f(e),r&&r.d()}}}function yt(s){let e,t;return{c(){e=v("p"),t=q(s[3]),this.h()},l(l){e=g(l,"P",{class:!0});var a=$(e);t=H(a,s[3]),a.forEach(f),this.h()},h(){m(e,"class","text-sm text-destructive mt-1")},m(l,a){D(l,e,a),o(e,t)},p(l,a){a&8&&Z(t,l[3])},d(l){l&&f(e)}}}function il(s){let e=s[6]?"Registering...":"Register",t;return{c(){t=q(e)},l(l){t=H(l,e)},m(l,a){D(l,t,a)},p(l,a){a&64&&e!==(e=l[6]?"Registering...":"Register")&&Z(t,e)},d(l){l&&f(t)}}}function ol(s){let e,t,l,a,r,i,u,p,d,c,k,y,h=s[0].event.event_name+"",w,I,T,E,V,P,F,W,X,ge,oe,_,L,x,R,Y,S,A,fe,U,ce,ke,ee,Ce,Oe,Ge,ue,Ee,Je,be,Ke,Qe,We,re,ne,Se,qe,we,He,Te,Xe,xe;Ue.title=e="Register for "+s[0].event.event_name,r=new Kt({});let M=s[4]&&s[5]&&pt(s),B=s[0].event.event_long_name&&_t(s);F=new Re({props:{for:"firstName",$$slots:{default:[el]},$$scope:{ctx:s}}});function Vt(n){s[14](n)}let et={id:"firstName",name:"firstName",class:ve("w-full",s[9].firstName&&"border-destructive")};s[8].firstName!==void 0&&(et.value=s[8].firstName),X=new ze({props:et}),Le.push(()=>Fe(X,"value",Vt));let O=s[9].firstName&&ht(s);x=new Re({props:{for:"lastName",$$slots:{default:[tl]},$$scope:{ctx:s}}});function Rt(n){s[15](n)}let tt={id:"lastName",name:"lastName",class:ve("w-full",s[9].lastName&&"border-destructive")};s[8].lastName!==void 0&&(tt.value=s[8].lastName),Y=new ze({props:tt}),Le.push(()=>Fe(Y,"value",Rt));let G=s[9].lastName&&vt(s);ce=new Re({props:{for:"email",$$slots:{default:[ll]},$$scope:{ctx:s}}});function St(n){s[16](n)}let lt={type:"email",id:"email",name:"email",class:ve("w-full",s[9].email&&"border-destructive")};s[8].email!==void 0&&(lt.value=s[8].email),ee=new ze({props:lt}),Le.push(()=>Fe(ee,"value",St));let J=s[9].email&&gt(s);Ee=new Re({props:{for:"phone",$$slots:{default:[al]},$$scope:{ctx:s}}});function qt(n){s[17](n)}let at={type:"tel",id:"phone",name:"phone",class:ve("w-full",s[9].phone&&"border-destructive")};s[8].phone!==void 0&&(at.value=s[8].phone),be=new ze({props:at}),Le.push(()=>Fe(be,"value",qt));let K=s[9].phone&&bt(s);const st=[rl,sl],ye=[];function rt(n,b){return n[7]?0:1}re=rt(s),ne=ye[re]=st[re](s);let Q=!s[10]&&s[0].local.recaptcha&&Tt(s);return we=new Wt({props:{type:"submit",class:"w-full",disabled:s[6]||!s[7]||!s[10]&&!s[2],$$slots:{default:[il]},$$scope:{ctx:s}}}),{c(){t=v("meta"),a=N(),te(r.$$.fragment),i=N(),u=v("div"),M&&M.c(),p=N(),d=v("div"),c=v("div"),k=v("div"),y=v("h1"),w=q(h),I=N(),B&&B.c(),T=N(),E=v("form"),V=v("div"),P=v("div"),te(F.$$.fragment),W=N(),te(X.$$.fragment),oe=N(),O&&O.c(),_=N(),L=v("div"),te(x.$$.fragment),R=N(),te(Y.$$.fragment),A=N(),G&&G.c(),fe=N(),U=v("div"),te(ce.$$.fragment),ke=N(),te(ee.$$.fragment),Oe=N(),J&&J.c(),Ge=N(),ue=v("div"),te(Ee.$$.fragment),Je=N(),te(be.$$.fragment),Qe=N(),K&&K.c(),We=N(),ne.c(),Se=N(),Q&&Q.c(),qe=N(),te(we.$$.fragment),this.h()},l(n){const b=Mt("svelte-zert8s",Ue.head);t=g(b,"META",{name:!0,content:!0}),b.forEach(f),a=C(n),le(r.$$.fragment,n),i=C(n),u=g(n,"DIV",{class:!0});var Ie=$(u);M&&M.l(Ie),p=C(Ie),d=g(Ie,"DIV",{class:!0});var De=$(d);c=g(De,"DIV",{class:!0});var Pe=$(c);k=g(Pe,"DIV",{class:!0});var Ne=$(k);y=g(Ne,"H1",{class:!0});var Ve=$(y);w=H(Ve,h),Ve.forEach(f),I=C(Ne),B&&B.l(Ne),Ne.forEach(f),T=C(Pe),E=g(Pe,"FORM",{method:!0,class:!0});var ie=$(E);V=g(ie,"DIV",{class:!0});var de=$(V);P=g(de,"DIV",{class:!0});var me=$(P);le(F.$$.fragment,me),W=C(me),le(X.$$.fragment,me),oe=C(me),O&&O.l(me),me.forEach(f),_=C(de),L=g(de,"DIV",{class:!0});var pe=$(L);le(x.$$.fragment,pe),R=C(pe),le(Y.$$.fragment,pe),A=C(pe),G&&G.l(pe),pe.forEach(f),fe=C(de),U=g(de,"DIV",{class:!0});var _e=$(U);le(ce.$$.fragment,_e),ke=C(_e),le(ee.$$.fragment,_e),Oe=C(_e),J&&J.l(_e),_e.forEach(f),Ge=C(de),ue=g(de,"DIV",{class:!0});var Ae=$(ue);le(Ee.$$.fragment,Ae),Je=C(Ae),le(be.$$.fragment,Ae),Qe=C(Ae),K&&K.l(Ae),Ae.forEach(f),de.forEach(f),We=C(ie),ne.l(ie),Se=C(ie),Q&&Q.l(ie),qe=C(ie),le(we.$$.fragment,ie),ie.forEach(f),Pe.forEach(f),De.forEach(f),Ie.forEach(f),this.h()},h(){m(t,"name","description"),m(t,"content",l="Registration page for "+s[0].event.event_name),m(y,"class","text-3xl font-bold mb-2 text-foreground"),m(k,"class","mb-8"),m(P,"class","space-y-2"),m(L,"class","space-y-2"),m(U,"class","space-y-2"),m(ue,"class","space-y-2"),m(V,"class","grid grid-cols-1 md:grid-cols-2 gap-6"),m(E,"method","POST"),m(E,"class","space-y-6"),m(c,"class","max-w-2xl mx-auto bg-card rounded-lg shadow-lg p-6 dark:border dark:border-border"),m(d,"class",He="container mx-auto px-4 py-8 "+(s[4]?"pointer-events-none blur-sm":"")),m(u,"class","relative min-h-screen bg-background")},m(n,b){o(Ue.head,t),D(n,a,b),ae(r,n,b),D(n,i,b),D(n,u,b),M&&M.m(u,null),o(u,p),o(u,d),o(d,c),o(c,k),o(k,y),o(y,w),o(k,I),B&&B.m(k,null),o(c,T),o(c,E),o(E,V),o(V,P),ae(F,P,null),o(P,W),ae(X,P,null),o(P,oe),O&&O.m(P,null),o(V,_),o(V,L),ae(x,L,null),o(L,R),ae(Y,L,null),o(L,A),G&&G.m(L,null),o(V,fe),o(V,U),ae(ce,U,null),o(U,ke),ae(ee,U,null),o(U,Oe),J&&J.m(U,null),o(V,Ge),o(V,ue),ae(Ee,ue,null),o(ue,Je),ae(be,ue,null),o(ue,Qe),K&&K.m(ue,null),o(E,We),ye[re].m(E,null),o(E,Se),Q&&Q.m(E,null),o(E,qe),ae(we,E,null),Te=!0,Xe||(xe=Ft(s[13].call(null,E)),Xe=!0)},p(n,[b]){(!Te||b&1)&&e!==(e="Register for "+n[0].event.event_name)&&(Ue.title=e),(!Te||b&1&&l!==(l="Registration page for "+n[0].event.event_name))&&m(t,"content",l),n[4]&&n[5]?M?(M.p(n,b),b&48&&z(M,1)):(M=pt(n),M.c(),z(M,1),M.m(u,p)):M&&(ft(),j(M,1,1,()=>{M=null}),ot()),(!Te||b&1)&&h!==(h=n[0].event.event_name+"")&&Z(w,h),n[0].event.event_long_name?B?B.p(n,b):(B=_t(n),B.c(),B.m(k,null)):B&&(B.d(1),B=null);const Ie={};b&268435456&&(Ie.$$scope={dirty:b,ctx:n}),F.$set(Ie);const De={};b&512&&(De.class=ve("w-full",n[9].firstName&&"border-destructive")),!ge&&b&256&&(ge=!0,De.value=n[8].firstName,Me(()=>ge=!1)),X.$set(De),n[9].firstName?O?O.p(n,b):(O=ht(n),O.c(),O.m(P,null)):O&&(O.d(1),O=null);const Pe={};b&268435456&&(Pe.$$scope={dirty:b,ctx:n}),x.$set(Pe);const Ne={};b&512&&(Ne.class=ve("w-full",n[9].lastName&&"border-destructive")),!S&&b&256&&(S=!0,Ne.value=n[8].lastName,Me(()=>S=!1)),Y.$set(Ne),n[9].lastName?G?G.p(n,b):(G=vt(n),G.c(),G.m(L,null)):G&&(G.d(1),G=null);const Ve={};b&268435456&&(Ve.$$scope={dirty:b,ctx:n}),ce.$set(Ve);const ie={};b&512&&(ie.class=ve("w-full",n[9].email&&"border-destructive")),!Ce&&b&256&&(Ce=!0,ie.value=n[8].email,Me(()=>Ce=!1)),ee.$set(ie),n[9].email?J?J.p(n,b):(J=gt(n),J.c(),J.m(U,null)):J&&(J.d(1),J=null);const de={};b&268435456&&(de.$$scope={dirty:b,ctx:n}),Ee.$set(de);const me={};b&512&&(me.class=ve("w-full",n[9].phone&&"border-destructive")),!Ke&&b&256&&(Ke=!0,me.value=n[8].phone,Me(()=>Ke=!1)),be.$set(me),n[9].phone?K?K.p(n,b):(K=bt(n),K.c(),K.m(ue,null)):K&&(K.d(1),K=null);let pe=re;re=rt(n),re===pe?ye[re].p(n,b):(ft(),j(ye[pe],1,1,()=>{ye[pe]=null}),ot(),ne=ye[re],ne?ne.p(n,b):(ne=ye[re]=st[re](n),ne.c()),z(ne,1),ne.m(E,Se)),!n[10]&&n[0].local.recaptcha?Q?Q.p(n,b):(Q=Tt(n),Q.c(),Q.m(E,qe)):Q&&(Q.d(1),Q=null);const _e={};b&196&&(_e.disabled=n[6]||!n[7]||!n[10]&&!n[2]),b&268435520&&(_e.$$scope={dirty:b,ctx:n}),we.$set(_e),(!Te||b&16&&He!==(He="container mx-auto px-4 py-8 "+(n[4]?"pointer-events-none blur-sm":"")))&&m(d,"class",He)},i(n){Te||(z(r.$$.fragment,n),z(M),z(F.$$.fragment,n),z(X.$$.fragment,n),z(x.$$.fragment,n),z(Y.$$.fragment,n),z(ce.$$.fragment,n),z(ee.$$.fragment,n),z(Ee.$$.fragment,n),z(be.$$.fragment,n),z(ne),z(we.$$.fragment,n),Te=!0)},o(n){j(r.$$.fragment,n),j(M),j(F.$$.fragment,n),j(X.$$.fragment,n),j(x.$$.fragment,n),j(Y.$$.fragment,n),j(ce.$$.fragment,n),j(ee.$$.fragment,n),j(Ee.$$.fragment,n),j(be.$$.fragment,n),j(ne),j(we.$$.fragment,n),Te=!1},d(n){n&&(f(a),f(i),f(u)),f(t),se(r,n),M&&M.d(),B&&B.d(),se(F),se(X),O&&O.d(),se(x),se(Y),G&&G.d(),se(ce),se(ee),J&&J.d(),se(Ee),se(be),K&&K.d(),ye[re].d(),Q&&Q.d(),se(we),Xe=!1,xe()}}}const fl="https://www.google.com/recaptcha/api.js";function cl(s,e,t){var oe;let l,a,r,i;Ye(s,Gt,_=>t(20,a=_));let{data:u}=e,p="",d="";const c=((oe=u.profile)==null?void 0:oe.role)&&["super_admin","event_admin","org_admin"].includes(u.profile.role);let k=!1,y=null,h=!1;const{form:w,errors:I,enhance:T}=Bt(u.form,{validators:Ot(Xt),taintedMessage:null,onSubmit:async({formData:_,cancel:L})=>{if(console.log("Form submission started"),t(6,h=!0),!c&&!p)return console.log("Missing reCAPTCHA token for non-admin user"),je.error("Please complete the reCAPTCHA verification"),t(6,h=!1),L(),!1;c||(console.log("Adding captcha token to form data"),_.append("captchaToken",p))},onResult:({result:_})=>{var L,x,R,Y,S;if(console.log("Form submission result:",_),t(6,h=!1),_.type==="success"&&((R=(x=(L=_.data)==null?void 0:L.form)==null?void 0:x.message)!=null&&R.data)){console.log("Success data:",_.data);const A=_.data.form.message.data;t(5,y=A),A&&A.referenceCode?(console.log("Starting redirect with reference code:",A.referenceCode),je.success("Registration successful!"),t(4,k=!0),setTimeout(()=>{Jt(`/events/${a.params.event_url}/${A.referenceCode}`)},2e3)):(console.error("Missing reference code in response"),je.error("Missing reference code in response"))}else _.type==="error"&&(console.error("Form submission error:",_.error),je.error(((Y=_.error)==null?void 0:Y.message)||"Registration failed"),(S=_.error)!=null&&S.message.includes("reCAPTCHA")&&(console.log("reCAPTCHA error detected, resetting token"),t(2,p=""),window.grecaptcha&&window.grecaptcha.reset()))}});Ye(s,w,_=>t(8,r=_)),Ye(s,I,_=>t(9,i=_));let E=[];It(()=>{if(!c&&u.local.recaptcha){const _=document.createElement("script");_.src=fl,_.async=!0,_.defer=!0,document.head.appendChild(_),window.onRecaptchaSuccess=L=>{console.log("reCAPTCHA success, token received"),t(2,p=L),t(3,d="")},window.onRecaptchaError=()=>{console.error("reCAPTCHA error"),t(3,d="reCAPTCHA verification failed"),t(2,p="")},window.onRecaptchaExpired=()=>{console.log("reCAPTCHA expired"),t(2,p=""),t(3,d="reCAPTCHA verification expired, please try again")}}});const V=[[]];function P(_){s.$$.not_equal(r.firstName,_)&&(r.firstName=_,w.set(r))}function F(_){s.$$.not_equal(r.lastName,_)&&(r.lastName=_,w.set(r))}function W(_){s.$$.not_equal(r.email,_)&&(r.email=_,w.set(r))}function X(_){s.$$.not_equal(r.phone,_)&&(r.phone=_,w.set(r))}function ge(){r.ticketType=this.__value,w.set(r)}return s.$$set=_=>{"data"in _&&t(0,u=_.data)},s.$$.update=()=>{s.$$.dirty&1&&t(1,E=Array.isArray(u.event.ticketing_data)?u.event.ticketing_data.filter(_=>typeof _.available=="number"&&_.available>0):[]),s.$$.dirty&2&&t(7,l=E.length>0)},[u,E,p,d,k,y,h,l,r,i,c,w,I,T,P,F,W,X,ge,V]}class Dl extends Dt{constructor(e){super(),At(this,e,cl,ol,Nt,{data:0})}}export{Dl as component};
