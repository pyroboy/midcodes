import{s as Xe,E as tt,C as De,a as W,f as q,g as X,d as u,J as Ne,i as _,F as lt,G as nt,H as st,K as Pe,D as at,b as E,e as K,p as Ze,j as T,k as ee,l as L,c as ve,M as ft,r as rt,O as ot,t as R,h as I,m as z,V as me,z as be,n as $t}from"../chunks/scheduler.Bl--k1HL.js";import{S as xe,i as ye,t as i,b as p,e as ue,f as ct,c as v,a as w,m as D,g as ie,d as C}from"../chunks/index.DR8de1tj.js";import{e as oe}from"../chunks/each.En5UpT5R.js";import{s as ut}from"../chunks/formData.IVesd0ZS.js";import"../chunks/entry.B5jMEGBp.js";import{I as it}from"../chunks/input.CkoDOh7A.js";import{L as de}from"../chunks/label.BX-RGDB2.js";import"../chunks/index.D4E8IgGl.js";import{T as _t,a as mt,b as pt,c as et,d as $e,e as ce}from"../chunks/table-row.rK6DUprU.js";import{g as gt}from"../chunks/spread.CgU5AtxT.js";import{c as Le,h as he}from"../chunks/utils.D33FkIxg.js";import{R as we,S as ke,a as Ee,V as Te,b as Se}from"../chunks/index.BkiOxIzK.js";import{z as Y}from"../chunks/index.D4CdqmV7.js";import{B as dt}from"../chunks/button.BqeWxtk_.js";function ht(f){let e,l,t;const n=f[3].default,s=tt(n,f,f[2],null);let a=[{class:l=Le("text-muted-foreground mt-4 text-sm",f[0])},f[1]],r={};for(let o=0;o<a.length;o+=1)r=De(r,a[o]);return{c(){e=W("caption"),s&&s.c(),this.h()},l(o){e=q(o,"CAPTION",{class:!0});var m=X(e);s&&s.l(m),m.forEach(u),this.h()},h(){Ne(e,r)},m(o,m){_(o,e,m),s&&s.m(e,null),t=!0},p(o,[m]){s&&s.p&&(!t||m&4)&&lt(s,n,o,o[2],t?st(n,o[2],m,null):nt(o[2]),null),Ne(e,r=gt(a,[(!t||m&1&&l!==(l=Le("text-muted-foreground mt-4 text-sm",o[0])))&&{class:l},m&2&&o[1]]))},i(o){t||(i(s,o),t=!0)},o(o){p(s,o),t=!1},d(o){o&&u(e),s&&s.d(o)}}}function bt(f,e,l){const t=["class"];let n=Pe(e,t),{$$slots:s={},$$scope:a}=e,{class:r=void 0}=e;return f.$$set=o=>{e=De(De({},e),at(o)),l(1,n=Pe(e,t)),"class"in o&&l(0,r=o.class),"$$scope"in o&&l(2,a=o.$$scope)},[r,n,a,s]}class vt extends xe{constructor(e){super(),ye(this,e,bt,ht,Xe,{class:0})}}const Ce={enum:{WATER:"WATER",ELECTRICITY:"ELECTRICITY",GAS:"GAS",INTERNET:"INTERNET",CABLE:"CABLE",OTHER:"OTHER"}},wt=Y.object({start_date:Y.coerce.date(),end_date:Y.coerce.date(),type:Y.enum(Object.values(Ce.enum)),cost_per_unit:Y.coerce.number().positive(),org_id:Y.string().uuid()}),Dt=Y.object({meter_id:Y.number(),meter_name:Y.string(),start_reading:Y.number(),end_reading:Y.number(),consumption:Y.number(),total_cost:Y.number(),tenant_count:Y.coerce.number(),per_tenant_cost:Y.number()});wt.extend({meter_billings:Y.array(Dt)});function Ve(f,e,l){const t=f.slice();return t[24]=e[l],t}function Ae(f,e,l){const t=f.slice();return t[27]=e[l][0],t[28]=e[l][1],t}function Oe(f,e,l){const t=f.slice();return t[31]=e[l].reading_date,t}function je(f,e,l){const t=f.slice();return t[31]=e[l].reading_date,t}function Me(f){let e,l="You don't have permission to view utility billings";return{c(){e=W("p"),e.textContent=l,this.h()},l(t){e=q(t,"P",{class:!0,"data-svelte-h":!0}),Ze(e)!=="svelte-u0uip9"&&(e.textContent=l),this.h()},h(){ee(e,"class","text-destructive")},m(t,n){_(t,e,n)},d(t){t&&u(e)}}}function Ue(f){let e,l,t,n,s,a,r,o,m,h,g,P,k,N,c,$,b,V,J,Z,U,H,x,G,fe,pe,S,te,Q,re;n=new de({props:{for:"start_date",$$slots:{default:[Ct]},$$scope:{ctx:f}}}),a=new we({props:{$$slots:{default:[Bt]},$$scope:{ctx:f}}}),a.$on("change",f[16]);let O=f[10].start_date&&He(f);h=new de({props:{for:"end_date",$$slots:{default:[Rt]},$$scope:{ctx:f}}}),P=new we({props:{$$slots:{default:[Vt]},$$scope:{ctx:f}}}),P.$on("change",f[17]);let j=f[10].end_date&&Ye(f);$=new de({props:{for:"type",$$slots:{default:[At]},$$scope:{ctx:f}}}),V=new we({props:{$$slots:{default:[Ft]},$$scope:{ctx:f}}}),V.$on("change",f[18]);let M=f[10].type&&We(f);H=new de({props:{for:"cost_per_unit",$$slots:{default:[Ht]},$$scope:{ctx:f}}});function ge(d){f[20](d)}let _e={type:"number",id:"cost_per_unit",min:"0",step:"0.01"};f[4]!==void 0&&(_e.value=f[4]),G=new it({props:_e}),ft.push(()=>ct(G,"value",ge)),G.$on("input",f[19]);let F=f[10].cost_per_unit&&qe(f),A=f[5].length>0&&Je(f);return{c(){e=W("form"),l=W("div"),t=W("div"),v(n.$$.fragment),s=E(),v(a.$$.fragment),r=E(),O&&O.c(),o=E(),m=W("div"),v(h.$$.fragment),g=E(),v(P.$$.fragment),k=E(),j&&j.c(),N=E(),c=W("div"),v($.$$.fragment),b=E(),v(V.$$.fragment),J=E(),M&&M.c(),Z=E(),U=W("div"),v(H.$$.fragment),x=E(),v(G.$$.fragment),pe=E(),F&&F.c(),S=E(),A&&A.c(),this.h()},l(d){e=q(d,"FORM",{method:!0,class:!0});var B=X(e);l=q(B,"DIV",{class:!0});var y=X(l);t=q(y,"DIV",{});var le=X(t);w(n.$$.fragment,le),s=T(le),w(a.$$.fragment,le),r=T(le),O&&O.l(le),le.forEach(u),o=T(y),m=q(y,"DIV",{});var ne=X(m);w(h.$$.fragment,ne),g=T(ne),w(P.$$.fragment,ne),k=T(ne),j&&j.l(ne),ne.forEach(u),N=T(y),c=q(y,"DIV",{});var se=X(c);w($.$$.fragment,se),b=T(se),w(V.$$.fragment,se),J=T(se),M&&M.l(se),se.forEach(u),Z=T(y),U=q(y,"DIV",{});var ae=X(U);w(H.$$.fragment,ae),x=T(ae),w(G.$$.fragment,ae),pe=T(ae),F&&F.l(ae),ae.forEach(u),y.forEach(u),S=T(B),A&&A.l(B),B.forEach(u),this.h()},h(){ee(l,"class","grid grid-cols-2 gap-4"),ee(e,"method","POST"),ee(e,"class","space-y-6")},m(d,B){_(d,e,B),L(e,l),L(l,t),D(n,t,null),L(t,s),D(a,t,null),L(t,r),O&&O.m(t,null),L(l,o),L(l,m),D(h,m,null),L(m,g),D(P,m,null),L(m,k),j&&j.m(m,null),L(l,N),L(l,c),D($,c,null),L(c,b),D(V,c,null),L(c,J),M&&M.m(c,null),L(l,Z),L(l,U),D(H,U,null),L(U,x),D(G,U,null),L(U,pe),F&&F.m(U,null),L(e,S),A&&A.m(e,null),te=!0,Q||(re=rt(f[14].call(null,e)),Q=!0)},p(d,B){const y={};B[1]&32&&(y.$$scope={dirty:B,ctx:d}),n.$set(y);const le={};B[0]&3|B[1]&32&&(le.$$scope={dirty:B,ctx:d}),a.$set(le),d[10].start_date?O?O.p(d,B):(O=He(d),O.c(),O.m(t,null)):O&&(O.d(1),O=null);const ne={};B[1]&32&&(ne.$$scope={dirty:B,ctx:d}),h.$set(ne);const se={};B[0]&260|B[1]&32&&(se.$$scope={dirty:B,ctx:d}),P.$set(se),d[10].end_date?j?j.p(d,B):(j=Ye(d),j.c(),j.m(m,null)):j&&(j.d(1),j=null);const ae={};B[1]&32&&(ae.$$scope={dirty:B,ctx:d}),$.$set(ae);const Be={};B[0]&8|B[1]&32&&(Be.$$scope={dirty:B,ctx:d}),V.$set(Be),d[10].type?M?M.p(d,B):(M=We(d),M.c(),M.m(c,null)):M&&(M.d(1),M=null);const Re={};B[1]&32&&(Re.$$scope={dirty:B,ctx:d}),H.$set(Re);const Ie={};!fe&&B[0]&16&&(fe=!0,Ie.value=d[4],ot(()=>fe=!1)),G.$set(Ie),d[10].cost_per_unit?F?F.p(d,B):(F=qe(d),F.c(),F.m(U,null)):F&&(F.d(1),F=null),d[5].length>0?A?(A.p(d,B),B[0]&32&&i(A,1)):(A=Je(d),A.c(),i(A,1),A.m(e,null)):A&&(ie(),p(A,1,1,()=>{A=null}),ue())},i(d){te||(i(n.$$.fragment,d),i(a.$$.fragment,d),i(h.$$.fragment,d),i(P.$$.fragment,d),i($.$$.fragment,d),i(V.$$.fragment,d),i(H.$$.fragment,d),i(G.$$.fragment,d),i(A),te=!0)},o(d){p(n.$$.fragment,d),p(a.$$.fragment,d),p(h.$$.fragment,d),p(P.$$.fragment,d),p($.$$.fragment,d),p(V.$$.fragment,d),p(H.$$.fragment,d),p(G.$$.fragment,d),p(A),te=!1},d(d){d&&u(e),C(n),C(a),O&&O.d(),C(h),C(P),j&&j.d(),C($),C(V),M&&M.d(),C(H),C(G),F&&F.d(),A&&A.d(),Q=!1,re()}}}function Ct(f){let e;return{c(){e=R("Start Date")},l(l){e=I(l,"Start Date")},m(l,t){_(l,e,t)},d(l){l&&u(e)}}}function kt(f){let e=(f[1]?new Date(f[1]).toLocaleDateString():"")+"",l;return{c(){l=R(e)},l(t){l=I(t,e)},m(t,n){_(t,l,n)},p(t,n){n[0]&2&&e!==(e=(t[1]?new Date(t[1]).toLocaleDateString():"")+"")&&z(l,e)},d(t){t&&u(l)}}}function Et(f){let e,l;return e=new Te({props:{placeholder:"Select start date",$$slots:{default:[kt]},$$scope:{ctx:f}}}),{c(){v(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,n){D(e,t,n),l=!0},p(t,n){const s={};n[0]&2|n[1]&32&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(i(e.$$.fragment,t),l=!0)},o(t){p(e.$$.fragment,t),l=!1},d(t){C(e,t)}}}function Tt(f){let e=new Date(f[31]).toLocaleDateString()+"",l,t;return{c(){l=R(e),t=E()},l(n){l=I(n,e),t=T(n)},m(n,s){_(n,l,s),_(n,t,s)},p(n,s){s[0]&1&&e!==(e=new Date(n[31]).toLocaleDateString()+"")&&z(l,e)},d(n){n&&(u(l),u(t))}}}function Fe(f){let e,l;return e=new Se({props:{value:f[31],$$slots:{default:[Tt]},$$scope:{ctx:f}}}),{c(){v(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,n){D(e,t,n),l=!0},p(t,n){const s={};n[0]&1&&(s.value=t[31]),n[0]&1|n[1]&32&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(i(e.$$.fragment,t),l=!0)},o(t){p(e.$$.fragment,t),l=!1},d(t){C(e,t)}}}function St(f){let e,l,t=oe(f[0].availableReadingDates),n=[];for(let a=0;a<t.length;a+=1)n[a]=Fe(je(f,t,a));const s=a=>p(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=K()},l(a){for(let r=0;r<n.length;r+=1)n[r].l(a);e=K()},m(a,r){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(a,r);_(a,e,r),l=!0},p(a,r){if(r[0]&1){t=oe(a[0].availableReadingDates);let o;for(o=0;o<t.length;o+=1){const m=je(a,t,o);n[o]?(n[o].p(m,r),i(n[o],1)):(n[o]=Fe(m),n[o].c(),i(n[o],1),n[o].m(e.parentNode,e))}for(ie(),o=t.length;o<n.length;o+=1)s(o);ue()}},i(a){if(!l){for(let r=0;r<t.length;r+=1)i(n[r]);l=!0}},o(a){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)p(n[r]);l=!1},d(a){a&&u(e),be(n,a)}}}function Bt(f){let e,l,t,n;return e=new ke({props:{$$slots:{default:[Et]},$$scope:{ctx:f}}}),t=new Ee({props:{$$slots:{default:[St]},$$scope:{ctx:f}}}),{c(){v(e.$$.fragment),l=E(),v(t.$$.fragment)},l(s){w(e.$$.fragment,s),l=T(s),w(t.$$.fragment,s)},m(s,a){D(e,s,a),_(s,l,a),D(t,s,a),n=!0},p(s,a){const r={};a[0]&2|a[1]&32&&(r.$$scope={dirty:a,ctx:s}),e.$set(r);const o={};a[0]&1|a[1]&32&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){n||(i(e.$$.fragment,s),i(t.$$.fragment,s),n=!0)},o(s){p(e.$$.fragment,s),p(t.$$.fragment,s),n=!1},d(s){s&&u(l),C(e,s),C(t,s)}}}function He(f){let e,l=f[10].start_date+"",t;return{c(){e=W("span"),t=R(l),this.h()},l(n){e=q(n,"SPAN",{class:!0});var s=X(e);t=I(s,l),s.forEach(u),this.h()},h(){ee(e,"class","text-destructive text-sm")},m(n,s){_(n,e,s),L(e,t)},p(n,s){s[0]&1024&&l!==(l=n[10].start_date+"")&&z(t,l)},d(n){n&&u(e)}}}function Rt(f){let e;return{c(){e=R("End Date")},l(l){e=I(l,"End Date")},m(l,t){_(l,e,t)},d(l){l&&u(e)}}}function It(f){let e=(f[2]?new Date(f[2]).toLocaleDateString():"")+"",l;return{c(){l=R(e)},l(t){l=I(t,e)},m(t,n){_(t,l,n)},p(t,n){n[0]&4&&e!==(e=(t[2]?new Date(t[2]).toLocaleDateString():"")+"")&&z(l,e)},d(t){t&&u(l)}}}function Nt(f){let e,l;return e=new Te({props:{placeholder:"Select end date",$$slots:{default:[It]},$$scope:{ctx:f}}}),{c(){v(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,n){D(e,t,n),l=!0},p(t,n){const s={};n[0]&4|n[1]&32&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(i(e.$$.fragment,t),l=!0)},o(t){p(e.$$.fragment,t),l=!1},d(t){C(e,t)}}}function Pt(f){let e=new Date(f[31]).toLocaleDateString()+"",l,t;return{c(){l=R(e),t=E()},l(n){l=I(n,e),t=T(n)},m(n,s){_(n,l,s),_(n,t,s)},p(n,s){s[0]&256&&e!==(e=new Date(n[31]).toLocaleDateString()+"")&&z(l,e)},d(n){n&&(u(l),u(t))}}}function Ge(f){let e,l;return e=new Se({props:{value:f[31],$$slots:{default:[Pt]},$$scope:{ctx:f}}}),{c(){v(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,n){D(e,t,n),l=!0},p(t,n){const s={};n[0]&256&&(s.value=t[31]),n[0]&256|n[1]&32&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(i(e.$$.fragment,t),l=!0)},o(t){p(e.$$.fragment,t),l=!1},d(t){C(e,t)}}}function Lt(f){let e,l,t=oe(f[8]),n=[];for(let a=0;a<t.length;a+=1)n[a]=Ge(Oe(f,t,a));const s=a=>p(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=K()},l(a){for(let r=0;r<n.length;r+=1)n[r].l(a);e=K()},m(a,r){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(a,r);_(a,e,r),l=!0},p(a,r){if(r[0]&256){t=oe(a[8]);let o;for(o=0;o<t.length;o+=1){const m=Oe(a,t,o);n[o]?(n[o].p(m,r),i(n[o],1)):(n[o]=Ge(m),n[o].c(),i(n[o],1),n[o].m(e.parentNode,e))}for(ie(),o=t.length;o<n.length;o+=1)s(o);ue()}},i(a){if(!l){for(let r=0;r<t.length;r+=1)i(n[r]);l=!0}},o(a){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)p(n[r]);l=!1},d(a){a&&u(e),be(n,a)}}}function Vt(f){let e,l,t,n;return e=new ke({props:{$$slots:{default:[Nt]},$$scope:{ctx:f}}}),t=new Ee({props:{$$slots:{default:[Lt]},$$scope:{ctx:f}}}),{c(){v(e.$$.fragment),l=E(),v(t.$$.fragment)},l(s){w(e.$$.fragment,s),l=T(s),w(t.$$.fragment,s)},m(s,a){D(e,s,a),_(s,l,a),D(t,s,a),n=!0},p(s,a){const r={};a[0]&4|a[1]&32&&(r.$$scope={dirty:a,ctx:s}),e.$set(r);const o={};a[0]&256|a[1]&32&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){n||(i(e.$$.fragment,s),i(t.$$.fragment,s),n=!0)},o(s){p(e.$$.fragment,s),p(t.$$.fragment,s),n=!1},d(s){s&&u(l),C(e,s),C(t,s)}}}function Ye(f){let e,l=f[10].end_date+"",t;return{c(){e=W("span"),t=R(l),this.h()},l(n){e=q(n,"SPAN",{class:!0});var s=X(e);t=I(s,l),s.forEach(u),this.h()},h(){ee(e,"class","text-destructive text-sm")},m(n,s){_(n,e,s),L(e,t)},p(n,s){s[0]&1024&&l!==(l=n[10].end_date+"")&&z(t,l)},d(n){n&&u(e)}}}function At(f){let e;return{c(){e=R("Utility Type")},l(l){e=I(l,"Utility Type")},m(l,t){_(l,e,t)},d(l){l&&u(e)}}}function Ot(f){let e=(f[3]||"")+"",l;return{c(){l=R(e)},l(t){l=I(t,e)},m(t,n){_(t,l,n)},p(t,n){n[0]&8&&e!==(e=(t[3]||"")+"")&&z(l,e)},d(t){t&&u(l)}}}function jt(f){let e,l;return e=new Te({props:{placeholder:"Select utility type",$$slots:{default:[Ot]},$$scope:{ctx:f}}}),{c(){v(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,n){D(e,t,n),l=!0},p(t,n){const s={};n[0]&8|n[1]&32&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(i(e.$$.fragment,t),l=!0)},o(t){p(e.$$.fragment,t),l=!1},d(t){C(e,t)}}}function Mt(f){let e=f[28]+"",l;return{c(){l=R(e)},l(t){l=I(t,e)},m(t,n){_(t,l,n)},p:$t,d(t){t&&u(l)}}}function ze(f){let e,l;return e=new Se({props:{value:f[27],$$slots:{default:[Mt]},$$scope:{ctx:f}}}),{c(){v(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,n){D(e,t,n),l=!0},p(t,n){const s={};n[1]&32&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(i(e.$$.fragment,t),l=!0)},o(t){p(e.$$.fragment,t),l=!1},d(t){C(e,t)}}}function Ut(f){let e,l,t=oe(Object.entries(Ce.enum)),n=[];for(let a=0;a<t.length;a+=1)n[a]=ze(Ae(f,t,a));const s=a=>p(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=K()},l(a){for(let r=0;r<n.length;r+=1)n[r].l(a);e=K()},m(a,r){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(a,r);_(a,e,r),l=!0},p(a,r){if(r&0){t=oe(Object.entries(Ce.enum));let o;for(o=0;o<t.length;o+=1){const m=Ae(a,t,o);n[o]?(n[o].p(m,r),i(n[o],1)):(n[o]=ze(m),n[o].c(),i(n[o],1),n[o].m(e.parentNode,e))}for(ie(),o=t.length;o<n.length;o+=1)s(o);ue()}},i(a){if(!l){for(let r=0;r<t.length;r+=1)i(n[r]);l=!0}},o(a){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)p(n[r]);l=!1},d(a){a&&u(e),be(n,a)}}}function Ft(f){let e,l,t,n;return e=new ke({props:{$$slots:{default:[jt]},$$scope:{ctx:f}}}),t=new Ee({props:{$$slots:{default:[Ut]},$$scope:{ctx:f}}}),{c(){v(e.$$.fragment),l=E(),v(t.$$.fragment)},l(s){w(e.$$.fragment,s),l=T(s),w(t.$$.fragment,s)},m(s,a){D(e,s,a),_(s,l,a),D(t,s,a),n=!0},p(s,a){const r={};a[0]&8|a[1]&32&&(r.$$scope={dirty:a,ctx:s}),e.$set(r);const o={};a[1]&32&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){n||(i(e.$$.fragment,s),i(t.$$.fragment,s),n=!0)},o(s){p(e.$$.fragment,s),p(t.$$.fragment,s),n=!1},d(s){s&&u(l),C(e,s),C(t,s)}}}function We(f){let e,l=f[10].type+"",t;return{c(){e=W("span"),t=R(l),this.h()},l(n){e=q(n,"SPAN",{class:!0});var s=X(e);t=I(s,l),s.forEach(u),this.h()},h(){ee(e,"class","text-destructive text-sm")},m(n,s){_(n,e,s),L(e,t)},p(n,s){s[0]&1024&&l!==(l=n[10].type+"")&&z(t,l)},d(n){n&&u(e)}}}function Ht(f){let e;return{c(){e=R("Cost Per Unit")},l(l){e=I(l,"Cost Per Unit")},m(l,t){_(l,e,t)},d(l){l&&u(e)}}}function qe(f){let e,l=f[10].cost_per_unit+"",t;return{c(){e=W("span"),t=R(l),this.h()},l(n){e=q(n,"SPAN",{class:!0});var s=X(e);t=I(s,l),s.forEach(u),this.h()},h(){ee(e,"class","text-destructive text-sm")},m(n,s){_(n,e,s),L(e,t)},p(n,s){s[0]&1024&&l!==(l=n[10].cost_per_unit+"")&&z(t,l)},d(n){n&&u(e)}}}function Je(f){let e,l,t,n;e=new _t({props:{$$slots:{default:[rl]},$$scope:{ctx:f}}});let s=f[7]&&Qe(f);return{c(){v(e.$$.fragment),l=E(),s&&s.c(),t=K()},l(a){w(e.$$.fragment,a),l=T(a),s&&s.l(a),t=K()},m(a,r){D(e,a,r),_(a,l,r),s&&s.m(a,r),_(a,t,r),n=!0},p(a,r){const o={};r[0]&32|r[1]&32&&(o.$$scope={dirty:r,ctx:a}),e.$set(o),a[7]?s?(s.p(a,r),r[0]&128&&i(s,1)):(s=Qe(a),s.c(),i(s,1),s.m(t.parentNode,t)):s&&(ie(),p(s,1,1,()=>{s=null}),ue())},i(a){n||(i(e.$$.fragment,a),i(s),n=!0)},o(a){p(e.$$.fragment,a),p(s),n=!1},d(a){a&&(u(l),u(t)),C(e,a),s&&s.d(a)}}}function Gt(f){let e;return{c(){e=R("Meter Billings")},l(l){e=I(l,"Meter Billings")},m(l,t){_(l,e,t)},d(l){l&&u(e)}}}function Yt(f){let e;return{c(){e=R("Meter")},l(l){e=I(l,"Meter")},m(l,t){_(l,e,t)},d(l){l&&u(e)}}}function zt(f){let e;return{c(){e=R("Start Reading")},l(l){e=I(l,"Start Reading")},m(l,t){_(l,e,t)},d(l){l&&u(e)}}}function Wt(f){let e;return{c(){e=R("End Reading")},l(l){e=I(l,"End Reading")},m(l,t){_(l,e,t)},d(l){l&&u(e)}}}function qt(f){let e;return{c(){e=R("Consumption")},l(l){e=I(l,"Consumption")},m(l,t){_(l,e,t)},d(l){l&&u(e)}}}function Jt(f){let e;return{c(){e=R("Total Cost")},l(l){e=I(l,"Total Cost")},m(l,t){_(l,e,t)},d(l){l&&u(e)}}}function Kt(f){let e;return{c(){e=R("Tenant Count")},l(l){e=I(l,"Tenant Count")},m(l,t){_(l,e,t)},d(l){l&&u(e)}}}function Qt(f){let e;return{c(){e=R("Cost Per Tenant")},l(l){e=I(l,"Cost Per Tenant")},m(l,t){_(l,e,t)},d(l){l&&u(e)}}}function Xt(f){let e,l,t,n,s,a,r,o,m,h,g,P,k,N;return e=new $e({props:{$$slots:{default:[Yt]},$$scope:{ctx:f}}}),t=new $e({props:{$$slots:{default:[zt]},$$scope:{ctx:f}}}),s=new $e({props:{$$slots:{default:[Wt]},$$scope:{ctx:f}}}),r=new $e({props:{$$slots:{default:[qt]},$$scope:{ctx:f}}}),m=new $e({props:{$$slots:{default:[Jt]},$$scope:{ctx:f}}}),g=new $e({props:{$$slots:{default:[Kt]},$$scope:{ctx:f}}}),k=new $e({props:{$$slots:{default:[Qt]},$$scope:{ctx:f}}}),{c(){v(e.$$.fragment),l=E(),v(t.$$.fragment),n=E(),v(s.$$.fragment),a=E(),v(r.$$.fragment),o=E(),v(m.$$.fragment),h=E(),v(g.$$.fragment),P=E(),v(k.$$.fragment)},l(c){w(e.$$.fragment,c),l=T(c),w(t.$$.fragment,c),n=T(c),w(s.$$.fragment,c),a=T(c),w(r.$$.fragment,c),o=T(c),w(m.$$.fragment,c),h=T(c),w(g.$$.fragment,c),P=T(c),w(k.$$.fragment,c)},m(c,$){D(e,c,$),_(c,l,$),D(t,c,$),_(c,n,$),D(s,c,$),_(c,a,$),D(r,c,$),_(c,o,$),D(m,c,$),_(c,h,$),D(g,c,$),_(c,P,$),D(k,c,$),N=!0},p(c,$){const b={};$[1]&32&&(b.$$scope={dirty:$,ctx:c}),e.$set(b);const V={};$[1]&32&&(V.$$scope={dirty:$,ctx:c}),t.$set(V);const J={};$[1]&32&&(J.$$scope={dirty:$,ctx:c}),s.$set(J);const Z={};$[1]&32&&(Z.$$scope={dirty:$,ctx:c}),r.$set(Z);const U={};$[1]&32&&(U.$$scope={dirty:$,ctx:c}),m.$set(U);const H={};$[1]&32&&(H.$$scope={dirty:$,ctx:c}),g.$set(H);const x={};$[1]&32&&(x.$$scope={dirty:$,ctx:c}),k.$set(x)},i(c){N||(i(e.$$.fragment,c),i(t.$$.fragment,c),i(s.$$.fragment,c),i(r.$$.fragment,c),i(m.$$.fragment,c),i(g.$$.fragment,c),i(k.$$.fragment,c),N=!0)},o(c){p(e.$$.fragment,c),p(t.$$.fragment,c),p(s.$$.fragment,c),p(r.$$.fragment,c),p(m.$$.fragment,c),p(g.$$.fragment,c),p(k.$$.fragment,c),N=!1},d(c){c&&(u(l),u(n),u(a),u(o),u(h),u(P)),C(e,c),C(t,c),C(s,c),C(r,c),C(m,c),C(g,c),C(k,c)}}}function Zt(f){let e,l;return e=new et({props:{$$slots:{default:[Xt]},$$scope:{ctx:f}}}),{c(){v(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,n){D(e,t,n),l=!0},p(t,n){const s={};n[1]&32&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(i(e.$$.fragment,t),l=!0)},o(t){p(e.$$.fragment,t),l=!1},d(t){C(e,t)}}}function xt(f){let e=f[24].meter_name+"",l;return{c(){l=R(e)},l(t){l=I(t,e)},m(t,n){_(t,l,n)},p(t,n){n[0]&32&&e!==(e=t[24].meter_name+"")&&z(l,e)},d(t){t&&u(l)}}}function yt(f){let e=f[24].start_reading+"",l;return{c(){l=R(e)},l(t){l=I(t,e)},m(t,n){_(t,l,n)},p(t,n){n[0]&32&&e!==(e=t[24].start_reading+"")&&z(l,e)},d(t){t&&u(l)}}}function el(f){let e=f[24].end_reading+"",l;return{c(){l=R(e)},l(t){l=I(t,e)},m(t,n){_(t,l,n)},p(t,n){n[0]&32&&e!==(e=t[24].end_reading+"")&&z(l,e)},d(t){t&&u(l)}}}function tl(f){let e=f[24].consumption+"",l;return{c(){l=R(e)},l(t){l=I(t,e)},m(t,n){_(t,l,n)},p(t,n){n[0]&32&&e!==(e=t[24].consumption+"")&&z(l,e)},d(t){t&&u(l)}}}function ll(f){let e=he(f[24].total_cost)+"",l;return{c(){l=R(e)},l(t){l=I(t,e)},m(t,n){_(t,l,n)},p(t,n){n[0]&32&&e!==(e=he(t[24].total_cost)+"")&&z(l,e)},d(t){t&&u(l)}}}function nl(f){let e=f[24].tenant_count+"",l;return{c(){l=R(e)},l(t){l=I(t,e)},m(t,n){_(t,l,n)},p(t,n){n[0]&32&&e!==(e=t[24].tenant_count+"")&&z(l,e)},d(t){t&&u(l)}}}function sl(f){let e=he(f[24].per_tenant_cost)+"",l;return{c(){l=R(e)},l(t){l=I(t,e)},m(t,n){_(t,l,n)},p(t,n){n[0]&32&&e!==(e=he(t[24].per_tenant_cost)+"")&&z(l,e)},d(t){t&&u(l)}}}function al(f){let e,l,t,n,s,a,r,o,m,h,g,P,k,N,c;return e=new ce({props:{$$slots:{default:[xt]},$$scope:{ctx:f}}}),t=new ce({props:{$$slots:{default:[yt]},$$scope:{ctx:f}}}),s=new ce({props:{$$slots:{default:[el]},$$scope:{ctx:f}}}),r=new ce({props:{$$slots:{default:[tl]},$$scope:{ctx:f}}}),m=new ce({props:{$$slots:{default:[ll]},$$scope:{ctx:f}}}),g=new ce({props:{$$slots:{default:[nl]},$$scope:{ctx:f}}}),k=new ce({props:{$$slots:{default:[sl]},$$scope:{ctx:f}}}),{c(){v(e.$$.fragment),l=E(),v(t.$$.fragment),n=E(),v(s.$$.fragment),a=E(),v(r.$$.fragment),o=E(),v(m.$$.fragment),h=E(),v(g.$$.fragment),P=E(),v(k.$$.fragment),N=E()},l($){w(e.$$.fragment,$),l=T($),w(t.$$.fragment,$),n=T($),w(s.$$.fragment,$),a=T($),w(r.$$.fragment,$),o=T($),w(m.$$.fragment,$),h=T($),w(g.$$.fragment,$),P=T($),w(k.$$.fragment,$),N=T($)},m($,b){D(e,$,b),_($,l,b),D(t,$,b),_($,n,b),D(s,$,b),_($,a,b),D(r,$,b),_($,o,b),D(m,$,b),_($,h,b),D(g,$,b),_($,P,b),D(k,$,b),_($,N,b),c=!0},p($,b){const V={};b[0]&32|b[1]&32&&(V.$$scope={dirty:b,ctx:$}),e.$set(V);const J={};b[0]&32|b[1]&32&&(J.$$scope={dirty:b,ctx:$}),t.$set(J);const Z={};b[0]&32|b[1]&32&&(Z.$$scope={dirty:b,ctx:$}),s.$set(Z);const U={};b[0]&32|b[1]&32&&(U.$$scope={dirty:b,ctx:$}),r.$set(U);const H={};b[0]&32|b[1]&32&&(H.$$scope={dirty:b,ctx:$}),m.$set(H);const x={};b[0]&32|b[1]&32&&(x.$$scope={dirty:b,ctx:$}),g.$set(x);const G={};b[0]&32|b[1]&32&&(G.$$scope={dirty:b,ctx:$}),k.$set(G)},i($){c||(i(e.$$.fragment,$),i(t.$$.fragment,$),i(s.$$.fragment,$),i(r.$$.fragment,$),i(m.$$.fragment,$),i(g.$$.fragment,$),i(k.$$.fragment,$),c=!0)},o($){p(e.$$.fragment,$),p(t.$$.fragment,$),p(s.$$.fragment,$),p(r.$$.fragment,$),p(m.$$.fragment,$),p(g.$$.fragment,$),p(k.$$.fragment,$),c=!1},d($){$&&(u(l),u(n),u(a),u(o),u(h),u(P),u(N)),C(e,$),C(t,$),C(s,$),C(r,$),C(m,$),C(g,$),C(k,$)}}}function Ke(f){let e,l;return e=new et({props:{$$slots:{default:[al]},$$scope:{ctx:f}}}),{c(){v(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,n){D(e,t,n),l=!0},p(t,n){const s={};n[0]&32|n[1]&32&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(i(e.$$.fragment,t),l=!0)},o(t){p(e.$$.fragment,t),l=!1},d(t){C(e,t)}}}function fl(f){let e,l,t=oe(f[5]),n=[];for(let a=0;a<t.length;a+=1)n[a]=Ke(Ve(f,t,a));const s=a=>p(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=K()},l(a){for(let r=0;r<n.length;r+=1)n[r].l(a);e=K()},m(a,r){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(a,r);_(a,e,r),l=!0},p(a,r){if(r[0]&32){t=oe(a[5]);let o;for(o=0;o<t.length;o+=1){const m=Ve(a,t,o);n[o]?(n[o].p(m,r),i(n[o],1)):(n[o]=Ke(m),n[o].c(),i(n[o],1),n[o].m(e.parentNode,e))}for(ie(),o=t.length;o<n.length;o+=1)s(o);ue()}},i(a){if(!l){for(let r=0;r<t.length;r+=1)i(n[r]);l=!0}},o(a){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)p(n[r]);l=!1},d(a){a&&u(e),be(n,a)}}}function rl(f){let e,l,t,n,s,a;return e=new vt({props:{$$slots:{default:[Gt]},$$scope:{ctx:f}}}),t=new mt({props:{$$slots:{default:[Zt]},$$scope:{ctx:f}}}),s=new pt({props:{$$slots:{default:[fl]},$$scope:{ctx:f}}}),{c(){v(e.$$.fragment),l=E(),v(t.$$.fragment),n=E(),v(s.$$.fragment)},l(r){w(e.$$.fragment,r),l=T(r),w(t.$$.fragment,r),n=T(r),w(s.$$.fragment,r)},m(r,o){D(e,r,o),_(r,l,o),D(t,r,o),_(r,n,o),D(s,r,o),a=!0},p(r,o){const m={};o[1]&32&&(m.$$scope={dirty:o,ctx:r}),e.$set(m);const h={};o[1]&32&&(h.$$scope={dirty:o,ctx:r}),t.$set(h);const g={};o[0]&32|o[1]&32&&(g.$$scope={dirty:o,ctx:r}),s.$set(g)},i(r){a||(i(e.$$.fragment,r),i(t.$$.fragment,r),i(s.$$.fragment,r),a=!0)},o(r){p(e.$$.fragment,r),p(t.$$.fragment,r),p(s.$$.fragment,r),a=!1},d(r){r&&(u(l),u(n)),C(e,r),C(t,r),C(s,r)}}}function Qe(f){let e,l;return e=new dt({props:{type:"submit",disabled:f[11],$$slots:{default:[cl]},$$scope:{ctx:f}}}),{c(){v(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,n){D(e,t,n),l=!0},p(t,n){const s={};n[0]&2048&&(s.disabled=t[11]),n[0]&2048|n[1]&32&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(i(e.$$.fragment,t),l=!0)},o(t){p(e.$$.fragment,t),l=!1},d(t){C(e,t)}}}function ol(f){let e;return{c(){e=R("Create Billings")},l(l){e=I(l,"Create Billings")},m(l,t){_(l,e,t)},d(l){l&&u(e)}}}function $l(f){let e;return{c(){e=R("Creating Billings...")},l(l){e=I(l,"Creating Billings...")},m(l,t){_(l,e,t)},d(l){l&&u(e)}}}function cl(f){let e;function l(s,a){return s[11]?$l:ol}let t=l(f),n=t(f);return{c(){n.c(),e=K()},l(s){n.l(s),e=K()},m(s,a){n.m(s,a),_(s,e,a)},p(s,a){t!==(t=l(s))&&(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&u(e),n.d(s)}}}function ul(f){let e,l,t,n="Utility Billings",s,a,r,o,m,h=!f[6]&&Me(),g=f[6]&&Ue(f),P=!1;return{c(){e=W("div"),l=W("div"),t=W("h1"),t.textContent=n,s=E(),h&&h.c(),a=E(),g&&g.c(),r=E(),o=K(),this.h()},l(k){e=q(k,"DIV",{class:!0});var N=X(e);l=q(N,"DIV",{class:!0});var c=X(l);t=q(c,"H1",{class:!0,"data-svelte-h":!0}),Ze(t)!=="svelte-y5gc41"&&(t.textContent=n),s=T(c),h&&h.l(c),c.forEach(u),a=T(N),g&&g.l(N),N.forEach(u),r=T(k),o=K(),this.h()},h(){ee(t,"class","text-3xl font-bold"),ee(l,"class","flex justify-between items-center mb-6"),ee(e,"class","container mx-auto py-4")},m(k,N){_(k,e,N),L(e,l),L(l,t),L(l,s),h&&h.m(l,null),L(e,a),g&&g.m(e,null),_(k,r,N),_(k,o,N),m=!0},p(k,N){k[6]?h&&(h.d(1),h=null):h||(h=Me(),h.c(),h.m(l,null)),k[6]?g?(g.p(k,N),N[0]&64&&i(g,1)):(g=Ue(k),g.c(),i(g,1),g.m(e,null)):g&&(ie(),p(g,1,1,()=>{g=null}),ue())},i(k){m||(i(g),i(P),m=!0)},o(k){p(g),p(P),m=!1},d(k){k&&(u(e),u(r),u(o)),h&&h.d(),g&&g.d()}}}function il(f,e,l){let t,n,s,a,r,o,m,{data:h}=e;const{form:g,errors:P,enhance:k,delayed:N}=ut(h.form);ve(f,g,S=>l(9,r=S)),ve(f,P,S=>l(10,o=S)),ve(f,N,S=>l(11,m=S));let c=null,$=null,b=null,V=0,J=[];function Z(S){l(1,c=S.detail),fe()}function U(S){l(2,$=S.detail),fe()}function H(S){l(3,b=S.detail),fe()}function x(S){const te=S.target;l(4,V=parseFloat(te.value)||0),fe()}function G(S,te){const Q=h.readings.find(re=>re.meter_id===S&&re.reading_date===te);return(Q==null?void 0:Q.reading_value)||0}function fe(){if(!c||!$||!b||V<=0){l(5,J=[]);return}const S=new Date(c),te=new Date($);l(5,J=t.map(Q=>{const re=G(Q.id,c),O=G(Q.id,$),j=O-re,M=j*V,ge=Q.rental_unit[0],_e=ge&&h.rental_unitTenantCounts[ge.id]||0,F=_e>0?M/_e:0;return{meter_id:Q.id,meter_name:Q.name,start_reading:re,end_reading:O,consumption:j,total_cost:M,tenant_count:_e,per_tenant_cost:F}})),me(g,r.start_date=S,r),me(g,r.end_date=te,r),me(g,r.type=b,r),me(g,r.cost_per_unit=V,r),me(g,r.meter_billings=J,r),me(g,r.org_id=h.org_id,r)}function pe(S){V=S,l(4,V)}return f.$$set=S=>{"data"in S&&l(0,h=S.data)},f.$$.update=()=>{f.$$.dirty[0]&1&&(t=h.meters.filter(S=>(S==null?void 0:S.id)!=null)),f.$$.dirty[0]&3&&l(8,n=h.availableReadingDates.filter(S=>c?new Date(S.reading_date)>new Date(c):!0)),f.$$.dirty[0]&1&&l(7,s=["super_admin","property_admin","accountant"].includes(h.role)),f.$$.dirty[0]&1&&l(6,a=["super_admin","property_admin","accountant","manager","frontdesk"].includes(h.role))},[h,c,$,b,V,J,a,s,n,r,o,m,g,P,k,N,Z,U,H,x,pe]}class Sl extends xe{constructor(e){super(),ye(this,e,il,ul,Xe,{data:0},null,[-1,-1])}}export{Sl as component};
