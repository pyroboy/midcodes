import{s as rt,e as X,i as v,d as u,K as At,C as mt,D as dl,E as hl,a as P,f as L,g as F,W as Pt,F as vl,G as bl,H as wl,M as Je,b as N,j as I,k as B,l as b,r as El,O as Xe,S as kl,c as Ze,V as Ie,t as R,h as C,m as K,n as pe,z as Ge,p as ze}from"../chunks/scheduler.Bl--k1HL.js";import{S as pt,i as gt,t as _,b as h,f as xe,c as E,a as k,m as S,g as we,e as Ee,d as T}from"../chunks/index.DR8de1tj.js";import{e as ve,u as Sl,o as Tl}from"../chunks/each.En5UpT5R.js";import{C as Nl}from"../chunks/card.Di3vQaZg.js";import{C as Il}from"../chunks/card-content.h6m9fR2F.js";import{C as Rl,a as Cl}from"../chunks/card-title.DkwblUMR.js";import{A as Al}from"../chunks/index.VtuAJN81.js";import{B as Lt}from"../chunks/index.CvjD20Hh.js";import"../chunks/index.D4E8IgGl.js";import{I as et}from"../chunks/input.CkoDOh7A.js";import{L as he}from"../chunks/label.BX-RGDB2.js";import"../chunks/entry.B5jMEGBp.js";import{R as Ue,S as Me,a as ye,V as Ye,b as ce}from"../chunks/index.BkiOxIzK.js";import{z as J}from"../chunks/index.D4CdqmV7.js";import{s as Pl}from"../chunks/formData.IVesd0ZS.js";import"../chunks/string.DBeRn4Bt.js";import{T as Ll}from"../chunks/textarea.DlhKioee.js";import{B as dt}from"../chunks/button.BqeWxtk_.js";import{g as Vl}from"../chunks/spread.CgU5AtxT.js";import{c as Vt}from"../chunks/utils.D33FkIxg.js";import{L as Dl}from"../chunks/loader-circle.B7yZBgP4.js";function _t(a){let e,l,t;const n=a[4].default,r=hl(n,a,a[3],null);let s=[{class:l=Vt("mb-1 font-medium leading-none tracking-tight",a[0])},a[2]],f={};for(let o=0;o<s.length;o+=1)f=mt(f,s[o]);return{c(){e=P(a[1]),r&&r.c(),this.h()},l(o){e=L(o,(a[1]||"null").toUpperCase(),{class:!0});var i=F(e);r&&r.l(i),i.forEach(u),this.h()},h(){Pt(a[1])(e,f)},m(o,i){v(o,e,i),r&&r.m(e,null),t=!0},p(o,i){r&&r.p&&(!t||i&8)&&vl(r,n,o,o[3],t?wl(n,o[3],i,null):bl(o[3]),null),Pt(o[1])(e,f=Vl(s,[(!t||i&1&&l!==(l=Vt("mb-1 font-medium leading-none tracking-tight",o[0])))&&{class:l},i&4&&o[2]]))},i(o){t||(_(r,o),t=!0)},o(o){h(r,o),t=!1},d(o){o&&u(e),r&&r.d(o)}}}function Ol(a){let e=a[1],l,t,n=a[1]&&_t(a);return{c(){n&&n.c(),l=X()},l(r){n&&n.l(r),l=X()},m(r,s){n&&n.m(r,s),v(r,l,s),t=!0},p(r,[s]){r[1]?e?rt(e,r[1])?(n.d(1),n=_t(r),e=r[1],n.c(),n.m(l.parentNode,l)):n.p(r,s):(n=_t(r),e=r[1],n.c(),n.m(l.parentNode,l)):e&&(n.d(1),n=null,e=r[1])},i(r){t||(_(n,r),t=!0)},o(r){h(n,r),t=!1},d(r){r&&u(l),n&&n.d(r)}}}function Fl(a,e,l){const t=["class","level"];let n=At(e,t),{$$slots:r={},$$scope:s}=e,{class:f=void 0}=e,{level:o="h5"}=e;return a.$$set=i=>{e=mt(mt({},e),dl(i)),l(2,n=At(e,t)),"class"in i&&l(0,f=i.class),"level"in i&&l(1,o=i.level),"$$scope"in i&&l(3,s=i.$$scope)},[f,o,n,s,r]}class Ul extends pt{constructor(e){super(),gt(this,e,Fl,Ol,rt,{class:0,level:1})}}const tt=J.enum(["ELECTRICITY","WATER","INTERNET"]),lt=J.enum(["ACTIVE","INACTIVE","MAINTENANCE"]),ul=J.enum(["PROPERTY","FLOOR","RENTAL_UNIT"]),$l=a=>{const{location_type:e,property_id:l,floor_id:t,rental_unit_id:n}=a;switch(e){case"PROPERTY":return l!=null&&t==null&&n==null;case"FLOOR":return t!=null&&l==null&&n==null;case"RENTAL_UNIT":return n!=null&&l==null&&t==null;default:return!1}},cl=J.object({id:J.number().optional(),name:J.string().min(1,"Name is required").max(255,"Name is too long"),location_type:ul,property_id:J.number().nullable(),floor_id:J.number().nullable(),rental_unit_id:J.number().nullable(),type:tt,is_active:J.boolean().default(!0),status:lt.default("ACTIVE"),initial_reading:J.number().min(0,"Initial reading must be 0 or greater").default(0),unit_rate:J.number().min(0,"Unit rate must be 0 or greater").default(0),notes:J.string().nullable().optional()});cl.extend({created_at:J.date().optional()}).refine($l,{message:"Only one location ID should be set based on the location type",path:["location_type"]});cl.refine($l,{message:"Only one location ID should be set based on the location type",path:["location_type"]});J.object({location_type:ul.optional(),property_id:J.number().optional(),floor_id:J.number().optional(),rental_unit_id:J.number().optional(),status:lt.optional(),type:tt.optional(),page:J.number().min(1).default(1),limit:J.number().min(1).max(100).default(10)});J.object({meter_id:J.number(),reading:J.number().min(0,"Reading must be 0 or greater"),reading_date:J.string().regex(/^\d{4}-\d{2}-\d{2}$/,"Date must be in YYYY-MM-DD format"),created_at:J.date().optional()});function Dt(a,e,l){const t=a.slice();return t[0]=e[l],t}function Ot(a,e,l){const t=a.slice();return t[35]=e[l],t}function Ft(a,e,l){const t=a.slice();return t[32]=e[l],t}function Ut(a){let e,l;return e=new Al({props:{$$slots:{default:[yl]},$$scope:{ctx:a}}}),{c(){E(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,n){S(e,t,n),l=!0},p(t,n){const r={};n[0]&32|n[1]&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){h(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function Ml(a){let e;return{c(){e=R(a[5])},l(l){e=C(l,a[5])},m(l,t){v(l,e,t)},p(l,t){t[0]&32&&K(e,l[5])},d(l){l&&u(e)}}}function yl(a){let e,l;return e=new Ul({props:{$$slots:{default:[Ml]},$$scope:{ctx:a}}}),{c(){E(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,n){S(e,t,n),l=!0},p(t,n){const r={};n[0]&32|n[1]&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){h(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function Yl(a){let e;return{c(){e=R("Name")},l(l){e=C(l,"Name")},m(l,t){v(l,e,t)},d(l){l&&u(e)}}}function Mt(a){let e,l=a[6].name+"",t;return{c(){e=P("span"),t=R(l),this.h()},l(n){e=L(n,"SPAN",{class:!0});var r=F(e);t=C(r,l),r.forEach(u),this.h()},h(){B(e,"class","text-red-500")},m(n,r){v(n,e,r),b(e,t)},p(n,r){r[0]&64&&l!==(l=n[6].name+"")&&K(t,l)},d(n){n&&u(e)}}}function jl(a){let e;return{c(){e=R("Location Type")},l(l){e=C(l,"Location Type")},m(l,t){v(l,e,t)},d(l){l&&u(e)}}}function ql(a){let e,l;return e=new Ye({props:{placeholder:"Select location type"}}),{c(){E(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,n){S(e,t,n),l=!0},p:pe,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){h(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function Bl(a){let e;return{c(){e=R("Property")},l(l){e=C(l,"Property")},m(l,t){v(l,e,t)},d(l){l&&u(e)}}}function Wl(a){let e;return{c(){e=R("Floor")},l(l){e=C(l,"Floor")},m(l,t){v(l,e,t)},d(l){l&&u(e)}}}function Hl(a){let e;return{c(){e=R("Rental_unit")},l(l){e=C(l,"Rental_unit")},m(l,t){v(l,e,t)},d(l){l&&u(e)}}}function zl(a){let e,l,t,n,r,s;return e=new ce({props:{value:"PROPERTY",$$slots:{default:[Bl]},$$scope:{ctx:a}}}),t=new ce({props:{value:"FLOOR",$$slots:{default:[Wl]},$$scope:{ctx:a}}}),r=new ce({props:{value:"RENTAL_UNIT",$$slots:{default:[Hl]},$$scope:{ctx:a}}}),{c(){E(e.$$.fragment),l=N(),E(t.$$.fragment),n=N(),E(r.$$.fragment)},l(f){k(e.$$.fragment,f),l=I(f),k(t.$$.fragment,f),n=I(f),k(r.$$.fragment,f)},m(f,o){S(e,f,o),v(f,l,o),S(t,f,o),v(f,n,o),S(r,f,o),s=!0},p(f,o){const i={};o[1]&512&&(i.$$scope={dirty:o,ctx:f}),e.$set(i);const $={};o[1]&512&&($.$$scope={dirty:o,ctx:f}),t.$set($);const m={};o[1]&512&&(m.$$scope={dirty:o,ctx:f}),r.$set(m)},i(f){s||(_(e.$$.fragment,f),_(t.$$.fragment,f),_(r.$$.fragment,f),s=!0)},o(f){h(e.$$.fragment,f),h(t.$$.fragment,f),h(r.$$.fragment,f),s=!1},d(f){f&&(u(l),u(n)),T(e,f),T(t,f),T(r,f)}}}function Gl(a){let e,l,t,n;return e=new Me({props:{class:"w-full",$$slots:{default:[ql]},$$scope:{ctx:a}}}),t=new ye({props:{$$slots:{default:[zl]},$$scope:{ctx:a}}}),{c(){E(e.$$.fragment),l=N(),E(t.$$.fragment)},l(r){k(e.$$.fragment,r),l=I(r),k(t.$$.fragment,r)},m(r,s){S(e,r,s),v(r,l,s),S(t,r,s),n=!0},p(r,s){const f={};s[1]&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const o={};s[1]&512&&(o.$$scope={dirty:s,ctx:r}),t.$set(o)},i(r){n||(_(e.$$.fragment,r),_(t.$$.fragment,r),n=!0)},o(r){h(e.$$.fragment,r),h(t.$$.fragment,r),n=!1},d(r){r&&u(l),T(e,r),T(t,r)}}}function yt(a){let e,l=a[6].location_type+"",t;return{c(){e=P("span"),t=R(l),this.h()},l(n){e=L(n,"SPAN",{class:!0});var r=F(e);t=C(r,l),r.forEach(u),this.h()},h(){B(e,"class","text-red-500")},m(n,r){v(n,e,r),b(e,t)},p(n,r){r[0]&64&&l!==(l=n[6].location_type+"")&&K(t,l)},d(n){n&&u(e)}}}function Kl(a){var o;let e,l,t,n,r,s;l=new he({props:{for:"rental_unit_id",$$slots:{default:[Xl]},$$scope:{ctx:a}}}),n=new Ue({props:{selected:{label:a[1].rental_unit_id?a[13]("RENTAL_UNIT",Number(a[1].rental_unit_id)):"Select rental_unit",value:((o=a[1].rental_unit_id)==null?void 0:o.toString())||""},onSelectedChange:a[24],$$slots:{default:[tn]},$$scope:{ctx:a}}});let f=a[6].rental_unit_id&&qt(a);return{c(){e=P("div"),E(l.$$.fragment),t=N(),E(n.$$.fragment),r=N(),f&&f.c()},l(i){e=L(i,"DIV",{});var $=F(e);k(l.$$.fragment,$),t=I($),k(n.$$.fragment,$),r=I($),f&&f.l($),$.forEach(u)},m(i,$){v(i,e,$),S(l,e,null),b(e,t),S(n,e,null),b(e,r),f&&f.m(e,null),s=!0},p(i,$){var p;const m={};$[1]&512&&(m.$$scope={dirty:$,ctx:i}),l.$set(m);const c={};$[0]&2&&(c.selected={label:i[1].rental_unit_id?i[13]("RENTAL_UNIT",Number(i[1].rental_unit_id)):"Select rental_unit",value:((p=i[1].rental_unit_id)==null?void 0:p.toString())||""}),$[0]&4|$[1]&512&&(c.$$scope={dirty:$,ctx:i}),n.$set(c),i[6].rental_unit_id?f?f.p(i,$):(f=qt(i),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},i(i){s||(_(l.$$.fragment,i),_(n.$$.fragment,i),s=!0)},o(i){h(l.$$.fragment,i),h(n.$$.fragment,i),s=!1},d(i){i&&u(e),T(l),T(n),f&&f.d()}}}function Ql(a){var o;let e,l,t,n,r,s;l=new he({props:{for:"floor_id",$$slots:{default:[ln]},$$scope:{ctx:a}}}),n=new Ue({props:{selected:{label:a[1].floor_id?a[13]("FLOOR",Number(a[1].floor_id)):"Select floor",value:((o=a[1].floor_id)==null?void 0:o.toString())||""},onSelectedChange:a[23],$$slots:{default:[an]},$$scope:{ctx:a}}});let f=a[6].floor_id&&Wt(a);return{c(){e=P("div"),E(l.$$.fragment),t=N(),E(n.$$.fragment),r=N(),f&&f.c()},l(i){e=L(i,"DIV",{});var $=F(e);k(l.$$.fragment,$),t=I($),k(n.$$.fragment,$),r=I($),f&&f.l($),$.forEach(u)},m(i,$){v(i,e,$),S(l,e,null),b(e,t),S(n,e,null),b(e,r),f&&f.m(e,null),s=!0},p(i,$){var p;const m={};$[1]&512&&(m.$$scope={dirty:$,ctx:i}),l.$set(m);const c={};$[0]&2&&(c.selected={label:i[1].floor_id?i[13]("FLOOR",Number(i[1].floor_id)):"Select floor",value:((p=i[1].floor_id)==null?void 0:p.toString())||""}),$[0]&8|$[1]&512&&(c.$$scope={dirty:$,ctx:i}),n.$set(c),i[6].floor_id?f?f.p(i,$):(f=Wt(i),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},i(i){s||(_(l.$$.fragment,i),_(n.$$.fragment,i),s=!0)},o(i){h(l.$$.fragment,i),h(n.$$.fragment,i),s=!1},d(i){i&&u(e),T(l),T(n),f&&f.d()}}}function Jl(a){var o;let e,l,t,n,r,s;l=new he({props:{for:"property_id",$$slots:{default:[fn]},$$scope:{ctx:a}}}),n=new Ue({props:{selected:{label:a[1].property_id?a[13]("PROPERTY",Number(a[1].property_id)):"Select property",value:((o=a[1].property_id)==null?void 0:o.toString())||""},onSelectedChange:a[22],$$slots:{default:[cn]},$$scope:{ctx:a}}});let f=a[6].property_id&&zt(a);return{c(){e=P("div"),E(l.$$.fragment),t=N(),E(n.$$.fragment),r=N(),f&&f.c()},l(i){e=L(i,"DIV",{});var $=F(e);k(l.$$.fragment,$),t=I($),k(n.$$.fragment,$),r=I($),f&&f.l($),$.forEach(u)},m(i,$){v(i,e,$),S(l,e,null),b(e,t),S(n,e,null),b(e,r),f&&f.m(e,null),s=!0},p(i,$){var p;const m={};$[1]&512&&(m.$$scope={dirty:$,ctx:i}),l.$set(m);const c={};$[0]&2&&(c.selected={label:i[1].property_id?i[13]("PROPERTY",Number(i[1].property_id)):"Select property",value:((p=i[1].property_id)==null?void 0:p.toString())||""}),$[0]&16|$[1]&512&&(c.$$scope={dirty:$,ctx:i}),n.$set(c),i[6].property_id?f?f.p(i,$):(f=zt(i),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},i(i){s||(_(l.$$.fragment,i),_(n.$$.fragment,i),s=!0)},o(i){h(l.$$.fragment,i),h(n.$$.fragment,i),s=!1},d(i){i&&u(e),T(l),T(n),f&&f.d()}}}function Xl(a){let e;return{c(){e=R("Rental_unit")},l(l){e=C(l,"Rental_unit")},m(l,t){v(l,e,t)},d(l){l&&u(e)}}}function Zl(a){let e,l;return e=new Ye({props:{placeholder:"Select rental_unit"}}),{c(){E(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,n){S(e,t,n),l=!0},p:pe,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){h(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function Yt(a){let e,l=a[0].floor.property.name+"",t;return{c(){e=R("- "),t=R(l)},l(n){e=C(n,"- "),t=C(n,l)},m(n,r){v(n,e,r),v(n,t,r)},p(n,r){r[0]&4&&l!==(l=n[0].floor.property.name+"")&&K(t,l)},d(n){n&&(u(e),u(t))}}}function xl(a){var f;let e,l=a[0].number+"",t,n,r,s=((f=a[0].floor)==null?void 0:f.property)&&Yt(a);return{c(){e=R("Rental_unit "),t=R(l),n=N(),s&&s.c(),r=N()},l(o){e=C(o,"Rental_unit "),t=C(o,l),n=I(o),s&&s.l(o),r=I(o)},m(o,i){v(o,e,i),v(o,t,i),v(o,n,i),s&&s.m(o,i),v(o,r,i)},p(o,i){var $;i[0]&4&&l!==(l=o[0].number+"")&&K(t,l),($=o[0].floor)!=null&&$.property?s?s.p(o,i):(s=Yt(o),s.c(),s.m(r.parentNode,r)):s&&(s.d(1),s=null)},d(o){o&&(u(e),u(t),u(n),u(r)),s&&s.d(o)}}}function jt(a){let e,l;return e=new ce({props:{value:a[0].id.toString(),$$slots:{default:[xl]},$$scope:{ctx:a}}}),{c(){E(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,n){S(e,t,n),l=!0},p(t,n){const r={};n[0]&4&&(r.value=t[0].id.toString()),n[0]&4|n[1]&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){h(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function en(a){let e,l,t=ve(a[2]),n=[];for(let s=0;s<t.length;s+=1)n[s]=jt(Dt(a,t,s));const r=s=>h(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=X()},l(s){for(let f=0;f<n.length;f+=1)n[f].l(s);e=X()},m(s,f){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(s,f);v(s,e,f),l=!0},p(s,f){if(f[0]&4){t=ve(s[2]);let o;for(o=0;o<t.length;o+=1){const i=Dt(s,t,o);n[o]?(n[o].p(i,f),_(n[o],1)):(n[o]=jt(i),n[o].c(),_(n[o],1),n[o].m(e.parentNode,e))}for(we(),o=t.length;o<n.length;o+=1)r(o);Ee()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)_(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)h(n[f]);l=!1},d(s){s&&u(e),Ge(n,s)}}}function tn(a){let e,l,t,n;return e=new Me({props:{class:"w-full",$$slots:{default:[Zl]},$$scope:{ctx:a}}}),t=new ye({props:{$$slots:{default:[en]},$$scope:{ctx:a}}}),{c(){E(e.$$.fragment),l=N(),E(t.$$.fragment)},l(r){k(e.$$.fragment,r),l=I(r),k(t.$$.fragment,r)},m(r,s){S(e,r,s),v(r,l,s),S(t,r,s),n=!0},p(r,s){const f={};s[1]&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const o={};s[0]&4|s[1]&512&&(o.$$scope={dirty:s,ctx:r}),t.$set(o)},i(r){n||(_(e.$$.fragment,r),_(t.$$.fragment,r),n=!0)},o(r){h(e.$$.fragment,r),h(t.$$.fragment,r),n=!1},d(r){r&&u(l),T(e,r),T(t,r)}}}function qt(a){let e,l=a[6].rental_unit_id+"",t;return{c(){e=P("span"),t=R(l),this.h()},l(n){e=L(n,"SPAN",{class:!0});var r=F(e);t=C(r,l),r.forEach(u),this.h()},h(){B(e,"class","text-red-500")},m(n,r){v(n,e,r),b(e,t)},p(n,r){r[0]&64&&l!==(l=n[6].rental_unit_id+"")&&K(t,l)},d(n){n&&u(e)}}}function ln(a){let e;return{c(){e=R("Floor")},l(l){e=C(l,"Floor")},m(l,t){v(l,e,t)},d(l){l&&u(e)}}}function nn(a){let e,l;return e=new Ye({props:{placeholder:"Select floor"}}),{c(){E(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,n){S(e,t,n),l=!0},p:pe,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){h(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function rn(a){let e,l=a[35].floor_number+"",t,n=a[35].wing?`, Wing ${a[35].wing}`:"",r,s=a[35].property?` - ${a[35].property.name}`:"",f,o;return{c(){e=R("Floor "),t=R(l),r=R(n),f=R(s),o=N()},l(i){e=C(i,"Floor "),t=C(i,l),r=C(i,n),f=C(i,s),o=I(i)},m(i,$){v(i,e,$),v(i,t,$),v(i,r,$),v(i,f,$),v(i,o,$)},p(i,$){$[0]&8&&l!==(l=i[35].floor_number+"")&&K(t,l),$[0]&8&&n!==(n=i[35].wing?`, Wing ${i[35].wing}`:"")&&K(r,n),$[0]&8&&s!==(s=i[35].property?` - ${i[35].property.name}`:"")&&K(f,s)},d(i){i&&(u(e),u(t),u(r),u(f),u(o))}}}function Bt(a){let e,l;return e=new ce({props:{value:a[35].id.toString(),$$slots:{default:[rn]},$$scope:{ctx:a}}}),{c(){E(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,n){S(e,t,n),l=!0},p(t,n){const r={};n[0]&8&&(r.value=t[35].id.toString()),n[0]&8|n[1]&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){h(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function sn(a){let e,l,t=ve(a[3]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Bt(Ot(a,t,s));const r=s=>h(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=X()},l(s){for(let f=0;f<n.length;f+=1)n[f].l(s);e=X()},m(s,f){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(s,f);v(s,e,f),l=!0},p(s,f){if(f[0]&8){t=ve(s[3]);let o;for(o=0;o<t.length;o+=1){const i=Ot(s,t,o);n[o]?(n[o].p(i,f),_(n[o],1)):(n[o]=Bt(i),n[o].c(),_(n[o],1),n[o].m(e.parentNode,e))}for(we(),o=t.length;o<n.length;o+=1)r(o);Ee()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)_(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)h(n[f]);l=!1},d(s){s&&u(e),Ge(n,s)}}}function an(a){let e,l,t,n;return e=new Me({props:{class:"w-full",$$slots:{default:[nn]},$$scope:{ctx:a}}}),t=new ye({props:{$$slots:{default:[sn]},$$scope:{ctx:a}}}),{c(){E(e.$$.fragment),l=N(),E(t.$$.fragment)},l(r){k(e.$$.fragment,r),l=I(r),k(t.$$.fragment,r)},m(r,s){S(e,r,s),v(r,l,s),S(t,r,s),n=!0},p(r,s){const f={};s[1]&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const o={};s[0]&8|s[1]&512&&(o.$$scope={dirty:s,ctx:r}),t.$set(o)},i(r){n||(_(e.$$.fragment,r),_(t.$$.fragment,r),n=!0)},o(r){h(e.$$.fragment,r),h(t.$$.fragment,r),n=!1},d(r){r&&u(l),T(e,r),T(t,r)}}}function Wt(a){let e,l=a[6].floor_id+"",t;return{c(){e=P("span"),t=R(l),this.h()},l(n){e=L(n,"SPAN",{class:!0});var r=F(e);t=C(r,l),r.forEach(u),this.h()},h(){B(e,"class","text-red-500")},m(n,r){v(n,e,r),b(e,t)},p(n,r){r[0]&64&&l!==(l=n[6].floor_id+"")&&K(t,l)},d(n){n&&u(e)}}}function fn(a){let e;return{c(){e=R("Property")},l(l){e=C(l,"Property")},m(l,t){v(l,e,t)},d(l){l&&u(e)}}}function on(a){let e,l;return e=new Ye({props:{placeholder:"Select property"}}),{c(){E(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,n){S(e,t,n),l=!0},p:pe,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){h(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function un(a){let e=a[32].name+"",l;return{c(){l=R(e)},l(t){l=C(t,e)},m(t,n){v(t,l,n)},p(t,n){n[0]&16&&e!==(e=t[32].name+"")&&K(l,e)},d(t){t&&u(l)}}}function Ht(a){let e,l;return e=new ce({props:{value:a[32].id.toString(),$$slots:{default:[un]},$$scope:{ctx:a}}}),{c(){E(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,n){S(e,t,n),l=!0},p(t,n){const r={};n[0]&16&&(r.value=t[32].id.toString()),n[0]&16|n[1]&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){h(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function $n(a){let e,l,t=ve(a[4]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Ht(Ft(a,t,s));const r=s=>h(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=X()},l(s){for(let f=0;f<n.length;f+=1)n[f].l(s);e=X()},m(s,f){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(s,f);v(s,e,f),l=!0},p(s,f){if(f[0]&16){t=ve(s[4]);let o;for(o=0;o<t.length;o+=1){const i=Ft(s,t,o);n[o]?(n[o].p(i,f),_(n[o],1)):(n[o]=Ht(i),n[o].c(),_(n[o],1),n[o].m(e.parentNode,e))}for(we(),o=t.length;o<n.length;o+=1)r(o);Ee()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)_(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)h(n[f]);l=!1},d(s){s&&u(e),Ge(n,s)}}}function cn(a){let e,l,t,n;return e=new Me({props:{class:"w-full",$$slots:{default:[on]},$$scope:{ctx:a}}}),t=new ye({props:{$$slots:{default:[$n]},$$scope:{ctx:a}}}),{c(){E(e.$$.fragment),l=N(),E(t.$$.fragment)},l(r){k(e.$$.fragment,r),l=I(r),k(t.$$.fragment,r)},m(r,s){S(e,r,s),v(r,l,s),S(t,r,s),n=!0},p(r,s){const f={};s[1]&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const o={};s[0]&16|s[1]&512&&(o.$$scope={dirty:s,ctx:r}),t.$set(o)},i(r){n||(_(e.$$.fragment,r),_(t.$$.fragment,r),n=!0)},o(r){h(e.$$.fragment,r),h(t.$$.fragment,r),n=!1},d(r){r&&u(l),T(e,r),T(t,r)}}}function zt(a){let e,l=a[6].property_id+"",t;return{c(){e=P("span"),t=R(l),this.h()},l(n){e=L(n,"SPAN",{class:!0});var r=F(e);t=C(r,l),r.forEach(u),this.h()},h(){B(e,"class","text-red-500")},m(n,r){v(n,e,r),b(e,t)},p(n,r){r[0]&64&&l!==(l=n[6].property_id+"")&&K(t,l)},d(n){n&&u(e)}}}function _n(a){let e;return{c(){e=R("Utility Type")},l(l){e=C(l,"Utility Type")},m(l,t){v(l,e,t)},d(l){l&&u(e)}}}function mn(a){let e,l;return e=new Ye({props:{placeholder:"Select utility type"}}),{c(){E(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,n){S(e,t,n),l=!0},p:pe,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){h(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function pn(a){let e;return{c(){e=R("Electricity")},l(l){e=C(l,"Electricity")},m(l,t){v(l,e,t)},d(l){l&&u(e)}}}function gn(a){let e;return{c(){e=R("Water")},l(l){e=C(l,"Water")},m(l,t){v(l,e,t)},d(l){l&&u(e)}}}function dn(a){let e;return{c(){e=R("Internet")},l(l){e=C(l,"Internet")},m(l,t){v(l,e,t)},d(l){l&&u(e)}}}function hn(a){let e,l,t,n,r,s;return e=new ce({props:{value:"ELECTRICITY",$$slots:{default:[pn]},$$scope:{ctx:a}}}),t=new ce({props:{value:"WATER",$$slots:{default:[gn]},$$scope:{ctx:a}}}),r=new ce({props:{value:"INTERNET",$$slots:{default:[dn]},$$scope:{ctx:a}}}),{c(){E(e.$$.fragment),l=N(),E(t.$$.fragment),n=N(),E(r.$$.fragment)},l(f){k(e.$$.fragment,f),l=I(f),k(t.$$.fragment,f),n=I(f),k(r.$$.fragment,f)},m(f,o){S(e,f,o),v(f,l,o),S(t,f,o),v(f,n,o),S(r,f,o),s=!0},p(f,o){const i={};o[1]&512&&(i.$$scope={dirty:o,ctx:f}),e.$set(i);const $={};o[1]&512&&($.$$scope={dirty:o,ctx:f}),t.$set($);const m={};o[1]&512&&(m.$$scope={dirty:o,ctx:f}),r.$set(m)},i(f){s||(_(e.$$.fragment,f),_(t.$$.fragment,f),_(r.$$.fragment,f),s=!0)},o(f){h(e.$$.fragment,f),h(t.$$.fragment,f),h(r.$$.fragment,f),s=!1},d(f){f&&(u(l),u(n)),T(e,f),T(t,f),T(r,f)}}}function vn(a){let e,l,t,n;return e=new Me({props:{class:"w-full",$$slots:{default:[mn]},$$scope:{ctx:a}}}),t=new ye({props:{$$slots:{default:[hn]},$$scope:{ctx:a}}}),{c(){E(e.$$.fragment),l=N(),E(t.$$.fragment)},l(r){k(e.$$.fragment,r),l=I(r),k(t.$$.fragment,r)},m(r,s){S(e,r,s),v(r,l,s),S(t,r,s),n=!0},p(r,s){const f={};s[1]&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const o={};s[1]&512&&(o.$$scope={dirty:s,ctx:r}),t.$set(o)},i(r){n||(_(e.$$.fragment,r),_(t.$$.fragment,r),n=!0)},o(r){h(e.$$.fragment,r),h(t.$$.fragment,r),n=!1},d(r){r&&u(l),T(e,r),T(t,r)}}}function Gt(a){let e,l=a[6].type+"",t;return{c(){e=P("span"),t=R(l),this.h()},l(n){e=L(n,"SPAN",{class:!0});var r=F(e);t=C(r,l),r.forEach(u),this.h()},h(){B(e,"class","text-red-500")},m(n,r){v(n,e,r),b(e,t)},p(n,r){r[0]&64&&l!==(l=n[6].type+"")&&K(t,l)},d(n){n&&u(e)}}}function bn(a){let e;return{c(){e=R("Initial Reading")},l(l){e=C(l,"Initial Reading")},m(l,t){v(l,e,t)},d(l){l&&u(e)}}}function Kt(a){let e,l=a[6].initial_reading+"",t;return{c(){e=P("span"),t=R(l),this.h()},l(n){e=L(n,"SPAN",{class:!0});var r=F(e);t=C(r,l),r.forEach(u),this.h()},h(){B(e,"class","text-red-500")},m(n,r){v(n,e,r),b(e,t)},p(n,r){r[0]&64&&l!==(l=n[6].initial_reading+"")&&K(t,l)},d(n){n&&u(e)}}}function wn(a){let e;return{c(){e=R("Unit Rate")},l(l){e=C(l,"Unit Rate")},m(l,t){v(l,e,t)},d(l){l&&u(e)}}}function Qt(a){let e,l=a[6].unit_rate+"",t;return{c(){e=P("span"),t=R(l),this.h()},l(n){e=L(n,"SPAN",{class:!0});var r=F(e);t=C(r,l),r.forEach(u),this.h()},h(){B(e,"class","text-red-500")},m(n,r){v(n,e,r),b(e,t)},p(n,r){r[0]&64&&l!==(l=n[6].unit_rate+"")&&K(t,l)},d(n){n&&u(e)}}}function En(a){let e;return{c(){e=R("Status")},l(l){e=C(l,"Status")},m(l,t){v(l,e,t)},d(l){l&&u(e)}}}function kn(a){let e,l;return e=new Ye({props:{placeholder:"Select status"}}),{c(){E(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,n){S(e,t,n),l=!0},p:pe,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){h(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function Sn(a){let e;return{c(){e=R("Active")},l(l){e=C(l,"Active")},m(l,t){v(l,e,t)},d(l){l&&u(e)}}}function Tn(a){let e;return{c(){e=R("Inactive")},l(l){e=C(l,"Inactive")},m(l,t){v(l,e,t)},d(l){l&&u(e)}}}function Nn(a){let e;return{c(){e=R("Maintenance")},l(l){e=C(l,"Maintenance")},m(l,t){v(l,e,t)},d(l){l&&u(e)}}}function In(a){let e,l,t,n,r,s;return e=new ce({props:{value:"ACTIVE",$$slots:{default:[Sn]},$$scope:{ctx:a}}}),t=new ce({props:{value:"INACTIVE",$$slots:{default:[Tn]},$$scope:{ctx:a}}}),r=new ce({props:{value:"MAINTENANCE",$$slots:{default:[Nn]},$$scope:{ctx:a}}}),{c(){E(e.$$.fragment),l=N(),E(t.$$.fragment),n=N(),E(r.$$.fragment)},l(f){k(e.$$.fragment,f),l=I(f),k(t.$$.fragment,f),n=I(f),k(r.$$.fragment,f)},m(f,o){S(e,f,o),v(f,l,o),S(t,f,o),v(f,n,o),S(r,f,o),s=!0},p(f,o){const i={};o[1]&512&&(i.$$scope={dirty:o,ctx:f}),e.$set(i);const $={};o[1]&512&&($.$$scope={dirty:o,ctx:f}),t.$set($);const m={};o[1]&512&&(m.$$scope={dirty:o,ctx:f}),r.$set(m)},i(f){s||(_(e.$$.fragment,f),_(t.$$.fragment,f),_(r.$$.fragment,f),s=!0)},o(f){h(e.$$.fragment,f),h(t.$$.fragment,f),h(r.$$.fragment,f),s=!1},d(f){f&&(u(l),u(n)),T(e,f),T(t,f),T(r,f)}}}function Rn(a){let e,l,t,n;return e=new Me({props:{class:"w-full",$$slots:{default:[kn]},$$scope:{ctx:a}}}),t=new ye({props:{$$slots:{default:[In]},$$scope:{ctx:a}}}),{c(){E(e.$$.fragment),l=N(),E(t.$$.fragment)},l(r){k(e.$$.fragment,r),l=I(r),k(t.$$.fragment,r)},m(r,s){S(e,r,s),v(r,l,s),S(t,r,s),n=!0},p(r,s){const f={};s[1]&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const o={};s[1]&512&&(o.$$scope={dirty:s,ctx:r}),t.$set(o)},i(r){n||(_(e.$$.fragment,r),_(t.$$.fragment,r),n=!0)},o(r){h(e.$$.fragment,r),h(t.$$.fragment,r),n=!1},d(r){r&&u(l),T(e,r),T(t,r)}}}function Jt(a){let e,l=a[6].status+"",t;return{c(){e=P("span"),t=R(l),this.h()},l(n){e=L(n,"SPAN",{class:!0});var r=F(e);t=C(r,l),r.forEach(u),this.h()},h(){B(e,"class","text-red-500")},m(n,r){v(n,e,r),b(e,t)},p(n,r){r[0]&64&&l!==(l=n[6].status+"")&&K(t,l)},d(n){n&&u(e)}}}function Cn(a){let e;return{c(){e=R("Notes")},l(l){e=C(l,"Notes")},m(l,t){v(l,e,t)},d(l){l&&u(e)}}}function Xt(a){let e,l=a[6].notes+"",t;return{c(){e=P("span"),t=R(l),this.h()},l(n){e=L(n,"SPAN",{class:!0});var r=F(e);t=C(r,l),r.forEach(u),this.h()},h(){B(e,"class","text-red-500")},m(n,r){v(n,e,r),b(e,t)},p(n,r){r[0]&64&&l!==(l=n[6].notes+"")&&K(t,l)},d(n){n&&u(e)}}}function An(a){let e;return{c(){e=R("Save")},l(l){e=C(l,"Save")},m(l,t){v(l,e,t)},d(l){l&&u(e)}}}function Pn(a){let e;return{c(){e=R("Saving...")},l(l){e=C(l,"Saving...")},m(l,t){v(l,e,t)},d(l){l&&u(e)}}}function Ln(a){let e;function l(r,s){return r[7]?Pn:An}let t=l(a),n=t(a);return{c(){n.c(),e=X()},l(r){n.l(r),e=X()},m(r,s){n.m(r,s),v(r,e,s)},p(r,s){t!==(t=l(r))&&(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&u(e),n.d(r)}}}function Vn(a){let e,l,t,n,r,s,f,o,i,$,m,c,p,w,U,G,y,W,Q,V,M,Y,j,_e,q,ee,te,ke,O,A,Z,le,H,g,z,ne,je,qe,Be,ge,de,Ve,me,st,at,Se,De,ft,Re,ot,it,ut,We,Oe,Ke,$t,ht,re=a[5]&&Ut(a);r=new he({props:{for:"name",$$slots:{default:[Yl]},$$scope:{ctx:a}}});function _l(d){a[20](d)}let vt={type:"text",id:"name",maxlength:255,required:!0};a[1].name!==void 0&&(vt.value=a[1].name),f=new et({props:vt}),Je.push(()=>xe(f,"value",_l));let se=a[6].name&&Mt(a);c=new he({props:{for:"location_type",$$slots:{default:[jl]},$$scope:{ctx:a}}}),w=new Ue({props:{selected:{label:a[1].location_type||"Select location type",value:a[1].location_type||""},onSelectedChange:a[21],$$slots:{default:[Gl]},$$scope:{ctx:a}}});let ae=a[6].location_type&&yt(a);const bt=[Jl,Ql,Kl],Fe=[];function wt(d,D){return d[1].location_type==="PROPERTY"?0:d[1].location_type==="FLOOR"?1:d[1].location_type==="RENTAL_UNIT"?2:-1}~(y=wt(a))&&(W=Fe[y]=bt[y](a)),M=new he({props:{for:"type",$$slots:{default:[_n]},$$scope:{ctx:a}}}),j=new Ue({props:{selected:{label:a[1].type||"Select utility type",value:a[1].type||""},onSelectedChange:a[25],$$slots:{default:[vn]},$$scope:{ctx:a}}});let fe=a[6].type&&Gt(a);te=new he({props:{for:"initial_reading",$$slots:{default:[bn]},$$scope:{ctx:a}}});function ml(d){a[26](d)}let Et={type:"number",id:"initial_reading",min:"0",step:"0.01",required:!0};a[1].initial_reading!==void 0&&(Et.value=a[1].initial_reading),O=new et({props:Et}),Je.push(()=>xe(O,"value",ml));let oe=a[6].initial_reading&&Kt(a);g=new he({props:{for:"unit_rate",$$slots:{default:[wn]},$$scope:{ctx:a}}});function pl(d){a[27](d)}let kt={type:"number",id:"unit_rate",min:"0",step:"0.01",required:!0};a[1].unit_rate!==void 0&&(kt.value=a[1].unit_rate),ne=new et({props:kt}),Je.push(()=>xe(ne,"value",pl));let ie=a[6].unit_rate&&Qt(a);de=new he({props:{for:"status",$$slots:{default:[En]},$$scope:{ctx:a}}}),me=new Ue({props:{selected:{label:a[1].status||"Select status",value:a[1].status||""},onSelectedChange:a[28],$$slots:{default:[Rn]},$$scope:{ctx:a}}});let ue=a[6].status&&Jt(a);De=new he({props:{for:"notes",$$slots:{default:[Cn]},$$scope:{ctx:a}}});function gl(d){a[29](d)}let St={id:"notes"};a[1].notes!==void 0&&(St.value=a[1].notes),Re=new Ll({props:St}),Je.push(()=>xe(Re,"value",gl));let $e=a[6].notes&&Xt(a);return Oe=new dt({props:{type:"submit",disabled:a[7],$$slots:{default:[Ln]},$$scope:{ctx:a}}}),{c(){e=P("form"),l=P("div"),re&&re.c(),t=N(),n=P("div"),E(r.$$.fragment),s=N(),E(f.$$.fragment),i=N(),se&&se.c(),$=N(),m=P("div"),E(c.$$.fragment),p=N(),E(w.$$.fragment),U=N(),ae&&ae.c(),G=N(),W&&W.c(),Q=N(),V=P("div"),E(M.$$.fragment),Y=N(),E(j.$$.fragment),_e=N(),fe&&fe.c(),q=N(),ee=P("div"),E(te.$$.fragment),ke=N(),E(O.$$.fragment),Z=N(),oe&&oe.c(),le=N(),H=P("div"),E(g.$$.fragment),z=N(),E(ne.$$.fragment),qe=N(),ie&&ie.c(),Be=N(),ge=P("div"),E(de.$$.fragment),Ve=N(),E(me.$$.fragment),st=N(),ue&&ue.c(),at=N(),Se=P("div"),E(De.$$.fragment),ft=N(),E(Re.$$.fragment),it=N(),$e&&$e.c(),ut=N(),We=P("div"),E(Oe.$$.fragment),this.h()},l(d){e=L(d,"FORM",{method:!0});var D=F(e);l=L(D,"DIV",{class:!0});var x=F(l);re&&re.l(x),t=I(x),n=L(x,"DIV",{});var Ce=F(n);k(r.$$.fragment,Ce),s=I(Ce),k(f.$$.fragment,Ce),i=I(Ce),se&&se.l(Ce),Ce.forEach(u),$=I(x),m=L(x,"DIV",{});var Ae=F(m);k(c.$$.fragment,Ae),p=I(Ae),k(w.$$.fragment,Ae),U=I(Ae),ae&&ae.l(Ae),Ae.forEach(u),G=I(x),W&&W.l(x),Q=I(x),V=L(x,"DIV",{});var Te=F(V);k(M.$$.fragment,Te),Y=I(Te),k(j.$$.fragment,Te),_e=I(Te),fe&&fe.l(Te),Te.forEach(u),q=I(x),ee=L(x,"DIV",{});var Ne=F(ee);k(te.$$.fragment,Ne),ke=I(Ne),k(O.$$.fragment,Ne),Z=I(Ne),oe&&oe.l(Ne),Ne.forEach(u),le=I(x),H=L(x,"DIV",{});var Pe=F(H);k(g.$$.fragment,Pe),z=I(Pe),k(ne.$$.fragment,Pe),qe=I(Pe),ie&&ie.l(Pe),Pe.forEach(u),Be=I(x),ge=L(x,"DIV",{});var be=F(ge);k(de.$$.fragment,be),Ve=I(be),k(me.$$.fragment,be),st=I(be),ue&&ue.l(be),be.forEach(u),at=I(x),Se=L(x,"DIV",{});var Le=F(Se);k(De.$$.fragment,Le),ft=I(Le),k(Re.$$.fragment,Le),it=I(Le),$e&&$e.l(Le),Le.forEach(u),ut=I(x),We=L(x,"DIV",{class:!0});var He=F(We);k(Oe.$$.fragment,He),He.forEach(u),x.forEach(u),D.forEach(u),this.h()},h(){B(We,"class","flex justify-end gap-2"),B(l,"class","space-y-4"),B(e,"method","POST")},m(d,D){v(d,e,D),b(e,l),re&&re.m(l,null),b(l,t),b(l,n),S(r,n,null),b(n,s),S(f,n,null),b(n,i),se&&se.m(n,null),b(l,$),b(l,m),S(c,m,null),b(m,p),S(w,m,null),b(m,U),ae&&ae.m(m,null),b(l,G),~y&&Fe[y].m(l,null),b(l,Q),b(l,V),S(M,V,null),b(V,Y),S(j,V,null),b(V,_e),fe&&fe.m(V,null),b(l,q),b(l,ee),S(te,ee,null),b(ee,ke),S(O,ee,null),b(ee,Z),oe&&oe.m(ee,null),b(l,le),b(l,H),S(g,H,null),b(H,z),S(ne,H,null),b(H,qe),ie&&ie.m(H,null),b(l,Be),b(l,ge),S(de,ge,null),b(ge,Ve),S(me,ge,null),b(ge,st),ue&&ue.m(ge,null),b(l,at),b(l,Se),S(De,Se,null),b(Se,ft),S(Re,Se,null),b(Se,it),$e&&$e.m(Se,null),b(l,ut),b(l,We),S(Oe,We,null),Ke=!0,$t||(ht=El(a[8].call(null,e)),$t=!0)},p(d,D){d[5]?re?(re.p(d,D),D[0]&32&&_(re,1)):(re=Ut(d),re.c(),_(re,1),re.m(l,t)):re&&(we(),h(re,1,1,()=>{re=null}),Ee());const x={};D[1]&512&&(x.$$scope={dirty:D,ctx:d}),r.$set(x);const Ce={};!o&&D[0]&2&&(o=!0,Ce.value=d[1].name,Xe(()=>o=!1)),f.$set(Ce),d[6].name?se?se.p(d,D):(se=Mt(d),se.c(),se.m(n,null)):se&&(se.d(1),se=null);const Ae={};D[1]&512&&(Ae.$$scope={dirty:D,ctx:d}),c.$set(Ae);const Te={};D[0]&2&&(Te.selected={label:d[1].location_type||"Select location type",value:d[1].location_type||""}),D[1]&512&&(Te.$$scope={dirty:D,ctx:d}),w.$set(Te),d[6].location_type?ae?ae.p(d,D):(ae=yt(d),ae.c(),ae.m(m,null)):ae&&(ae.d(1),ae=null);let Ne=y;y=wt(d),y===Ne?~y&&Fe[y].p(d,D):(W&&(we(),h(Fe[Ne],1,1,()=>{Fe[Ne]=null}),Ee()),~y?(W=Fe[y],W?W.p(d,D):(W=Fe[y]=bt[y](d),W.c()),_(W,1),W.m(l,Q)):W=null);const Pe={};D[1]&512&&(Pe.$$scope={dirty:D,ctx:d}),M.$set(Pe);const be={};D[0]&2&&(be.selected={label:d[1].type||"Select utility type",value:d[1].type||""}),D[0]&2&&(be.onSelectedChange=d[25]),D[1]&512&&(be.$$scope={dirty:D,ctx:d}),j.$set(be),d[6].type?fe?fe.p(d,D):(fe=Gt(d),fe.c(),fe.m(V,null)):fe&&(fe.d(1),fe=null);const Le={};D[1]&512&&(Le.$$scope={dirty:D,ctx:d}),te.$set(Le);const He={};!A&&D[0]&2&&(A=!0,He.value=d[1].initial_reading,Xe(()=>A=!1)),O.$set(He),d[6].initial_reading?oe?oe.p(d,D):(oe=Kt(d),oe.c(),oe.m(ee,null)):oe&&(oe.d(1),oe=null);const Tt={};D[1]&512&&(Tt.$$scope={dirty:D,ctx:d}),g.$set(Tt);const Nt={};!je&&D[0]&2&&(je=!0,Nt.value=d[1].unit_rate,Xe(()=>je=!1)),ne.$set(Nt),d[6].unit_rate?ie?ie.p(d,D):(ie=Qt(d),ie.c(),ie.m(H,null)):ie&&(ie.d(1),ie=null);const It={};D[1]&512&&(It.$$scope={dirty:D,ctx:d}),de.$set(It);const Qe={};D[0]&2&&(Qe.selected={label:d[1].status||"Select status",value:d[1].status||""}),D[0]&2&&(Qe.onSelectedChange=d[28]),D[1]&512&&(Qe.$$scope={dirty:D,ctx:d}),me.$set(Qe),d[6].status?ue?ue.p(d,D):(ue=Jt(d),ue.c(),ue.m(ge,null)):ue&&(ue.d(1),ue=null);const Rt={};D[1]&512&&(Rt.$$scope={dirty:D,ctx:d}),De.$set(Rt);const Ct={};!ot&&D[0]&2&&(ot=!0,Ct.value=d[1].notes,Xe(()=>ot=!1)),Re.$set(Ct),d[6].notes?$e?$e.p(d,D):($e=Xt(d),$e.c(),$e.m(Se,null)):$e&&($e.d(1),$e=null);const ct={};D[0]&128&&(ct.disabled=d[7]),D[0]&128|D[1]&512&&(ct.$$scope={dirty:D,ctx:d}),Oe.$set(ct)},i(d){Ke||(_(re),_(r.$$.fragment,d),_(f.$$.fragment,d),_(c.$$.fragment,d),_(w.$$.fragment,d),_(W),_(M.$$.fragment,d),_(j.$$.fragment,d),_(te.$$.fragment,d),_(O.$$.fragment,d),_(g.$$.fragment,d),_(ne.$$.fragment,d),_(de.$$.fragment,d),_(me.$$.fragment,d),_(De.$$.fragment,d),_(Re.$$.fragment,d),_(Oe.$$.fragment,d),Ke=!0)},o(d){h(re),h(r.$$.fragment,d),h(f.$$.fragment,d),h(c.$$.fragment,d),h(w.$$.fragment,d),h(W),h(M.$$.fragment,d),h(j.$$.fragment,d),h(te.$$.fragment,d),h(O.$$.fragment,d),h(g.$$.fragment,d),h(ne.$$.fragment,d),h(de.$$.fragment,d),h(me.$$.fragment,d),h(De.$$.fragment,d),h(Re.$$.fragment,d),h(Oe.$$.fragment,d),Ke=!1},d(d){d&&u(e),re&&re.d(),T(r),T(f),se&&se.d(),T(c),T(w),ae&&ae.d(),~y&&Fe[y].d(),T(M),T(j),fe&&fe.d(),T(te),T(O),oe&&oe.d(),T(g),T(ne),ie&&ie.d(),T(de),T(me),ue&&ue.d(),T(De),T(Re),$e&&$e.d(),T(Oe),$t=!1,ht()}}}function Dn(a,e,l){let t,n,r,s,f,o,i,{form:$}=e,{properties:m=[]}=e,{floors:c=[]}=e,{rental_unit:p=[]}=e,{meter:w=void 0}=e;const U=kl(),{enhance:G,errors:y,delayed:W,message:Q,form:V}=Pl($,{resetForm:!0,onResult:({result:g})=>{g.type==="success"&&U(w?"meterUpdated":"meterAdded")}});Ze(a,y,g=>l(6,o=g)),Ze(a,W,g=>l(7,i=g)),Ze(a,Q,g=>l(5,f=g)),Ze(a,V,g=>l(1,s=g));function M(g,z){var ne,je,qe,Be,ge;if(!z)return"";switch(g){case"PROPERTY":return((ne=m.find(me=>me.id===z))==null?void 0:ne.name)||"";case"FLOOR":const de=c.find(me=>me.id===z);return de?`${((je=de.property)==null?void 0:je.name)||""} - Floor ${de.floor_number} ${de.wing||""}`:"";case"RENTAL_UNIT":const Ve=p.find(me=>me.id===z);return Ve?`${((Be=(qe=Ve.floor)==null?void 0:qe.property)==null?void 0:Be.name)||""} - Floor ${((ge=Ve.floor)==null?void 0:ge.floor_number)||""} - Rental_unit ${Ve.number}`:"";default:return""}}function Y(g){(g==="PROPERTY"||g==="FLOOR"||g==="RENTAL_UNIT")&&(Ie(V,s.location_type=g,s),Ie(V,s.property_id=null,s),Ie(V,s.floor_id=null,s),Ie(V,s.rental_unit_id=null,s))}function j(g){const z=Number(g);switch(s.location_type){case"PROPERTY":Ie(V,s.property_id=z,s);break;case"FLOOR":Ie(V,s.floor_id=z,s);break;case"RENTAL_UNIT":Ie(V,s.rental_unit_id=z,s);break}}function _e(g){a.$$.not_equal(s.name,g)&&(s.name=g,V.set(s))}const q=g=>{g!=null&&g.value&&Y(g.value)},ee=g=>{g!=null&&g.value&&j(g.value)},te=g=>{g!=null&&g.value&&j(g.value)},ke=g=>{g!=null&&g.value&&j(g.value)},O=g=>{g!=null&&g.value&&Ie(V,s.type=g.value,s)};function A(g){a.$$.not_equal(s.initial_reading,g)&&(s.initial_reading=g,V.set(s))}function Z(g){a.$$.not_equal(s.unit_rate,g)&&(s.unit_rate=g,V.set(s))}const le=g=>{g!=null&&g.value&&Ie(V,s.status=g.value,s)};function H(g){a.$$.not_equal(s.notes,g)&&(s.notes=g,V.set(s))}return a.$$set=g=>{"form"in g&&l(16,$=g.form),"properties"in g&&l(17,m=g.properties),"floors"in g&&l(18,c=g.floors),"rental_unit"in g&&l(0,p=g.rental_unit),"meter"in g&&l(19,w=g.meter)},a.$$.update=()=>{a.$$.dirty[0]&524288&&w&&Ie(V,s={...w},s),a.$$.dirty[0]&131072&&l(4,t=m.filter(g=>g.status==="ACTIVE")),a.$$.dirty[0]&262144&&l(3,n=c.filter(g=>g.status==="ACTIVE")),a.$$.dirty[0]&1&&l(2,r=p.filter(g=>g.rental_unit_status==="VACANT"||g.rental_unit_status==="OCCUPIED")),a.$$.dirty[0]&2&&s.location_type&&M(s.location_type,s.location_type==="PROPERTY"?Number(s.property_id):s.location_type==="FLOOR"?Number(s.floor_id):Number(s.rental_unit_id))},[p,s,r,n,t,f,o,i,G,y,W,Q,V,M,Y,j,$,m,c,w,_e,q,ee,te,ke,O,A,Z,le,H]}class On extends pt{constructor(e){super(),gt(this,e,Dn,Vn,rt,{form:16,properties:17,floors:18,rental_unit:0,meter:19},null,[-1,-1])}}function Zt(a,e,l){const t=a.slice();return t[28]=e[l],t}function xt(a,e,l){const t=a.slice();return t[31]=e[l],t}function el(a,e,l){const t=a.slice();return t[34]=e[l],t}function Fn(a){let e,l,t,n=a[2]?"Edit":"Add",r,s,f,o,i,$,m;return o=new dt({props:{variant:"outline",$$slots:{default:[Mn]},$$scope:{ctx:a}}}),o.$on("click",a[26]),$=new On({props:{form:a[10]??a[11],properties:a[6]??[],floors:a[5]??[],rental_unit:a[4]??[],meter:a[2]}}),$.$on("meterAdded",a[15]),$.$on("meterUpdated",a[15]),{c(){e=P("div"),l=P("div"),t=P("h2"),r=R(n),s=R(" Meter"),f=N(),E(o.$$.fragment),i=N(),E($.$$.fragment),this.h()},l(c){e=L(c,"DIV",{class:!0});var p=F(e);l=L(p,"DIV",{class:!0});var w=F(l);t=L(w,"H2",{class:!0});var U=F(t);r=C(U,n),s=C(U," Meter"),U.forEach(u),f=I(w),k(o.$$.fragment,w),w.forEach(u),i=I(p),k($.$$.fragment,p),p.forEach(u),this.h()},h(){B(t,"class","text-xl font-bold"),B(l,"class","flex justify-between items-center"),B(e,"class","space-y-4")},m(c,p){v(c,e,p),b(e,l),b(l,t),b(t,r),b(t,s),b(l,f),S(o,l,null),b(e,i),S($,e,null),m=!0},p(c,p){(!m||p[0]&4)&&n!==(n=c[2]?"Edit":"Add")&&K(r,n);const w={};p[1]&64&&(w.$$scope={dirty:p,ctx:c}),o.$set(w);const U={};p[0]&1024&&(U.form=c[10]??c[11]),p[0]&64&&(U.properties=c[6]??[]),p[0]&32&&(U.floors=c[5]??[]),p[0]&16&&(U.rental_unit=c[4]??[]),p[0]&4&&(U.meter=c[2]),$.$set(U)},i(c){m||(_(o.$$.fragment,c),_($.$$.fragment,c),m=!0)},o(c){h(o.$$.fragment,c),h($.$$.fragment,c),m=!1},d(c){c&&u(e),T(o),T($)}}}function Un(a){let e,l,t,n="Meters",r,s,f,o,i,$,m,c,p,w,U,G,y,W,Q,V,M,Y,j,_e,q=(a[8]||a[7])&&tl(a);i=new et({props:{type:"text",placeholder:"Search meters...",value:a[0]}}),i.$on("input",a[24]),c=new he({props:{for:"type",$$slots:{default:[Yn]},$$scope:{ctx:a}}}),w=new Ue({props:{onSelectedChange:a[12],$$slots:{default:[Hn]},$$scope:{ctx:a}}}),y=new he({props:{for:"status",$$slots:{default:[zn]},$$scope:{ctx:a}}}),Q=new Ue({props:{onSelectedChange:a[13],$$slots:{default:[Xn]},$$scope:{ctx:a}}});const ee=[er,xn,Zn],te=[];function ke(O,A){return O[3].length===0?1:2}return Y=ke(a),j=te[Y]=ee[Y](a),{c(){e=P("div"),l=P("div"),t=P("h1"),t.textContent=n,r=N(),q&&q.c(),s=N(),f=P("div"),o=P("div"),E(i.$$.fragment),$=N(),m=P("div"),E(c.$$.fragment),p=N(),E(w.$$.fragment),U=N(),G=P("div"),E(y.$$.fragment),W=N(),E(Q.$$.fragment),V=N(),M=P("div"),j.c(),this.h()},l(O){e=L(O,"DIV",{class:!0});var A=F(e);l=L(A,"DIV",{class:!0});var Z=F(l);t=L(Z,"H1",{class:!0,"data-svelte-h":!0}),ze(t)!=="svelte-1f6de1u"&&(t.textContent=n),r=I(Z),q&&q.l(Z),Z.forEach(u),s=I(A),f=L(A,"DIV",{class:!0});var le=F(f);o=L(le,"DIV",{});var H=F(o);k(i.$$.fragment,H),H.forEach(u),$=I(le),m=L(le,"DIV",{});var g=F(m);k(c.$$.fragment,g),p=I(g),k(w.$$.fragment,g),g.forEach(u),U=I(le),G=L(le,"DIV",{});var z=F(G);k(y.$$.fragment,z),W=I(z),k(Q.$$.fragment,z),z.forEach(u),le.forEach(u),V=I(A),M=L(A,"DIV",{class:!0});var ne=F(M);j.l(ne),ne.forEach(u),A.forEach(u),this.h()},h(){B(t,"class","text-2xl font-bold"),B(l,"class","flex justify-between items-center"),B(f,"class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mb-6"),B(M,"class","grid gap-4"),B(e,"class","space-y-4")},m(O,A){v(O,e,A),b(e,l),b(l,t),b(l,r),q&&q.m(l,null),b(e,s),b(e,f),b(f,o),S(i,o,null),b(f,$),b(f,m),S(c,m,null),b(m,p),S(w,m,null),b(f,U),b(f,G),S(y,G,null),b(G,W),S(Q,G,null),b(e,V),b(e,M),te[Y].m(M,null),_e=!0},p(O,A){O[8]||O[7]?q?(q.p(O,A),A[0]&384&&_(q,1)):(q=tl(O),q.c(),_(q,1),q.m(l,null)):q&&(we(),h(q,1,1,()=>{q=null}),Ee());const Z={};A[0]&1&&(Z.value=O[0]),i.$set(Z);const le={};A[1]&64&&(le.$$scope={dirty:A,ctx:O}),c.$set(le);const H={};A[1]&64&&(H.$$scope={dirty:A,ctx:O}),w.$set(H);const g={};A[1]&64&&(g.$$scope={dirty:A,ctx:O}),y.$set(g);const z={};A[1]&64&&(z.$$scope={dirty:A,ctx:O}),Q.$set(z);let ne=Y;Y=ke(O),Y===ne?te[Y].p(O,A):(we(),h(te[ne],1,1,()=>{te[ne]=null}),Ee(),j=te[Y],j?j.p(O,A):(j=te[Y]=ee[Y](O),j.c()),_(j,1),j.m(M,null))},i(O){_e||(_(q),_(i.$$.fragment,O),_(c.$$.fragment,O),_(w.$$.fragment,O),_(y.$$.fragment,O),_(Q.$$.fragment,O),_(j),_e=!0)},o(O){h(q),h(i.$$.fragment,O),h(c.$$.fragment,O),h(w.$$.fragment,O),h(y.$$.fragment,O),h(Q.$$.fragment,O),h(j),_e=!1},d(O){O&&u(e),q&&q.d(),T(i),T(c),T(w),T(y),T(Q),te[Y].d()}}}function Mn(a){let e;return{c(){e=R("Cancel")},l(l){e=C(l,"Cancel")},m(l,t){v(l,e,t)},d(l){l&&u(e)}}}function tl(a){let e,l;return e=new dt({props:{$$slots:{default:[yn]},$$scope:{ctx:a}}}),e.$on("click",a[23]),{c(){E(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,n){S(e,t,n),l=!0},p(t,n){const r={};n[1]&64&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){h(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function yn(a){let e;return{c(){e=R("Add Meter")},l(l){e=C(l,"Add Meter")},m(l,t){v(l,e,t)},d(l){l&&u(e)}}}function Yn(a){let e;return{c(){e=R("Type")},l(l){e=C(l,"Type")},m(l,t){v(l,e,t)},d(l){l&&u(e)}}}function jn(a){let e,l;return e=new Ye({props:{placeholder:"Select type"}}),{c(){E(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,n){S(e,t,n),l=!0},p:pe,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){h(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function qn(a){let e;return{c(){e=R("All Types")},l(l){e=C(l,"All Types")},m(l,t){v(l,e,t)},d(l){l&&u(e)}}}function Bn(a){let e=a[34]+"",l;return{c(){l=R(e)},l(t){l=C(t,e)},m(t,n){v(t,l,n)},p:pe,d(t){t&&u(l)}}}function ll(a){let e,l;return e=new ce({props:{value:a[34],$$slots:{default:[Bn]},$$scope:{ctx:a}}}),{c(){E(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,n){S(e,t,n),l=!0},p(t,n){const r={};n[1]&64&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){h(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function Wn(a){let e,l,t,n;e=new ce({props:{value:"",$$slots:{default:[qn]},$$scope:{ctx:a}}});let r=ve(Object.values(tt.Values)),s=[];for(let o=0;o<r.length;o+=1)s[o]=ll(el(a,r,o));const f=o=>h(s[o],1,1,()=>{s[o]=null});return{c(){E(e.$$.fragment),l=N();for(let o=0;o<s.length;o+=1)s[o].c();t=X()},l(o){k(e.$$.fragment,o),l=I(o);for(let i=0;i<s.length;i+=1)s[i].l(o);t=X()},m(o,i){S(e,o,i),v(o,l,i);for(let $=0;$<s.length;$+=1)s[$]&&s[$].m(o,i);v(o,t,i),n=!0},p(o,i){const $={};if(i[1]&64&&($.$$scope={dirty:i,ctx:o}),e.$set($),i&0){r=ve(Object.values(tt.Values));let m;for(m=0;m<r.length;m+=1){const c=el(o,r,m);s[m]?(s[m].p(c,i),_(s[m],1)):(s[m]=ll(c),s[m].c(),_(s[m],1),s[m].m(t.parentNode,t))}for(we(),m=r.length;m<s.length;m+=1)f(m);Ee()}},i(o){if(!n){_(e.$$.fragment,o);for(let i=0;i<r.length;i+=1)_(s[i]);n=!0}},o(o){h(e.$$.fragment,o),s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)h(s[i]);n=!1},d(o){o&&(u(l),u(t)),T(e,o),Ge(s,o)}}}function Hn(a){let e,l,t,n;return e=new Me({props:{$$slots:{default:[jn]},$$scope:{ctx:a}}}),t=new ye({props:{$$slots:{default:[Wn]},$$scope:{ctx:a}}}),{c(){E(e.$$.fragment),l=N(),E(t.$$.fragment)},l(r){k(e.$$.fragment,r),l=I(r),k(t.$$.fragment,r)},m(r,s){S(e,r,s),v(r,l,s),S(t,r,s),n=!0},p(r,s){const f={};s[1]&64&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const o={};s[1]&64&&(o.$$scope={dirty:s,ctx:r}),t.$set(o)},i(r){n||(_(e.$$.fragment,r),_(t.$$.fragment,r),n=!0)},o(r){h(e.$$.fragment,r),h(t.$$.fragment,r),n=!1},d(r){r&&u(l),T(e,r),T(t,r)}}}function zn(a){let e;return{c(){e=R("Status")},l(l){e=C(l,"Status")},m(l,t){v(l,e,t)},d(l){l&&u(e)}}}function Gn(a){let e,l;return e=new Ye({props:{placeholder:"Select status"}}),{c(){E(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,n){S(e,t,n),l=!0},p:pe,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){h(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function Kn(a){let e;return{c(){e=R("All Statuses")},l(l){e=C(l,"All Statuses")},m(l,t){v(l,e,t)},d(l){l&&u(e)}}}function Qn(a){let e=a[31]+"",l;return{c(){l=R(e)},l(t){l=C(t,e)},m(t,n){v(t,l,n)},p:pe,d(t){t&&u(l)}}}function nl(a){let e,l;return e=new ce({props:{value:a[31],$$slots:{default:[Qn]},$$scope:{ctx:a}}}),{c(){E(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,n){S(e,t,n),l=!0},p(t,n){const r={};n[1]&64&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){h(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function Jn(a){let e,l,t,n;e=new ce({props:{value:"",$$slots:{default:[Kn]},$$scope:{ctx:a}}});let r=ve(Object.values(lt.Values)),s=[];for(let o=0;o<r.length;o+=1)s[o]=nl(xt(a,r,o));const f=o=>h(s[o],1,1,()=>{s[o]=null});return{c(){E(e.$$.fragment),l=N();for(let o=0;o<s.length;o+=1)s[o].c();t=X()},l(o){k(e.$$.fragment,o),l=I(o);for(let i=0;i<s.length;i+=1)s[i].l(o);t=X()},m(o,i){S(e,o,i),v(o,l,i);for(let $=0;$<s.length;$+=1)s[$]&&s[$].m(o,i);v(o,t,i),n=!0},p(o,i){const $={};if(i[1]&64&&($.$$scope={dirty:i,ctx:o}),e.$set($),i&0){r=ve(Object.values(lt.Values));let m;for(m=0;m<r.length;m+=1){const c=xt(o,r,m);s[m]?(s[m].p(c,i),_(s[m],1)):(s[m]=nl(c),s[m].c(),_(s[m],1),s[m].m(t.parentNode,t))}for(we(),m=r.length;m<s.length;m+=1)f(m);Ee()}},i(o){if(!n){_(e.$$.fragment,o);for(let i=0;i<r.length;i+=1)_(s[i]);n=!0}},o(o){h(e.$$.fragment,o),s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)h(s[i]);n=!1},d(o){o&&(u(l),u(t)),T(e,o),Ge(s,o)}}}function Xn(a){let e,l,t,n;return e=new Me({props:{$$slots:{default:[Gn]},$$scope:{ctx:a}}}),t=new ye({props:{$$slots:{default:[Jn]},$$scope:{ctx:a}}}),{c(){E(e.$$.fragment),l=N(),E(t.$$.fragment)},l(r){k(e.$$.fragment,r),l=I(r),k(t.$$.fragment,r)},m(r,s){S(e,r,s),v(r,l,s),S(t,r,s),n=!0},p(r,s){const f={};s[1]&64&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const o={};s[1]&64&&(o.$$scope={dirty:s,ctx:r}),t.$set(o)},i(r){n||(_(e.$$.fragment,r),_(t.$$.fragment,r),n=!0)},o(r){h(e.$$.fragment,r),h(t.$$.fragment,r),n=!1},d(r){r&&u(l),T(e,r),T(t,r)}}}function Zn(a){let e=[],l=new Map,t,n,r=ve(a[3]);const s=f=>f[28].id;for(let f=0;f<r.length;f+=1){let o=Zt(a,r,f),i=s(o);l.set(i,e[f]=al(i,o))}return{c(){for(let f=0;f<e.length;f+=1)e[f].c();t=X()},l(f){for(let o=0;o<e.length;o+=1)e[o].l(f);t=X()},m(f,o){for(let i=0;i<e.length;i+=1)e[i]&&e[i].m(f,o);v(f,t,o),n=!0},p(f,o){o[0]&82312&&(r=ve(f[3]),we(),e=Sl(e,o,s,1,f,r,l,t.parentNode,Tl,al,t,Zt),Ee())},i(f){if(!n){for(let o=0;o<r.length;o+=1)_(e[o]);n=!0}},o(f){for(let o=0;o<e.length;o+=1)h(e[o]);n=!1},d(f){f&&u(t);for(let o=0;o<e.length;o+=1)e[o].d(f)}}}function xn(a){let e,l="No meters found matching your criteria";return{c(){e=P("div"),e.textContent=l,this.h()},l(t){e=L(t,"DIV",{class:!0,"data-svelte-h":!0}),ze(e)!=="svelte-1qkfnwd"&&(e.textContent=l),this.h()},h(){B(e,"class","text-center py-8 text-gray-500")},m(t,n){v(t,e,n)},p:pe,i:pe,o:pe,d(t){t&&u(e)}}}function er(a){let e,l,t;return l=new Dl({props:{class:"h-8 w-8 animate-spin"}}),{c(){e=P("div"),E(l.$$.fragment),this.h()},l(n){e=L(n,"DIV",{class:!0});var r=F(e);k(l.$$.fragment,r),r.forEach(u),this.h()},h(){B(e,"class","flex justify-center items-center py-8")},m(n,r){v(n,e,r),S(l,e,null),t=!0},p:pe,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){h(l.$$.fragment,n),t=!1},d(n){n&&u(e),T(l)}}}function tr(a){let e=a[28].type+"",l;return{c(){l=R(e)},l(t){l=C(t,e)},m(t,n){v(t,l,n)},p(t,n){n[0]&8&&e!==(e=t[28].type+"")&&K(l,e)},d(t){t&&u(l)}}}function lr(a){let e=a[28].status+"",l;return{c(){l=R(e)},l(t){l=C(t,e)},m(t,n){v(t,l,n)},p(t,n){n[0]&8&&e!==(e=t[28].status+"")&&K(l,e)},d(t){t&&u(l)}}}function rl(a){let e,l,t=nt(a[28].latest_reading.value)+"",n,r,s,f,o=new Date(a[28].latest_reading.date).toLocaleDateString()+"",i,$;return{c(){e=P("div"),l=R("Latest Reading: "),n=R(t),r=N(),s=P("span"),f=R("("),i=R(o),$=R(")"),this.h()},l(m){e=L(m,"DIV",{class:!0});var c=F(e);l=C(c,"Latest Reading: "),n=C(c,t),r=I(c),s=L(c,"SPAN",{class:!0});var p=F(s);f=C(p,"("),i=C(p,o),$=C(p,")"),p.forEach(u),c.forEach(u),this.h()},h(){B(s,"class","text-xs"),B(e,"class","text-sm text-gray-500")},m(m,c){v(m,e,c),b(e,l),b(e,n),b(e,r),b(e,s),b(s,f),b(s,i),b(s,$)},p(m,c){c[0]&8&&t!==(t=nt(m[28].latest_reading.value)+"")&&K(n,t),c[0]&8&&o!==(o=new Date(m[28].latest_reading.date).toLocaleDateString()+"")&&K(i,o)},d(m){m&&u(e)}}}function nr(a){let e,l,t=a[28].name+"",n,r,s,f,o,i,$,m;s=new Lt({props:{variant:ol(a[28].type),$$slots:{default:[tr]},$$scope:{ctx:a}}}),o=new Lt({props:{class:il(a[28].status),$$slots:{default:[lr]},$$scope:{ctx:a}}});let c=a[28].latest_reading&&rl(a);return{c(){e=P("div"),l=P("span"),n=R(t),r=N(),E(s.$$.fragment),f=N(),E(o.$$.fragment),i=N(),c&&c.c(),$=X(),this.h()},l(p){e=L(p,"DIV",{class:!0});var w=F(e);l=L(w,"SPAN",{});var U=F(l);n=C(U,t),U.forEach(u),r=I(w),k(s.$$.fragment,w),f=I(w),k(o.$$.fragment,w),w.forEach(u),i=I(p),c&&c.l(p),$=X(),this.h()},h(){B(e,"class","flex items-center space-x-2")},m(p,w){v(p,e,w),b(e,l),b(l,n),b(e,r),S(s,e,null),b(e,f),S(o,e,null),v(p,i,w),c&&c.m(p,w),v(p,$,w),m=!0},p(p,w){(!m||w[0]&8)&&t!==(t=p[28].name+"")&&K(n,t);const U={};w[0]&8&&(U.variant=ol(p[28].type)),w[0]&8|w[1]&64&&(U.$$scope={dirty:w,ctx:p}),s.$set(U);const G={};w[0]&8&&(G.class=il(p[28].status)),w[0]&8|w[1]&64&&(G.$$scope={dirty:w,ctx:p}),o.$set(G),p[28].latest_reading?c?c.p(p,w):(c=rl(p),c.c(),c.m($.parentNode,$)):c&&(c.d(1),c=null)},i(p){m||(_(s.$$.fragment,p),_(o.$$.fragment,p),m=!0)},o(p){h(s.$$.fragment,p),h(o.$$.fragment,p),m=!1},d(p){p&&(u(e),u(i),u($)),T(s),T(o),c&&c.d(p)}}}function rr(a){let e,l;return e=new Cl({props:{class:"flex justify-between items-center",$$slots:{default:[nr]},$$scope:{ctx:a}}}),{c(){E(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,n){S(e,t,n),l=!0},p(t,n){const r={};n[0]&8|n[1]&64&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){h(e.$$.fragment,t),l=!1},d(t){T(e,t)}}}function sl(a){let e,l=a[28].notes+"",t;return{c(){e=P("p"),t=R(l),this.h()},l(n){e=L(n,"P",{class:!0});var r=F(e);t=C(r,l),r.forEach(u),this.h()},h(){B(e,"class","mt-2 text-sm text-gray-500")},m(n,r){v(n,e,r),b(e,t)},p(n,r){r[0]&8&&l!==(l=n[28].notes+"")&&K(t,l)},d(n){n&&u(e)}}}function sr(a){let e,l,t,n="Location",r,s,f=a[16](a[28])+"",o,i,$,m,c="Unit Rate",p,w,U=nt(a[28].unit_rate)+"",G,y,W,Q,V=a[28].notes&&sl(a);return{c(){e=P("div"),l=P("div"),t=P("p"),t.textContent=n,r=N(),s=P("p"),o=R(f),i=N(),$=P("div"),m=P("p"),m.textContent=c,p=N(),w=P("p"),G=R(U),y=R(" per unit"),W=N(),V&&V.c(),Q=X(),this.h()},l(M){e=L(M,"DIV",{class:!0});var Y=F(e);l=L(Y,"DIV",{});var j=F(l);t=L(j,"P",{class:!0,"data-svelte-h":!0}),ze(t)!=="svelte-a2mrii"&&(t.textContent=n),r=I(j),s=L(j,"P",{});var _e=F(s);o=C(_e,f),_e.forEach(u),j.forEach(u),i=I(Y),$=L(Y,"DIV",{});var q=F($);m=L(q,"P",{class:!0,"data-svelte-h":!0}),ze(m)!=="svelte-128smd3"&&(m.textContent=c),p=I(q),w=L(q,"P",{});var ee=F(w);G=C(ee,U),y=C(ee," per unit"),ee.forEach(u),q.forEach(u),Y.forEach(u),W=I(M),V&&V.l(M),Q=X(),this.h()},h(){B(t,"class","text-sm font-medium text-gray-500"),B(m,"class","text-sm font-medium text-gray-500"),B(e,"class","grid grid-cols-1 md:grid-cols-2 gap-4")},m(M,Y){v(M,e,Y),b(e,l),b(l,t),b(l,r),b(l,s),b(s,o),b(e,i),b(e,$),b($,m),b($,p),b($,w),b(w,G),b(w,y),v(M,W,Y),V&&V.m(M,Y),v(M,Q,Y)},p(M,Y){Y[0]&8&&f!==(f=M[16](M[28])+"")&&K(o,f),Y[0]&8&&U!==(U=nt(M[28].unit_rate)+"")&&K(G,U),M[28].notes?V?V.p(M,Y):(V=sl(M),V.c(),V.m(Q.parentNode,Q)):V&&(V.d(1),V=null)},d(M){M&&(u(e),u(W),u(Q)),V&&V.d(M)}}}function ar(a){let e,l,t,n,r;return e=new Rl({props:{$$slots:{default:[rr]},$$scope:{ctx:a}}}),t=new Il({props:{$$slots:{default:[sr]},$$scope:{ctx:a}}}),{c(){E(e.$$.fragment),l=N(),E(t.$$.fragment),n=N()},l(s){k(e.$$.fragment,s),l=I(s),k(t.$$.fragment,s),n=I(s)},m(s,f){S(e,s,f),v(s,l,f),S(t,s,f),v(s,n,f),r=!0},p(s,f){const o={};f[0]&8|f[1]&64&&(o.$$scope={dirty:f,ctx:s}),e.$set(o);const i={};f[0]&8|f[1]&64&&(i.$$scope={dirty:f,ctx:s}),t.$set(i)},i(s){r||(_(e.$$.fragment,s),_(t.$$.fragment,s),r=!0)},o(s){h(e.$$.fragment,s),h(t.$$.fragment,s),r=!1},d(s){s&&(u(l),u(n)),T(e,s),T(t,s)}}}function al(a,e){let l,t,n;function r(){return e[25](e[28])}return t=new Nl({props:{class:"cursor-pointer "+(e[8]||e[7]?"hover:bg-gray-50":""),$$slots:{default:[ar]},$$scope:{ctx:e}}}),t.$on("click",r),{key:a,first:null,c(){l=X(),E(t.$$.fragment),this.h()},l(s){l=X(),k(t.$$.fragment,s),this.h()},h(){this.first=l},m(s,f){v(s,l,f),S(t,s,f),n=!0},p(s,f){e=s;const o={};f[0]&384&&(o.class="cursor-pointer "+(e[8]||e[7]?"hover:bg-gray-50":"")),f[0]&8|f[1]&64&&(o.$$scope={dirty:f,ctx:e}),t.$set(o)},i(s){n||(_(t.$$.fragment,s),n=!0)},o(s){h(t.$$.fragment,s),n=!1},d(s){s&&u(l),T(t,s)}}}function fl(a){let e,l='<p class="text-yellow-800">You do not have permission to manage meters. Please contact your administrator.</p>';return{c(){e=P("div"),e.innerHTML=l,this.h()},l(t){e=L(t,"DIV",{class:!0,"data-svelte-h":!0}),ze(e)!=="svelte-1g060nc"&&(e.innerHTML=l),this.h()},h(){B(e,"class","mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg")},m(t,n){v(t,e,n)},d(t){t&&u(e)}}}function fr(a){let e,l,t,n,r,s,f,o=or;const i=[Un,Fn],$=[];function m(p,w){return p[1]?1:0}t=m(a),n=$[t]=i[t](a);let c=!a[8]&&!a[7]&&!a[9]&&fl();return{c(){e=P("div"),l=N(),n.c(),r=N(),c&&c.c(),s=X(),this.h()},l(p){e=L(p,"DIV",{class:!0});var w=F(e);l=I(w),n.l(w),w.forEach(u),r=I(p),c&&c.l(p),s=X(),this.h()},h(){B(e,"class","space-y-6")},m(p,w){v(p,e,w),b(e,l),$[t].m(e,null),v(p,r,w),c&&c.m(p,w),v(p,s,w),f=!0},p(p,w){let U=t;t=m(p),t===U?$[t].p(p,w):(we(),h($[U],1,1,()=>{$[U]=null}),Ee(),n=$[t],n?n.p(p,w):(n=$[t]=i[t](p),n.c()),_(n,1),n.m(e,null)),!p[8]&&!p[7]&&!p[9]?c||(c=fl(),c.c(),c.m(s.parentNode,s)):c&&(c.d(1),c=null)},i(p){f||(_(o),_(n),f=!0)},o(p){h(o),h(n),f=!1},d(p){p&&(u(e),u(r),u(s)),$[t].d(),c&&c.d(p)}}}let or=null;function ol(a){switch(a){case"ELECTRICITY":return"default";case"WATER":return"secondary";case"INTERNET":return"outline";default:return"default"}}function il(a){switch(a){case"ACTIVE":return"bg-green-100 text-green-800";case"INACTIVE":return"bg-gray-100 text-gray-800";case"MAINTENANCE":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}}function nt(a){return a.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function ir(a,e,l){let t,n,r,s,f,o,i,$,m,{data:c}=e,p=!1,w,U,G,y="",W="name",Q="asc";const V={id:crypto.randomUUID(),valid:!0,posted:!1,errors:{},data:{name:"",type:"ELECTRICITY",status:"ACTIVE",location_type:"PROPERTY",property_id:null,floor_id:null,rental_unit_id:null,unit_rate:0,initial_reading:0,is_active:!0,notes:null}};function M(A){l(18,U=A==null?void 0:A.value)}function Y(A){l(19,G=A==null?void 0:A.value)}function j(A){(o||i)&&(l(2,w=A),l(1,p=!0))}function _e(){l(1,p=!1),l(2,w=void 0)}function q(A){var Z;switch(A.location_type){case"PROPERTY":const le=r==null?void 0:r.find(z=>z.id===A.property_id);return le?`Property: ${le.name}`:"Unknown Property";case"FLOOR":const H=s==null?void 0:s.find(z=>z.id===A.floor_id);return H?`Floor ${H.floor_number}${H.property?` - ${H.property.name}`:""}`:"Unknown Floor";case"RENTAL_UNIT":const g=f==null?void 0:f.find(z=>z.id===A.rental_unit_id);return g?`Rental_unit ${g.number}${(Z=g.floor)!=null&&Z.property?` - ${g.floor.property.name}`:""}`:"Unknown Rental_unit";default:return"Unknown Location"}}const ee=()=>{l(2,w=void 0),l(1,p=!0)},te=A=>l(0,y=A.currentTarget.value),ke=A=>j(A),O=()=>{l(1,p=!1),l(2,w=void 0)};return a.$$set=A=>{"data"in A&&l(17,c=A.data)},a.$$.update=()=>{a.$$.dirty[0]&131072&&l(10,{form:t,meters:n=[],properties:r=[],floors:s=[],rental_unit:f=[],isAdminLevel:o,isUtility:i,isMaintenance:$}=c,t,(l(22,n),l(17,c)),(l(6,r),l(17,c)),(l(5,s),l(17,c)),(l(4,f),l(17,c)),(l(8,o),l(17,c)),(l(7,i),l(17,c)),(l(9,$),l(17,c))),a.$$.dirty[0]&8126465&&l(3,m=(n??[]).filter(A=>{if(!A)return!1;const Z=!U||A.type===U,le=!G||A.status===G,H=!y||A.name.toLowerCase().includes(y.toLowerCase())||q(A).toLowerCase().includes(y.toLowerCase());return Z&&le&&H}).sort((A,Z)=>{var H,g;switch(W){case"name":return 1*A.name.localeCompare(Z.name);case"type":return 1*A.type.localeCompare(Z.type);case"status":return 1*A.status.localeCompare(Z.status);case"reading":const z=((H=A.latest_reading)==null?void 0:H.value)||0,ne=((g=Z.latest_reading)==null?void 0:g.value)||0;return 1*(z-ne);default:return 0}})||[])},[y,p,w,m,f,s,r,i,o,$,t,V,M,Y,j,_e,q,c,U,G,W,Q,n,ee,te,ke,O]}class Pr extends pt{constructor(e){super(),gt(this,e,ir,fr,rt,{data:17},null,[-1,-1])}}export{Pr as component};
