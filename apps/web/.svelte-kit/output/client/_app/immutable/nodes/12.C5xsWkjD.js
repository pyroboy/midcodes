import{s as mt,a as p,b as $,e as nt,f as _,g as y,p as Z,j as g,d as u,k as h,i as P,l as a,z as pt,c as _t,t as G,h as U,r as dt,m as K,V as vt,n as He,v as at,y as ht}from"../chunks/scheduler.O3yElrGi.js";import{S as $t,i as gt,c as oe,a as ie,m as re,t as z,e as qe,b as Y,d as ue,g as We}from"../chunks/index.ZL6-Qda4.js";import{e as st}from"../chunks/each.DIkwcrxx.js";import{s as bt}from"../chunks/formData.Cqbx9YEq.js";import{S as Et}from"../chunks/SuperDebug.BSipUZAZ.js";import"../chunks/index.D5P3bu3G.js";import"../chunks/utils.DSScpxlp.js";import{I as Dt}from"../chunks/input.CuGHtir4.js";import{z as J}from"../chunks/index.D4CdqmV7.js";import"../chunks/string.DBeRn4Bt.js";import{z as It}from"../chunks/zod.Cm6Z4om1.js";import{B as be}from"../chunks/button.UQtnxgui.js";const Ct={enumValues:["RENT","UTILITY","PENALTY","MAINTENANCE","SERVICE"]},At={enumValues:["ELECTRICITY","WATER","INTERNET"]},yt={enumValues:["PENDING","PARTIAL","PAID","OVERDUE"]},kt=J.object({id:J.number().optional(),leaseId:J.number(),type:J.enum(Ct.enumValues),utilityType:J.enum(At.enumValues).optional(),amount:J.number().min(0),paidAmount:J.number().min(0).default(0),balance:J.number().min(0),status:J.enum(yt.enumValues).default("PENDING"),dueDate:J.date(),billingDate:J.date(),penaltyAmount:J.number().min(0).default(0),notes:J.string().optional()});function ot(n,e,l){const t=n.slice();return t[19]=e[l],t}function Nt(n){let e;return{c(){e=G("Edit")},l(l){e=U(l,"Edit")},m(l,t){P(l,e,t)},d(l){l&&u(e)}}}function Tt(n){let e;return{c(){e=G("Delete")},l(l){e=U(l,"Delete")},m(l,t){P(l,e,t)},d(l){l&&u(e)}}}function it(n){let e,l,t="Notes:",s,d=n[19].notes+"",r;return{c(){e=p("div"),l=p("strong"),l.textContent=t,s=$(),r=G(d),this.h()},l(k){e=_(k,"DIV",{class:!0});var c=y(e);l=_(c,"STRONG",{"data-svelte-h":!0}),Z(l)!=="svelte-5k9uvd"&&(l.textContent=t),s=g(c),r=U(c,d),c.forEach(u),this.h()},h(){h(e,"class","mt-2")},m(k,c){P(k,e,c),a(e,l),a(e,s),a(e,r)},p(k,c){c&1&&d!==(d=k[19].notes+"")&&K(r,d)},d(k){k&&u(e)}}}function rt(n){let e,l,t,s,d=n[19].lease.leaseName+"",r,k,c,b="|",N,A,w=n[19].type+"",T,R,O,E="|",v,o,m=n[19].category+"",D,I,j,L,i,f,V,Q,S,B,x,M,ee,fe,Je="Amount:",Pe,_e=n[19].amount+"",Ee,Re,te,de,Ke="Paid:",Le,ve=(n[19].paidAmount||0)+"",De,Ge,le,ce,Qe="Balance:",Ue,he=n[19].amount-(n[19].paidAmount||0)+"",Ie,je,ne,me,Xe="Date Issued:",Fe,$e=new Date(n[19].dateIssued).toLocaleDateString()+"",Ce,ze,ae,pe,Ze="Due Date:",Be,ge=(n[19].dueOn?new Date(n[19].dueOn).toLocaleDateString():"N/A")+"",Ae,Me,ye,H,Ye,xe;function ct(){return n[9](n[19])}L=new be({props:{class:"mr-2",$$slots:{default:[Nt]},$$scope:{ctx:n}}}),L.$on("click",ct),B=new be({props:{type:"submit",variant:"destructive",$$slots:{default:[Tt]},$$scope:{ctx:n}}});let F=n[19].notes&&it(n);return{c(){e=p("li"),l=p("div"),t=p("div"),s=p("span"),r=G(d),k=$(),c=p("span"),c.textContent=b,N=$(),A=p("span"),T=G(w),R=$(),O=p("span"),O.textContent=E,v=$(),o=p("span"),D=G(m),I=$(),j=p("div"),oe(L.$$.fragment),i=$(),f=p("form"),V=p("input"),S=$(),oe(B.$$.fragment),x=$(),M=p("div"),ee=p("div"),fe=p("strong"),fe.textContent=Je,Pe=$(),Ee=G(_e),Re=$(),te=p("div"),de=p("strong"),de.textContent=Ke,Le=$(),De=G(ve),Ge=$(),le=p("div"),ce=p("strong"),ce.textContent=Qe,Ue=$(),Ie=G(he),je=$(),ne=p("div"),me=p("strong"),me.textContent=Xe,Fe=$(),Ce=G($e),ze=$(),ae=p("div"),pe=p("strong"),pe.textContent=Ze,Be=$(),Ae=G(ge),Me=$(),F&&F.c(),ye=$(),this.h()},l(q){e=_(q,"LI",{class:!0});var C=y(e);l=_(C,"DIV",{class:!0});var se=y(l);t=_(se,"DIV",{});var W=y(t);s=_(W,"SPAN",{class:!0});var et=y(s);r=U(et,d),et.forEach(u),k=g(W),c=_(W,"SPAN",{class:!0,"data-svelte-h":!0}),Z(c)!=="svelte-1hxruir"&&(c.textContent=b),N=g(W),A=_(W,"SPAN",{class:!0});var tt=y(A);T=U(tt,w),tt.forEach(u),R=g(W),O=_(W,"SPAN",{class:!0,"data-svelte-h":!0}),Z(O)!=="svelte-1hxruir"&&(O.textContent=E),v=g(W),o=_(W,"SPAN",{class:!0});var lt=y(o);D=U(lt,m),lt.forEach(u),W.forEach(u),I=g(se),j=_(se,"DIV",{});var ke=y(j);ie(L.$$.fragment,ke),i=g(ke),f=_(ke,"FORM",{method:!0,action:!0,class:!0});var Ne=y(f);V=_(Ne,"INPUT",{type:!0,name:!0}),S=g(Ne),ie(B.$$.fragment,Ne),Ne.forEach(u),ke.forEach(u),se.forEach(u),x=g(C),M=_(C,"DIV",{class:!0});var X=y(M);ee=_(X,"DIV",{});var Te=y(ee);fe=_(Te,"STRONG",{"data-svelte-h":!0}),Z(fe)!=="svelte-9u2o5c"&&(fe.textContent=Je),Pe=g(Te),Ee=U(Te,_e),Te.forEach(u),Re=g(X),te=_(X,"DIV",{});var Se=y(te);de=_(Se,"STRONG",{"data-svelte-h":!0}),Z(de)!=="svelte-1pxy306"&&(de.textContent=Ke),Le=g(Se),De=U(Se,ve),Se.forEach(u),Ge=g(X),le=_(X,"DIV",{});var Ve=y(le);ce=_(Ve,"STRONG",{"data-svelte-h":!0}),Z(ce)!=="svelte-1bu72em"&&(ce.textContent=Qe),Ue=g(Ve),Ie=U(Ve,he),Ve.forEach(u),je=g(X),ne=_(X,"DIV",{});var we=y(ne);me=_(we,"STRONG",{"data-svelte-h":!0}),Z(me)!=="svelte-14kvxud"&&(me.textContent=Xe),Fe=g(we),Ce=U(we,$e),we.forEach(u),ze=g(X),ae=_(X,"DIV",{});var Oe=y(ae);pe=_(Oe,"STRONG",{"data-svelte-h":!0}),Z(pe)!=="svelte-17xzdey"&&(pe.textContent=Ze),Be=g(Oe),Ae=U(Oe,ge),Oe.forEach(u),X.forEach(u),Me=g(C),F&&F.l(C),ye=g(C),C.forEach(u),this.h()},h(){h(s,"class","font-bold"),h(c,"class","mx-2"),h(A,"class","text-blue-600"),h(O,"class","mx-2"),h(o,"class","text-green-600"),h(V,"type","hidden"),h(V,"name","id"),V.value=Q=n[19].id,h(f,"method","POST"),h(f,"action","?/delete"),h(f,"class","inline"),h(l,"class","flex justify-between items-start mb-2"),h(M,"class","grid grid-cols-2 gap-2 text-sm"),h(e,"class","bg-gray-100 p-4 rounded shadow")},m(q,C){P(q,e,C),a(e,l),a(l,t),a(t,s),a(s,r),a(t,k),a(t,c),a(t,N),a(t,A),a(A,T),a(t,R),a(t,O),a(t,v),a(t,o),a(o,D),a(l,I),a(l,j),re(L,j,null),a(j,i),a(j,f),a(f,V),a(f,S),re(B,f,null),a(e,x),a(e,M),a(M,ee),a(ee,fe),a(ee,Pe),a(ee,Ee),a(M,Re),a(M,te),a(te,de),a(te,Le),a(te,De),a(M,Ge),a(M,le),a(le,ce),a(le,Ue),a(le,Ie),a(M,je),a(M,ne),a(ne,me),a(ne,Fe),a(ne,Ce),a(M,ze),a(M,ae),a(ae,pe),a(ae,Be),a(ae,Ae),a(e,Me),F&&F.m(e,null),a(e,ye),H=!0,Ye||(xe=dt(n[5].call(null,f)),Ye=!0)},p(q,C){n=q,(!H||C&1)&&d!==(d=n[19].lease.leaseName+"")&&K(r,d),(!H||C&1)&&w!==(w=n[19].type+"")&&K(T,w),(!H||C&1)&&m!==(m=n[19].category+"")&&K(D,m);const se={};C&4194304&&(se.$$scope={dirty:C,ctx:n}),L.$set(se),(!H||C&1&&Q!==(Q=n[19].id))&&(V.value=Q);const W={};C&4194304&&(W.$$scope={dirty:C,ctx:n}),B.$set(W),(!H||C&1)&&_e!==(_e=n[19].amount+"")&&K(Ee,_e),(!H||C&1)&&ve!==(ve=(n[19].paidAmount||0)+"")&&K(De,ve),(!H||C&1)&&he!==(he=n[19].amount-(n[19].paidAmount||0)+"")&&K(Ie,he),(!H||C&1)&&$e!==($e=new Date(n[19].dateIssued).toLocaleDateString()+"")&&K(Ce,$e),(!H||C&1)&&ge!==(ge=(n[19].dueOn?new Date(n[19].dueOn).toLocaleDateString():"N/A")+"")&&K(Ae,ge),n[19].notes?F?F.p(n,C):(F=it(n),F.c(),F.m(e,ye)):F&&(F.d(1),F=null)},i(q){H||(z(L.$$.fragment,q),z(B.$$.fragment,q),H=!0)},o(q){Y(L.$$.fragment,q),Y(B.$$.fragment,q),H=!1},d(q){q&&u(e),ue(L),ue(B),F&&F.d(),Ye=!1,xe()}}}function St(n){let e,l='Click "Add Account" to create a new entry';return{c(){e=p("p"),e.textContent=l,this.h()},l(t){e=_(t,"P",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-e8wjsn"&&(e.textContent=l),this.h()},h(){h(e,"class","text-center text-gray-500 mt-8")},m(t,s){P(t,e,s)},p:He,i:He,o:He,d(t){t&&u(e)}}}function Vt(n){let e,l=n[2]?"Edit":"Add",t,s,d,r,k,c,b,N,A,w,T,R,O,E,v=n[2]&&ut(n);b=new Dt({props:{type:"number",value:(n[1].amount||0)-(n[1].paidAmount||0),disabled:!0,class:"bg-gray-100"}}),A=new be({props:{type:"submit",$$slots:{default:[wt]},$$scope:{ctx:n}}});let o=n[2]&&ft(n);return{c(){e=p("h1"),t=G(l),s=G(" Account"),d=$(),r=p("form"),v&&v.c(),k=$(),c=p("div"),oe(b.$$.fragment),N=$(),oe(A.$$.fragment),w=$(),o&&o.c(),this.h()},l(m){e=_(m,"H1",{class:!0});var D=y(e);t=U(D,l),s=U(D," Account"),D.forEach(u),d=g(m),r=_(m,"FORM",{method:!0,action:!0,class:!0});var I=y(r);v&&v.l(I),k=g(I),c=_(I,"DIV",{class:!0});var j=y(c);ie(b.$$.fragment,j),j.forEach(u),N=g(I),ie(A.$$.fragment,I),w=g(I),o&&o.l(I),I.forEach(u),this.h()},h(){h(e,"class","text-2xl font-bold mb-4"),h(c,"class","space-y-2"),h(r,"method","POST"),h(r,"action",T=n[2]?"?/update":"?/create"),h(r,"class","space-y-4 mb-8")},m(m,D){P(m,e,D),a(e,t),a(e,s),P(m,d,D),P(m,r,D),v&&v.m(r,null),a(r,k),a(r,c),re(b,c,null),a(r,N),re(A,r,null),a(r,w),o&&o.m(r,null),R=!0,O||(E=dt(n[5].call(null,r)),O=!0)},p(m,D){(!R||D&4)&&l!==(l=m[2]?"Edit":"Add")&&K(t,l),m[2]?v?v.p(m,D):(v=ut(m),v.c(),v.m(r,k)):v&&(v.d(1),v=null);const I={};D&2&&(I.value=(m[1].amount||0)-(m[1].paidAmount||0)),b.$set(I);const j={};D&4194308&&(j.$$scope={dirty:D,ctx:m}),A.$set(j),m[2]?o?(o.p(m,D),D&4&&z(o,1)):(o=ft(m),o.c(),z(o,1),o.m(r,null)):o&&(We(),Y(o,1,1,()=>{o=null}),qe()),(!R||D&4&&T!==(T=m[2]?"?/update":"?/create"))&&h(r,"action",T)},i(m){R||(z(b.$$.fragment,m),z(A.$$.fragment,m),z(o),R=!0)},o(m){Y(b.$$.fragment,m),Y(A.$$.fragment,m),Y(o),R=!1},d(m){m&&(u(e),u(d),u(r)),v&&v.d(),ue(b),ue(A),o&&o.d(),O=!1,E()}}}function ut(n){let e,l,t;return{c(){e=p("input"),this.h()},l(s){e=_(s,"INPUT",{type:!0,name:!0}),this.h()},h(){h(e,"type","hidden"),h(e,"name","id")},m(s,d){P(s,e,d),at(e,n[1].id),l||(t=ht(e,"input",n[10]),l=!0)},p(s,d){d&2&&at(e,s[1].id)},d(s){s&&u(e),l=!1,t()}}}function wt(n){let e=n[2]?"Update":"Add",l,t;return{c(){l=G(e),t=G(" Account")},l(s){l=U(s,e),t=U(s," Account")},m(s,d){P(s,l,d),P(s,t,d)},p(s,d){d&4&&e!==(e=s[2]?"Update":"Add")&&K(l,e)},d(s){s&&(u(l),u(t))}}}function ft(n){let e,l;return e=new be({props:{type:"button",$$slots:{default:[Ot]},$$scope:{ctx:n}}}),e.$on("click",n[6]),{c(){oe(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,s){re(e,t,s),l=!0},p(t,s){const d={};s&4194304&&(d.$$scope={dirty:s,ctx:t}),e.$set(d)},i(t){l||(z(e.$$.fragment,t),l=!0)},o(t){Y(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function Ot(n){let e;return{c(){e=G("Cancel")},l(l){e=U(l,"Cancel")},m(l,t){P(l,e,t)},d(l){l&&u(e)}}}function Pt(n){let e=n[3]?"×":"+",l;return{c(){l=G(e)},l(t){l=U(t,e)},m(t,s){P(t,l,s)},p(t,s){s&8&&e!==(e=t[3]?"×":"+")&&K(l,e)},d(t){t&&u(l)}}}function Rt(n){let e,l;return e=new Et({props:{data:n[1]}}),{c(){oe(e.$$.fragment)},l(t){ie(e.$$.fragment,t)},m(t,s){re(e,t,s),l=!0},p(t,s){const d={};s&2&&(d.data=t[1]),e.$set(d)},i(t){l||(z(e.$$.fragment,t),l=!0)},o(t){Y(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function Lt(n){let e,l,t,s="Accounts List",d,r,k,c,b,N,A,w,T,R,O,E,v=st(n[0].billings),o=[];for(let i=0;i<v.length;i+=1)o[i]=rt(ot(n,v,i));const m=i=>Y(o[i],1,1,()=>{o[i]=null}),D=[Vt,St],I=[];function j(i,f){return i[3]?0:1}b=j(n),N=I[b]=D[b](n),T=new be({props:{class:"rounded-full w-16 h-16 flex items-center justify-center text-2xl",$$slots:{default:[Pt]},$$scope:{ctx:n}}}),T.$on("click",n[7]);let L=Rt(n);return{c(){e=p("div"),l=p("div"),t=p("h2"),t.textContent=s,d=$(),r=p("ul");for(let i=0;i<o.length;i+=1)o[i].c();k=$(),c=p("div"),N.c(),A=$(),w=p("div"),oe(T.$$.fragment),R=$(),L.c(),O=nt(),this.h()},l(i){e=_(i,"DIV",{class:!0});var f=y(e);l=_(f,"DIV",{class:!0});var V=y(l);t=_(V,"H2",{class:!0,"data-svelte-h":!0}),Z(t)!=="svelte-7rudfw"&&(t.textContent=s),d=g(V),r=_(V,"UL",{class:!0});var Q=y(r);for(let x=0;x<o.length;x+=1)o[x].l(Q);Q.forEach(u),V.forEach(u),k=g(f),c=_(f,"DIV",{class:!0});var S=y(c);N.l(S),S.forEach(u),f.forEach(u),A=g(i),w=_(i,"DIV",{class:!0});var B=y(w);ie(T.$$.fragment,B),B.forEach(u),R=g(i),L.l(i),O=nt(),this.h()},h(){h(t,"class","text-xl font-bold mb-2"),h(r,"class","space-y-2"),h(l,"class","w-2/3 pr-4"),h(c,"class","w-1/3 pl-4"),h(e,"class","container mx-auto p-4 flex"),h(w,"class","fixed bottom-4 right-4")},m(i,f){P(i,e,f),a(e,l),a(l,t),a(l,d),a(l,r);for(let V=0;V<o.length;V+=1)o[V]&&o[V].m(r,null);a(e,k),a(e,c),I[b].m(c,null),P(i,A,f),P(i,w,f),re(T,w,null),P(i,R,f),L.m(i,f),P(i,O,f),E=!0},p(i,[f]){if(f&257){v=st(i[0].billings);let S;for(S=0;S<v.length;S+=1){const B=ot(i,v,S);o[S]?(o[S].p(B,f),z(o[S],1)):(o[S]=rt(B),o[S].c(),z(o[S],1),o[S].m(r,null))}for(We(),S=v.length;S<o.length;S+=1)m(S);qe()}let V=b;b=j(i),b===V?I[b].p(i,f):(We(),Y(I[V],1,1,()=>{I[V]=null}),qe(),N=I[b],N?N.p(i,f):(N=I[b]=D[b](i),N.c()),z(N,1),N.m(c,null));const Q={};f&4194312&&(Q.$$scope={dirty:f,ctx:i}),T.$set(Q),L.p(i,f)},i(i){if(!E){for(let f=0;f<v.length;f+=1)z(o[f]);z(N),z(T.$$.fragment,i),z(L),E=!0}},o(i){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)Y(o[f]);Y(N),Y(T.$$.fragment,i),Y(L),E=!1},d(i){i&&(u(e),u(A),u(w),u(R),u(O)),pt(o,i),I[b].d(),ue(T),L.d(i)}}}function Gt(n,e,l){let t,{data:s}=e,d=!1,r=!0;const k=bt(s.form,{validators:It(kt),taintedMessage:null,resetForm:!0,onSubmit:({formData:E,cancel:v})=>{const o=Object.fromEntries(E);console.log("Form data being submitted:",o)}});let{form:c,enhance:b,reset:N}=k;_t(n,c,E=>l(1,t=E));function A(){l(2,d=!1),N()}function w(){l(3,r=!r),r||A()}function T(E){l(2,d=!0),vt(c,t={...E,dueDate:new Date(E.dueDate),billingDate:new Date(E.billingDate)},t),l(3,r=!0)}const R=E=>T(E);function O(){t.id=this.value,c.set(t)}return n.$$set=E=>{"data"in E&&l(0,s=E.data)},n.$$.update=()=>{var E;n.$$.dirty&2&&t.type&&(t.type,t.type),n.$$.dirty&2&&t.utilityType&&(t.utilityType,t.utilityType),n.$$.dirty&2&&t.status&&(t.status,t.status),n.$$.dirty&3&&t.leaseId&&(t.leaseId,(E=s.leases.find(v=>v.id===t.leaseId))==null||E.leaseName),n.$$.dirty&2&&(t.amount||0)-(t.paidAmount||0),n.$$.dirty&2&&t.type},[s,t,d,r,c,b,A,w,T,R,O]}class Qt extends $t{constructor(e){super(),gt(this,e,Gt,Lt,mt,{data:0})}}export{Qt as component};
