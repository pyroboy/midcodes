import{s as Ot,M as pt,a as O,b as E,f as T,g as I,p as je,j as D,d as c,k as S,i as b,l as p,r as Tt,O as $t,P as St,c as Xe,t as y,h as v,m as re,V as Ue,n as Ye,e as xe}from"../chunks/scheduler.Bl--k1HL.js";import{S as Wt,i as Yt,f as bt,c as j,a as Q,m as X,t as F,b as N,e as Ae,d as B,g as Ge}from"../chunks/index.DR8de1tj.js";import{e as ze,u as Rt,o as Ft}from"../chunks/each.En5UpT5R.js";import{s as Ct}from"../chunks/formData.IVesd0ZS.js";import"../chunks/entry.B5jMEGBp.js";import{z as Se}from"../chunks/index.D4CdqmV7.js";import{R as Ke,S as wt,a as yt,V as vt,b as Re}from"../chunks/index.BkiOxIzK.js";import"../chunks/index.D4E8IgGl.js";import{I as kt}from"../chunks/input.CkoDOh7A.js";import{L as Le}from"../chunks/label.BX-RGDB2.js";import{P as It}from"../chunks/progress.rgsM-zn2.js";import{t as Ze}from"../chunks/Toaster.svelte_svelte_type_style_lang.Rgr6G_b5.js";import{T as Nt}from"../chunks/Toaster.ClvMR0yn.js";import{B as qt}from"../chunks/button.BqeWxtk_.js";Se.object({id:Se.number().optional(),meter_id:Se.number(),reading:Se.number().multipleOf(.01),reading_date:Se.string(),created_at:Se.string()});const Pt=6048e5,Vt=864e5,et=Symbol.for("constructDateFrom");function we(r,e){return typeof r=="function"?r(e):r&&typeof r=="object"&&et in r?r[et](e):r instanceof Date?new r.constructor(e):new Date(e)}function ce(r,e){return we(e||r,r)}let Lt={};function Qe(){return Lt}function Ve(r,e){var o,l,d,m;const t=Qe(),n=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((m=(d=t.locale)==null?void 0:d.options)==null?void 0:m.weekStartsOn)??0,a=ce(r,e==null?void 0:e.in),i=a.getDay(),s=(i<n?7:0)+i-n;return a.setDate(a.getDate()-s),a.setHours(0,0,0,0),a}function He(r,e){return Ve(r,{...e,weekStartsOn:1})}function Mt(r,e){const t=ce(r,e==null?void 0:e.in),n=t.getFullYear(),a=we(t,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);const i=He(a),s=we(t,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const o=He(s);return t.getTime()>=i.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function tt(r){const e=ce(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function Ht(r,...e){const t=we.bind(null,e.find(n=>typeof n=="object"));return e.map(t)}function nt(r,e){const t=ce(r,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function jt(r,e,t){const[n,a]=Ht(t==null?void 0:t.in,r,e),i=nt(n),s=nt(a),o=+i-tt(i),l=+s-tt(s);return Math.round((o-l)/Vt)}function Qt(r,e){const t=Mt(r,e),n=we(r,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),He(n)}function Xt(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function Bt(r){return!(!Xt(r)&&typeof r!="number"||isNaN(+ce(r)))}function At(r,e){const t=ce(r,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const Gt={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Jt=(r,e,t)=>{let n;const a=Gt[r];return typeof a=="string"?n=a:e===1?n=a.one:n=a.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function Be(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const Ut={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},xt={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},zt={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Kt={date:Be({formats:Ut,defaultWidth:"full"}),time:Be({formats:xt,defaultWidth:"full"}),dateTime:Be({formats:zt,defaultWidth:"full"})},Zt={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},en=(r,e,t,n)=>Zt[r];function Ne(r){return(e,t)=>{const n=t!=null&&t.context?String(t.context):"standalone";let a;if(n==="formatting"&&r.formattingValues){const s=r.defaultFormattingWidth||r.defaultWidth,o=t!=null&&t.width?String(t.width):s;a=r.formattingValues[o]||r.formattingValues[s]}else{const s=r.defaultWidth,o=t!=null&&t.width?String(t.width):r.defaultWidth;a=r.values[o]||r.values[s]}const i=r.argumentCallback?r.argumentCallback(e):e;return a[i]}}const tn={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},nn={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},rn={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},an={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},sn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},on={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ln=(r,e)=>{const t=Number(r),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},un={ordinalNumber:ln,era:Ne({values:tn,defaultWidth:"wide"}),quarter:Ne({values:nn,defaultWidth:"wide",argumentCallback:r=>r-1}),month:Ne({values:rn,defaultWidth:"wide"}),day:Ne({values:an,defaultWidth:"wide"}),dayPeriod:Ne({values:sn,defaultWidth:"wide",formattingValues:on,defaultFormattingWidth:"wide"})};function qe(r){return(e,t={})=>{const n=t.width,a=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],i=e.match(a);if(!i)return null;const s=i[0],o=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],l=Array.isArray(o)?fn(o,u=>u.test(s)):cn(o,u=>u.test(s));let d;d=r.valueCallback?r.valueCallback(l):l,d=t.valueCallback?t.valueCallback(d):d;const m=e.slice(s.length);return{value:d,rest:m}}}function cn(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function fn(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function dn(r){return(e,t={})=>{const n=e.match(r.matchPattern);if(!n)return null;const a=n[0],i=e.match(r.parsePattern);if(!i)return null;let s=r.valueCallback?r.valueCallback(i[0]):i[0];s=t.valueCallback?t.valueCallback(s):s;const o=e.slice(a.length);return{value:s,rest:o}}}const mn=/^(\d+)(th|st|nd|rd)?/i,hn=/\d+/i,gn={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},_n={any:[/^b/i,/^(a|c)/i]},pn={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},$n={any:[/1/i,/2/i,/3/i,/4/i]},bn={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},wn={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},yn={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},vn={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},kn={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Pn={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Mn={ordinalNumber:dn({matchPattern:mn,parsePattern:hn,valueCallback:r=>parseInt(r,10)}),era:qe({matchPatterns:gn,defaultMatchWidth:"wide",parsePatterns:_n,defaultParseWidth:"any"}),quarter:qe({matchPatterns:pn,defaultMatchWidth:"wide",parsePatterns:$n,defaultParseWidth:"any",valueCallback:r=>r+1}),month:qe({matchPatterns:bn,defaultMatchWidth:"wide",parsePatterns:wn,defaultParseWidth:"any"}),day:qe({matchPatterns:yn,defaultMatchWidth:"wide",parsePatterns:vn,defaultParseWidth:"any"}),dayPeriod:qe({matchPatterns:kn,defaultMatchWidth:"any",parsePatterns:Pn,defaultParseWidth:"any"})},En={code:"en-US",formatDistance:Jt,formatLong:Kt,formatRelative:en,localize:un,match:Mn,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Dn(r,e){const t=ce(r,e==null?void 0:e.in);return jt(t,At(t))+1}function On(r,e){const t=ce(r,e==null?void 0:e.in),n=+He(t)-+Qt(t);return Math.round(n/Pt)+1}function Et(r,e){var m,u,_,w;const t=ce(r,e==null?void 0:e.in),n=t.getFullYear(),a=Qe(),i=(e==null?void 0:e.firstWeekContainsDate)??((u=(m=e==null?void 0:e.locale)==null?void 0:m.options)==null?void 0:u.firstWeekContainsDate)??a.firstWeekContainsDate??((w=(_=a.locale)==null?void 0:_.options)==null?void 0:w.firstWeekContainsDate)??1,s=we((e==null?void 0:e.in)||r,0);s.setFullYear(n+1,0,i),s.setHours(0,0,0,0);const o=Ve(s,e),l=we((e==null?void 0:e.in)||r,0);l.setFullYear(n,0,i),l.setHours(0,0,0,0);const d=Ve(l,e);return+t>=+o?n+1:+t>=+d?n:n-1}function Tn(r,e){var o,l,d,m;const t=Qe(),n=(e==null?void 0:e.firstWeekContainsDate)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??t.firstWeekContainsDate??((m=(d=t.locale)==null?void 0:d.options)==null?void 0:m.firstWeekContainsDate)??1,a=Et(r,e),i=we((e==null?void 0:e.in)||r,0);return i.setFullYear(a,0,n),i.setHours(0,0,0,0),Ve(i,e)}function Sn(r,e){const t=ce(r,e==null?void 0:e.in),n=+Ve(t,e)-+Tn(t,e);return Math.round(n/Pt)+1}function R(r,e){const t=r<0?"-":"",n=Math.abs(r).toString().padStart(e,"0");return t+n}const be={y(r,e){const t=r.getFullYear(),n=t>0?t:1-t;return R(e==="yy"?n%100:n,e.length)},M(r,e){const t=r.getMonth();return e==="M"?String(t+1):R(t+1,2)},d(r,e){return R(r.getDate(),e.length)},a(r,e){const t=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,e){return R(r.getHours()%12||12,e.length)},H(r,e){return R(r.getHours(),e.length)},m(r,e){return R(r.getMinutes(),e.length)},s(r,e){return R(r.getSeconds(),e.length)},S(r,e){const t=e.length,n=r.getMilliseconds(),a=Math.trunc(n*Math.pow(10,t-3));return R(a,e.length)}},We={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},rt={G:function(r,e,t){const n=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(r,e,t){if(e==="yo"){const n=r.getFullYear(),a=n>0?n:1-n;return t.ordinalNumber(a,{unit:"year"})}return be.y(r,e)},Y:function(r,e,t,n){const a=Et(r,n),i=a>0?a:1-a;if(e==="YY"){const s=i%100;return R(s,2)}return e==="Yo"?t.ordinalNumber(i,{unit:"year"}):R(i,e.length)},R:function(r,e){const t=Mt(r);return R(t,e.length)},u:function(r,e){const t=r.getFullYear();return R(t,e.length)},Q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return R(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return R(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(r,e,t){const n=r.getMonth();switch(e){case"M":case"MM":return be.M(r,e);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(r,e,t){const n=r.getMonth();switch(e){case"L":return String(n+1);case"LL":return R(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(r,e,t,n){const a=Sn(r,n);return e==="wo"?t.ordinalNumber(a,{unit:"week"}):R(a,e.length)},I:function(r,e,t){const n=On(r);return e==="Io"?t.ordinalNumber(n,{unit:"week"}):R(n,e.length)},d:function(r,e,t){return e==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):be.d(r,e)},D:function(r,e,t){const n=Dn(r);return e==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):R(n,e.length)},E:function(r,e,t){const n=r.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(r,e,t,n){const a=r.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return R(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(a,{width:"short",context:"formatting"});case"eeee":default:return t.day(a,{width:"wide",context:"formatting"})}},c:function(r,e,t,n){const a=r.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return R(i,e.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(a,{width:"narrow",context:"standalone"});case"cccccc":return t.day(a,{width:"short",context:"standalone"});case"cccc":default:return t.day(a,{width:"wide",context:"standalone"})}},i:function(r,e,t){const n=r.getDay(),a=n===0?7:n;switch(e){case"i":return String(a);case"ii":return R(a,e.length);case"io":return t.ordinalNumber(a,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(r,e,t){const a=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(r,e,t){const n=r.getHours();let a;switch(n===12?a=We.noon:n===0?a=We.midnight:a=n/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(r,e,t){const n=r.getHours();let a;switch(n>=17?a=We.evening:n>=12?a=We.afternoon:n>=4?a=We.morning:a=We.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(r,e,t){if(e==="ho"){let n=r.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return be.h(r,e)},H:function(r,e,t){return e==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):be.H(r,e)},K:function(r,e,t){const n=r.getHours()%12;return e==="Ko"?t.ordinalNumber(n,{unit:"hour"}):R(n,e.length)},k:function(r,e,t){let n=r.getHours();return n===0&&(n=24),e==="ko"?t.ordinalNumber(n,{unit:"hour"}):R(n,e.length)},m:function(r,e,t){return e==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):be.m(r,e)},s:function(r,e,t){return e==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):be.s(r,e)},S:function(r,e){return be.S(r,e)},X:function(r,e,t){const n=r.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return it(n);case"XXXX":case"XX":return Pe(n);case"XXXXX":case"XXX":default:return Pe(n,":")}},x:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"x":return it(n);case"xxxx":case"xx":return Pe(n);case"xxxxx":case"xxx":default:return Pe(n,":")}},O:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+at(n,":");case"OOOO":default:return"GMT"+Pe(n,":")}},z:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+at(n,":");case"zzzz":default:return"GMT"+Pe(n,":")}},t:function(r,e,t){const n=Math.trunc(+r/1e3);return R(n,e.length)},T:function(r,e,t){return R(+r,e.length)}};function at(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),a=Math.trunc(n/60),i=n%60;return i===0?t+String(a):t+String(a)+e+R(i,2)}function it(r,e){return r%60===0?(r>0?"-":"+")+R(Math.abs(r)/60,2):Pe(r,e)}function Pe(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),a=R(Math.trunc(n/60),2),i=R(n%60,2);return t+a+e+i}const st=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Dt=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Wn=(r,e)=>{const t=r.match(/(P+)(p+)?/)||[],n=t[1],a=t[2];if(!a)return st(r,e);let i;switch(n){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",st(n,e)).replace("{{time}}",Dt(a,e))},Yn={p:Dt,P:Wn},Rn=/^D+$/,Fn=/^Y+$/,Cn=["D","DD","YY","YYYY"];function In(r){return Rn.test(r)}function Nn(r){return Fn.test(r)}function qn(r,e,t){const n=Vn(r,e,t);if(console.warn(n),Cn.includes(r))throw new RangeError(n)}function Vn(r,e,t){const n=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Ln=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Hn=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,jn=/^'([^]*?)'?$/,Qn=/''/g,Xn=/[a-zA-Z]/;function Je(r,e,t){var m,u,_,w;const n=Qe(),a=n.locale??En,i=n.firstWeekContainsDate??((u=(m=n.locale)==null?void 0:m.options)==null?void 0:u.firstWeekContainsDate)??1,s=n.weekStartsOn??((w=(_=n.locale)==null?void 0:_.options)==null?void 0:w.weekStartsOn)??0,o=ce(r,t==null?void 0:t.in);if(!Bt(o))throw new RangeError("Invalid time value");let l=e.match(Hn).map(f=>{const $=f[0];if($==="p"||$==="P"){const W=Yn[$];return W(f,a.formatLong)}return f}).join("").match(Ln).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const $=f[0];if($==="'")return{isToken:!1,value:Bn(f)};if(rt[$])return{isToken:!0,value:f};if($.match(Xn))throw new RangeError("Format string contains an unescaped latin alphabet character `"+$+"`");return{isToken:!1,value:f}});a.localize.preprocessor&&(l=a.localize.preprocessor(o,l));const d={firstWeekContainsDate:i,weekStartsOn:s,locale:a};return l.map(f=>{if(!f.isToken)return f.value;const $=f.value;(Nn($)||In($))&&qn($,e,String(r));const W=rt[$[0]];return W(o,$,a.localize,d)}).join("")}function Bn(r){const e=r.match(jn);return e?e[1].replace(Qn,"'"):r}function ot(r,e,t){const n=r.slice();return n[26]=e[t],n[27]=e,n[28]=t,n}function lt(r){let e,t="You do not have permission to add readings";return{c(){e=O("div"),e.textContent=t,this.h()},l(n){e=T(n,"DIV",{class:!0,"data-svelte-h":!0}),je(e)!=="svelte-952xuv"&&(e.textContent=t),this.h()},h(){S(e,"class","bg-yellow-50 border border-yellow-200 rounded p-2 text-sm text-yellow-800")},m(n,a){b(n,e,a)},d(n){n&&c(e)}}}function ut(r){let e,t,n;return t=new It({props:{value:r[4]}}),{c(){e=O("div"),j(t.$$.fragment),this.h()},l(a){e=T(a,"DIV",{class:!0});var i=I(e);Q(t.$$.fragment,i),i.forEach(c),this.h()},h(){S(e,"class","w-full")},m(a,i){b(a,e,i),X(t,e,null),n=!0},p(a,i){const s={};i&16&&(s.value=a[4]),t.$set(s)},i(a){n||(F(t.$$.fragment,a),n=!0)},o(a){N(t.$$.fragment,a),n=!1},d(a){a&&c(e),B(t)}}}function An(r){let e;return{c(){e=y("Reading Date")},l(t){e=v(t,"Reading Date")},m(t,n){b(t,e,n)},d(t){t&&c(e)}}}function ct(r){let e,t=r[10].reading_date+"",n;return{c(){e=O("p"),n=y(t),this.h()},l(a){e=T(a,"P",{class:!0});var i=I(e);n=v(i,t),i.forEach(c),this.h()},h(){S(e,"class","text-sm text-red-500")},m(a,i){b(a,e,i),p(e,n)},p(a,i){i&1024&&t!==(t=a[10].reading_date+"")&&re(n,t)},d(a){a&&c(e)}}}function Gn(r){let e;return{c(){e=y("Meter Type")},l(t){e=v(t,"Meter Type")},m(t,n){b(t,e,n)},d(t){t&&c(e)}}}function Jn(r){let e,t;return e=new vt({props:{placeholder:"Select meter type"}}),{c(){j(e.$$.fragment)},l(n){Q(e.$$.fragment,n)},m(n,a){X(e,n,a),t=!0},p:Ye,i(n){t||(F(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function Un(r){let e;return{c(){e=y("Electricity")},l(t){e=v(t,"Electricity")},m(t,n){b(t,e,n)},d(t){t&&c(e)}}}function xn(r){let e;return{c(){e=y("Water")},l(t){e=v(t,"Water")},m(t,n){b(t,e,n)},d(t){t&&c(e)}}}function zn(r){let e;return{c(){e=y("Internet")},l(t){e=v(t,"Internet")},m(t,n){b(t,e,n)},d(t){t&&c(e)}}}function Kn(r){let e,t,n,a,i,s;return e=new Re({props:{value:"ELECTRICITY",$$slots:{default:[Un]},$$scope:{ctx:r}}}),n=new Re({props:{value:"WATER",$$slots:{default:[xn]},$$scope:{ctx:r}}}),i=new Re({props:{value:"INTERNET",$$slots:{default:[zn]},$$scope:{ctx:r}}}),{c(){j(e.$$.fragment),t=E(),j(n.$$.fragment),a=E(),j(i.$$.fragment)},l(o){Q(e.$$.fragment,o),t=D(o),Q(n.$$.fragment,o),a=D(o),Q(i.$$.fragment,o)},m(o,l){X(e,o,l),b(o,t,l),X(n,o,l),b(o,a,l),X(i,o,l),s=!0},p(o,l){const d={};l&536870912&&(d.$$scope={dirty:l,ctx:o}),e.$set(d);const m={};l&536870912&&(m.$$scope={dirty:l,ctx:o}),n.$set(m);const u={};l&536870912&&(u.$$scope={dirty:l,ctx:o}),i.$set(u)},i(o){s||(F(e.$$.fragment,o),F(n.$$.fragment,o),F(i.$$.fragment,o),s=!0)},o(o){N(e.$$.fragment,o),N(n.$$.fragment,o),N(i.$$.fragment,o),s=!1},d(o){o&&(c(t),c(a)),B(e,o),B(n,o),B(i,o)}}}function Zn(r){let e,t,n,a;return e=new wt({props:{$$slots:{default:[Jn]},$$scope:{ctx:r}}}),n=new yt({props:{$$slots:{default:[Kn]},$$scope:{ctx:r}}}),{c(){j(e.$$.fragment),t=E(),j(n.$$.fragment)},l(i){Q(e.$$.fragment,i),t=D(i),Q(n.$$.fragment,i)},m(i,s){X(e,i,s),b(i,t,s),X(n,i,s),a=!0},p(i,s){const o={};s&536870912&&(o.$$scope={dirty:s,ctx:i}),e.$set(o);const l={};s&536870912&&(l.$$scope={dirty:s,ctx:i}),n.$set(l)},i(i){a||(F(e.$$.fragment,i),F(n.$$.fragment,i),a=!0)},o(i){N(e.$$.fragment,i),N(n.$$.fragment,i),a=!1},d(i){i&&c(t),B(e,i),B(n,i)}}}function ft(r){let e,t=r[10].meter_type+"",n;return{c(){e=O("p"),n=y(t),this.h()},l(a){e=T(a,"P",{class:!0});var i=I(e);n=v(i,t),i.forEach(c),this.h()},h(){S(e,"class","text-sm text-red-500")},m(a,i){b(a,e,i),p(e,n)},p(a,i){i&1024&&t!==(t=a[10].meter_type+"")&&re(n,t)},d(a){a&&c(e)}}}function er(r){let e;return{c(){e=y("Location Type")},l(t){e=v(t,"Location Type")},m(t,n){b(t,e,n)},d(t){t&&c(e)}}}function tr(r){let e,t;return e=new vt({props:{placeholder:"Select location type"}}),{c(){j(e.$$.fragment)},l(n){Q(e.$$.fragment,n)},m(n,a){X(e,n,a),t=!0},p:Ye,i(n){t||(F(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function nr(r){let e;return{c(){e=y("Property")},l(t){e=v(t,"Property")},m(t,n){b(t,e,n)},d(t){t&&c(e)}}}function rr(r){let e;return{c(){e=y("Floor")},l(t){e=v(t,"Floor")},m(t,n){b(t,e,n)},d(t){t&&c(e)}}}function ar(r){let e;return{c(){e=y("Rental_unit")},l(t){e=v(t,"Rental_unit")},m(t,n){b(t,e,n)},d(t){t&&c(e)}}}function ir(r){let e,t,n,a,i,s;return e=new Re({props:{value:"PROPERTY",$$slots:{default:[nr]},$$scope:{ctx:r}}}),n=new Re({props:{value:"FLOOR",$$slots:{default:[rr]},$$scope:{ctx:r}}}),i=new Re({props:{value:"RENTAL_UNIT",$$slots:{default:[ar]},$$scope:{ctx:r}}}),{c(){j(e.$$.fragment),t=E(),j(n.$$.fragment),a=E(),j(i.$$.fragment)},l(o){Q(e.$$.fragment,o),t=D(o),Q(n.$$.fragment,o),a=D(o),Q(i.$$.fragment,o)},m(o,l){X(e,o,l),b(o,t,l),X(n,o,l),b(o,a,l),X(i,o,l),s=!0},p(o,l){const d={};l&536870912&&(d.$$scope={dirty:l,ctx:o}),e.$set(d);const m={};l&536870912&&(m.$$scope={dirty:l,ctx:o}),n.$set(m);const u={};l&536870912&&(u.$$scope={dirty:l,ctx:o}),i.$set(u)},i(o){s||(F(e.$$.fragment,o),F(n.$$.fragment,o),F(i.$$.fragment,o),s=!0)},o(o){N(e.$$.fragment,o),N(n.$$.fragment,o),N(i.$$.fragment,o),s=!1},d(o){o&&(c(t),c(a)),B(e,o),B(n,o),B(i,o)}}}function sr(r){let e,t,n,a;return e=new wt({props:{$$slots:{default:[tr]},$$scope:{ctx:r}}}),n=new yt({props:{$$slots:{default:[ir]},$$scope:{ctx:r}}}),{c(){j(e.$$.fragment),t=E(),j(n.$$.fragment)},l(i){Q(e.$$.fragment,i),t=D(i),Q(n.$$.fragment,i)},m(i,s){X(e,i,s),b(i,t,s),X(n,i,s),a=!0},p(i,s){const o={};s&536870912&&(o.$$scope={dirty:s,ctx:i}),e.$set(o);const l={};s&536870912&&(l.$$scope={dirty:s,ctx:i}),n.$set(l)},i(i){a||(F(e.$$.fragment,i),F(n.$$.fragment,i),a=!0)},o(i){N(e.$$.fragment,i),N(n.$$.fragment,i),a=!1},d(i){i&&c(t),B(e,i),B(n,i)}}}function dt(r){let e,t=r[10].location_type+"",n;return{c(){e=O("p"),n=y(t),this.h()},l(a){e=T(a,"P",{class:!0});var i=I(e);n=v(i,t),i.forEach(c),this.h()},h(){S(e,"class","text-sm text-red-500")},m(a,i){b(a,e,i),p(e,n)},p(a,i){i&1024&&t!==(t=a[10].location_type+"")&&re(n,t)},d(a){a&&c(e)}}}function or(r){let e,t='<p class="text-yellow-800">No meters found matching the selected criteria.</p>';return{c(){e=O("div"),e.innerHTML=t,this.h()},l(n){e=T(n,"DIV",{class:!0,"data-svelte-h":!0}),je(e)!=="svelte-17707x3"&&(e.innerHTML=t),this.h()},h(){S(e,"class","p-4 bg-yellow-50 border border-yellow-200 rounded-lg")},m(n,a){b(n,e,a)},p:Ye,i:Ye,o:Ye,d(n){n&&c(e)}}}function lr(r){let e,t,n="Enter Readings",a,i,s=[],o=new Map,l,d,m,u,_=ze(r[6]);const w=f=>f[26].id;for(let f=0;f<_.length;f+=1){let $=ot(r,_,f),W=w($);o.set(W,s[f]=_t(W,$))}return m=new qt({props:{type:"submit",disabled:!r[0].canEdit||r[8],$$slots:{default:[gr]},$$scope:{ctx:r}}}),{c(){e=O("div"),t=O("h2"),t.textContent=n,a=E(),i=O("div");for(let f=0;f<s.length;f+=1)s[f].c();l=E(),d=O("div"),j(m.$$.fragment),this.h()},l(f){e=T(f,"DIV",{class:!0});var $=I(e);t=T($,"H2",{class:!0,"data-svelte-h":!0}),je(t)!=="svelte-8rygxw"&&(t.textContent=n),a=D($),i=T($,"DIV",{class:!0});var W=I(i);for(let A=0;A<s.length;A+=1)s[A].l(W);W.forEach(c),$.forEach(c),l=D(f),d=T(f,"DIV",{class:!0});var K=I(d);Q(m.$$.fragment,K),K.forEach(c),this.h()},h(){S(t,"class","text-lg font-semibold"),S(i,"class","grid gap-4"),S(e,"class","space-y-4"),S(d,"class","flex justify-end")},m(f,$){b(f,e,$),p(e,t),p(e,a),p(e,i);for(let W=0;W<s.length;W+=1)s[W]&&s[W].m(i,null);b(f,l,$),b(f,d,$),X(m,d,null),u=!0},p(f,$){$&609&&(_=ze(f[6]),Ge(),s=Rt(s,$,w,1,f,_,o,i,Ft,_t,null,ot),Ae());const W={};$&257&&(W.disabled=!f[0].canEdit||f[8]),$&536871168&&(W.$$scope={dirty:$,ctx:f}),m.$set(W)},i(f){if(!u){for(let $=0;$<_.length;$+=1)F(s[$]);F(m.$$.fragment,f),u=!0}},o(f){for(let $=0;$<s.length;$+=1)N(s[$]);N(m.$$.fragment,f),u=!1},d(f){f&&(c(e),c(l),c(d));for(let $=0;$<s.length;$+=1)s[$].d();B(m)}}}function ur(r){let e;return{c(){e=y("Property Level")},l(t){e=v(t,"Property Level")},m(t,n){b(t,e,n)},p:Ye,d(t){t&&c(e)}}}function cr(r){let e,t=r[26].floor_id+"",n;return{c(){e=y("Floor "),n=y(t)},l(a){e=v(a,"Floor "),n=v(a,t)},m(a,i){b(a,e,i),b(a,n,i)},p(a,i){i&64&&t!==(t=a[26].floor_id+"")&&re(n,t)},d(a){a&&(c(e),c(n))}}}function fr(r){let e,t=r[26].rental_unit.number+"",n,a,i=r[26].rental_unit.floor.floor_number+"",s,o,l,d=r[26].rental_unit.floor.property.name+"",m,u=r[26].rental_unit.floor.wing&&mt(r);return{c(){e=y("Rental_unit "),n=y(t),a=y(`,
                        Floor `),s=y(i),o=E(),u&&u.c(),l=E(),m=y(d)},l(_){e=v(_,"Rental_unit "),n=v(_,t),a=v(_,`,
                        Floor `),s=v(_,i),o=D(_),u&&u.l(_),l=D(_),m=v(_,d)},m(_,w){b(_,e,w),b(_,n,w),b(_,a,w),b(_,s,w),b(_,o,w),u&&u.m(_,w),b(_,l,w),b(_,m,w)},p(_,w){w&64&&t!==(t=_[26].rental_unit.number+"")&&re(n,t),w&64&&i!==(i=_[26].rental_unit.floor.floor_number+"")&&re(s,i),_[26].rental_unit.floor.wing?u?u.p(_,w):(u=mt(_),u.c(),u.m(l.parentNode,l)):u&&(u.d(1),u=null),w&64&&d!==(d=_[26].rental_unit.floor.property.name+"")&&re(m,d)},d(_){_&&(c(e),c(n),c(a),c(s),c(o),c(l),c(m)),u&&u.d(_)}}}function mt(r){let e,t=r[26].rental_unit.floor.wing+"",n,a;return{c(){e=y("Wing "),n=y(t),a=y(",")},l(i){e=v(i,"Wing "),n=v(i,t),a=v(i,",")},m(i,s){b(i,e,s),b(i,n,s),b(i,a,s)},p(i,s){s&64&&t!==(t=i[26].rental_unit.floor.wing+"")&&re(n,t)},d(i){i&&(c(e),c(n),c(a))}}}function ht(r){let e,t,n=r[0].previousReadings[r[26].id].reading.toFixed(2)+"",a,i,s,o,l=Je(new Date(r[0].previousReadings[r[26].id].reading_date),"MMM d, yyyy")+"",d;return{c(){e=O("div"),t=y("Previous Reading: "),a=y(n),i=E(),s=O("br"),o=y(`
                      Date: `),d=y(l),this.h()},l(m){e=T(m,"DIV",{class:!0});var u=I(e);t=v(u,"Previous Reading: "),a=v(u,n),i=D(u),s=T(u,"BR",{}),o=v(u,`
                      Date: `),d=v(u,l),u.forEach(c),this.h()},h(){S(e,"class","text-sm")},m(m,u){b(m,e,u),p(e,t),p(e,a),p(e,i),p(e,s),p(e,o),p(e,d)},p(m,u){u&65&&n!==(n=m[0].previousReadings[m[26].id].reading.toFixed(2)+"")&&re(a,n),u&65&&l!==(l=Je(new Date(m[0].previousReadings[m[26].id].reading_date),"MMM d, yyyy")+"")&&re(d,l)},d(m){m&&c(e)}}}function dr(r){let e;return{c(){e=y("New Reading")},l(t){e=v(t,"New Reading")},m(t,n){b(t,e,n)},d(t){t&&c(e)}}}function gt(r){let e,t=r[9].readings[r[26].id].reading._errors.join(", ")+"",n;return{c(){e=O("p"),n=y(t),this.h()},l(a){e=T(a,"P",{class:!0});var i=I(e);n=v(i,t),i.forEach(c),this.h()},h(){S(e,"class","text-sm text-red-500")},m(a,i){b(a,e,i),p(e,n)},p(a,i){i&576&&t!==(t=a[9].readings[a[26].id].reading._errors.join(", ")+"")&&re(n,t)},d(a){a&&c(e)}}}function _t(r,e){var ue,Fe,g,M,oe,le,de;let t,n,a,i,s=e[26].name+"",o,l,d,m,u,_,w,f=e[26].initial_reading.toFixed(2)+"",$,W,K,A,ne=e[26].unit_rate.toFixed(2)+"",me,ie,he,se,L,ee=e[26].status+"",fe,h,te,_e,C,q,pe,Z,$e,ye,Me,V;function H(Y,k){return Y[26].rental_unit?fr:Y[26].floor_id?cr:ur}let Ee=H(e),ae=Ee(e),P=((ue=e[0].previousReadings)==null?void 0:ue[e[26].id])&&ht(e);q=new Le({props:{for:"reading_"+e[26].id,$$slots:{default:[dr]},$$scope:{ctx:e}}});function z(Y){e[20](Y,e[26])}let J={type:"number",id:"reading_"+e[26].id,name:`readings[${e[26].id}].reading_value`,step:"0.01",min:((g=(Fe=e[0].previousReadings)==null?void 0:Fe[e[26].id])==null?void 0:g.reading)??e[26].initial_reading,disabled:!e[0].canEdit};e[5][e[26].id].reading_value!==void 0&&(J.value=e[5][e[26].id].reading_value),Z=new kt({props:J}),pt.push(()=>bt(Z,"value",z));let U=((de=(le=(oe=(M=e[9])==null?void 0:M.readings)==null?void 0:oe[e[26].id])==null?void 0:le.reading)==null?void 0:de._errors)&&gt(e);return{key:r,first:null,c(){t=O("div"),n=O("div"),a=O("div"),i=O("h3"),o=y(s),l=E(),d=O("p"),ae.c(),m=E(),u=O("div"),_=O("p"),w=y("Initial Reading: "),$=y(f),W=E(),K=O("p"),A=y("Rate: ₱"),me=y(ne),ie=y("/unit"),he=E(),se=O("p"),L=y("Status: "),fe=y(ee),h=E(),te=O("div"),P&&P.c(),_e=E(),C=O("div"),j(q.$$.fragment),pe=E(),j(Z.$$.fragment),ye=E(),U&&U.c(),Me=E(),this.h()},l(Y){t=T(Y,"DIV",{class:!0});var k=I(t);n=T(k,"DIV",{class:!0});var x=I(n);a=T(x,"DIV",{});var G=I(a);i=T(G,"H3",{class:!0});var Ce=I(i);o=v(Ce,s),Ce.forEach(c),l=D(G),d=T(G,"P",{class:!0});var Ie=I(d);ae.l(Ie),Ie.forEach(c),G.forEach(c),m=D(x),u=T(x,"DIV",{class:!0});var ge=I(u);_=T(ge,"P",{class:!0});var De=I(_);w=v(De,"Initial Reading: "),$=v(De,f),De.forEach(c),W=D(ge),K=T(ge,"P",{class:!0});var ve=I(K);A=v(ve,"Rate: ₱"),me=v(ve,ne),ie=v(ve,"/unit"),ve.forEach(c),he=D(ge),se=T(ge,"P",{class:!0});var Oe=I(se);L=v(Oe,"Status: "),fe=v(Oe,ee),Oe.forEach(c),ge.forEach(c),x.forEach(c),h=D(k),te=T(k,"DIV",{class:!0});var ke=I(te);P&&P.l(ke),_e=D(ke),C=T(ke,"DIV",{class:!0});var Te=I(C);Q(q.$$.fragment,Te),pe=D(Te),Q(Z.$$.fragment,Te),ye=D(Te),U&&U.l(Te),Te.forEach(c),ke.forEach(c),Me=D(k),k.forEach(c),this.h()},h(){S(i,"class","font-medium"),S(d,"class","text-sm text-muted-foreground"),S(_,"class","text-sm"),S(K,"class","text-sm"),S(se,"class","text-sm text-muted-foreground"),S(u,"class","text-right"),S(n,"class","flex items-center justify-between"),S(C,"class","space-y-2"),S(te,"class","grid grid-cols-1 md:grid-cols-2 gap-4"),S(t,"class","p-4 border rounded-lg space-y-2"),this.first=t},m(Y,k){b(Y,t,k),p(t,n),p(n,a),p(a,i),p(i,o),p(a,l),p(a,d),ae.m(d,null),p(n,m),p(n,u),p(u,_),p(_,w),p(_,$),p(u,W),p(u,K),p(K,A),p(K,me),p(K,ie),p(u,he),p(u,se),p(se,L),p(se,fe),p(t,h),p(t,te),P&&P.m(te,null),p(te,_e),p(te,C),X(q,C,null),p(C,pe),X(Z,C,null),p(C,ye),U&&U.m(C,null),p(t,Me),V=!0},p(Y,k){var Ce,Ie,ge,De,ve,Oe,ke;e=Y,(!V||k&64)&&s!==(s=e[26].name+"")&&re(o,s),Ee===(Ee=H(e))&&ae?ae.p(e,k):(ae.d(1),ae=Ee(e),ae&&(ae.c(),ae.m(d,null))),(!V||k&64)&&f!==(f=e[26].initial_reading.toFixed(2)+"")&&re($,f),(!V||k&64)&&ne!==(ne=e[26].unit_rate.toFixed(2)+"")&&re(me,ne),(!V||k&64)&&ee!==(ee=e[26].status+"")&&re(fe,ee),(Ce=e[0].previousReadings)!=null&&Ce[e[26].id]?P?P.p(e,k):(P=ht(e),P.c(),P.m(te,_e)):P&&(P.d(1),P=null);const x={};k&64&&(x.for="reading_"+e[26].id),k&536870912&&(x.$$scope={dirty:k,ctx:e}),q.$set(x);const G={};k&64&&(G.id="reading_"+e[26].id),k&64&&(G.name=`readings[${e[26].id}].reading_value`),k&65&&(G.min=((ge=(Ie=e[0].previousReadings)==null?void 0:Ie[e[26].id])==null?void 0:ge.reading)??e[26].initial_reading),k&1&&(G.disabled=!e[0].canEdit),!$e&&k&96&&($e=!0,G.value=e[5][e[26].id].reading_value,$t(()=>$e=!1)),Z.$set(G),(ke=(Oe=(ve=(De=e[9])==null?void 0:De.readings)==null?void 0:ve[e[26].id])==null?void 0:Oe.reading)!=null&&ke._errors?U?U.p(e,k):(U=gt(e),U.c(),U.m(C,null)):U&&(U.d(1),U=null)},i(Y){V||(F(q.$$.fragment,Y),F(Z.$$.fragment,Y),V=!0)},o(Y){N(q.$$.fragment,Y),N(Z.$$.fragment,Y),V=!1},d(Y){Y&&c(t),ae.d(),P&&P.d(),B(q),B(Z),U&&U.d()}}}function mr(r){let e;return{c(){e=y("Save Readings")},l(t){e=v(t,"Save Readings")},m(t,n){b(t,e,n)},d(t){t&&c(e)}}}function hr(r){let e;return{c(){e=y("Saving...")},l(t){e=v(t,"Saving...")},m(t,n){b(t,e,n)},d(t){t&&c(e)}}}function gr(r){let e;function t(i,s){return i[8]?hr:mr}let n=t(r),a=n(r);return{c(){a.c(),e=xe()},l(i){a.l(i),e=xe()},m(i,s){a.m(i,s),b(i,e,s)},p(i,s){n!==(n=t(i))&&(a.d(1),a=n(i),a&&(a.c(),a.m(e.parentNode,e)))},d(i){i&&c(e),a.d(i)}}}function _r(r){let e,t,n,a,i="Meter Readings",s,o,l,d,m,u,_,w,f,$,W,K,A,ne,me,ie,he,se,L,ee,fe,h,te,_e,C,q,pe,Z,$e,ye,Me,V=!r[0].canEdit&&lt(),H=r[3]&&ut(r);_=new Le({props:{for:"reading_date",$$slots:{default:[An]},$$scope:{ctx:r}}});function Ee(g){r[19](g)}let ae={type:"date",name:"reading_date",max:Je(new Date,"yyyy-MM-dd"),min:r[0].latestOverallReadingDate,disabled:!r[0].canEdit};r[7].reading_date!==void 0&&(ae.value=r[7].reading_date),f=new kt({props:ae}),pt.push(()=>bt(f,"value",Ee));let P=r[10].reading_date&&ct(r);ne=new Le({props:{for:"meter_type",$$slots:{default:[Gn]},$$scope:{ctx:r}}}),ie=new Ke({props:{onSelectedChange:r[15],disabled:!r[0].canEdit,$$slots:{default:[Zn]},$$scope:{ctx:r}}});let z=r[10].meter_type&&ft(r);ee=new Le({props:{for:"location_type",$$slots:{default:[er]},$$scope:{ctx:r}}}),h=new Ke({props:{onSelectedChange:r[16],disabled:!r[0].canEdit,$$slots:{default:[sr]},$$scope:{ctx:r}}});let J=r[10].location_type&&dt(r);const U=[lr,or],ue=[];function Fe(g,M){return g[6].length>0?0:g[1]||g[2]?1:-1}return~(C=Fe(r))&&(q=ue[C]=U[C](r)),Z=new Nt({}),{c(){e=O("div"),t=O("div"),n=O("div"),a=O("h1"),a.textContent=i,s=E(),V&&V.c(),o=E(),H&&H.c(),l=E(),d=O("form"),m=O("div"),u=O("div"),j(_.$$.fragment),w=E(),j(f.$$.fragment),W=E(),P&&P.c(),K=E(),A=O("div"),j(ne.$$.fragment),me=E(),j(ie.$$.fragment),he=E(),z&&z.c(),se=E(),L=O("div"),j(ee.$$.fragment),fe=E(),j(h.$$.fragment),te=E(),J&&J.c(),_e=E(),q&&q.c(),pe=E(),j(Z.$$.fragment),this.h()},l(g){e=T(g,"DIV",{class:!0});var M=I(e);t=T(M,"DIV",{class:!0});var oe=I(t);n=T(oe,"DIV",{class:!0});var le=I(n);a=T(le,"H1",{class:!0,"data-svelte-h":!0}),je(a)!=="svelte-165u4ti"&&(a.textContent=i),s=D(le),V&&V.l(le),le.forEach(c),o=D(oe),H&&H.l(oe),l=D(oe),d=T(oe,"FORM",{method:!0,action:!0,class:!0});var de=I(d);m=T(de,"DIV",{class:!0});var Y=I(m);u=T(Y,"DIV",{class:!0});var k=I(u);Q(_.$$.fragment,k),w=D(k),Q(f.$$.fragment,k),W=D(k),P&&P.l(k),k.forEach(c),K=D(Y),A=T(Y,"DIV",{class:!0});var x=I(A);Q(ne.$$.fragment,x),me=D(x),Q(ie.$$.fragment,x),he=D(x),z&&z.l(x),x.forEach(c),se=D(Y),L=T(Y,"DIV",{class:!0});var G=I(L);Q(ee.$$.fragment,G),fe=D(G),Q(h.$$.fragment,G),te=D(G),J&&J.l(G),G.forEach(c),Y.forEach(c),_e=D(de),q&&q.l(de),de.forEach(c),oe.forEach(c),M.forEach(c),pe=D(g),Q(Z.$$.fragment,g),this.h()},h(){S(a,"class","text-2xl font-bold"),S(n,"class","flex items-center justify-between"),S(u,"class","space-y-2"),S(A,"class","space-y-2"),S(L,"class","space-y-2"),S(m,"class","grid grid-cols-1 md:grid-cols-3 gap-4"),S(d,"method","POST"),S(d,"action","?/create"),S(d,"class","space-y-4 bg-card p-4 rounded-lg border"),S(t,"class","space-y-4"),S(e,"class","container mx-auto p-4")},m(g,M){b(g,e,M),p(e,t),p(t,n),p(n,a),p(n,s),V&&V.m(n,null),p(t,o),H&&H.m(t,null),p(t,l),p(t,d),p(d,m),p(m,u),X(_,u,null),p(u,w),X(f,u,null),p(u,W),P&&P.m(u,null),p(m,K),p(m,A),X(ne,A,null),p(A,me),X(ie,A,null),p(A,he),z&&z.m(A,null),p(m,se),p(m,L),X(ee,L,null),p(L,fe),X(h,L,null),p(L,te),J&&J.m(L,null),p(d,_e),~C&&ue[C].m(d,null),b(g,pe,M),X(Z,g,M),$e=!0,ye||(Me=Tt(r[13].call(null,d)),ye=!0)},p(g,[M]){g[0].canEdit?V&&(V.d(1),V=null):V||(V=lt(),V.c(),V.m(n,null)),g[3]?H?(H.p(g,M),M&8&&F(H,1)):(H=ut(g),H.c(),F(H,1),H.m(t,l)):H&&(Ge(),N(H,1,1,()=>{H=null}),Ae());const oe={};M&536870912&&(oe.$$scope={dirty:M,ctx:g}),_.$set(oe);const le={};M&1&&(le.min=g[0].latestOverallReadingDate),M&1&&(le.disabled=!g[0].canEdit),!$&&M&128&&($=!0,le.value=g[7].reading_date,$t(()=>$=!1)),f.$set(le),g[10].reading_date?P?P.p(g,M):(P=ct(g),P.c(),P.m(u,null)):P&&(P.d(1),P=null);const de={};M&536870912&&(de.$$scope={dirty:M,ctx:g}),ne.$set(de);const Y={};M&1&&(Y.disabled=!g[0].canEdit),M&536870912&&(Y.$$scope={dirty:M,ctx:g}),ie.$set(Y),g[10].meter_type?z?z.p(g,M):(z=ft(g),z.c(),z.m(A,null)):z&&(z.d(1),z=null);const k={};M&536870912&&(k.$$scope={dirty:M,ctx:g}),ee.$set(k);const x={};M&1&&(x.disabled=!g[0].canEdit),M&536870912&&(x.$$scope={dirty:M,ctx:g}),h.$set(x),g[10].location_type?J?J.p(g,M):(J=dt(g),J.c(),J.m(L,null)):J&&(J.d(1),J=null);let G=C;C=Fe(g),C===G?~C&&ue[C].p(g,M):(q&&(Ge(),N(ue[G],1,1,()=>{ue[G]=null}),Ae()),~C?(q=ue[C],q?q.p(g,M):(q=ue[C]=U[C](g),q.c()),F(q,1),q.m(d,null)):q=null)},i(g){$e||(F(H),F(_.$$.fragment,g),F(f.$$.fragment,g),F(ne.$$.fragment,g),F(ie.$$.fragment,g),F(ee.$$.fragment,g),F(h.$$.fragment,g),F(q),F(Z.$$.fragment,g),$e=!0)},o(g){N(H),N(_.$$.fragment,g),N(f.$$.fragment,g),N(ne.$$.fragment,g),N(ie.$$.fragment,g),N(ee.$$.fragment,g),N(h.$$.fragment,g),N(q),N(Z.$$.fragment,g),$e=!1},d(g){g&&(c(e),c(pe)),V&&V.d(),H&&H.d(),B(_),B(f),P&&P.d(),B(ne),B(ie),z&&z.d(),B(ee),B(h),J&&J.d(),~C&&ue[C].d(),B(Z,g),ye=!1,Me()}}}function pr(r,e,t){let n,a,i,s,o,{data:l}=e,d,m,u=!1,_=0,w,f;St(()=>{w&&clearInterval(w),f&&clearTimeout(f)});const{form:$,errors:W,enhance:K,delayed:A,submitting:ne,message:me,reset:ie}=Ct(l.form,{onUpdated:({form:h})=>{h.valid&&Ze.success("Readings saved successfully")},onError:({result:h})=>{Ze.error(h.error.message)}});Xe(r,$,h=>t(7,i=h)),Xe(r,W,h=>t(10,o=h)),Xe(r,A,h=>t(8,s=h));function he(h){((h==null?void 0:h.value)==="ELECTRICITY"||(h==null?void 0:h.value)==="WATER"||(h==null?void 0:h.value)==="INTERNET")&&(t(1,d=h.value),Ue($,i.meter_type=h.value,i))}function se(h){((h==null?void 0:h.value)==="PROPERTY"||(h==null?void 0:h.value)==="FLOOR"||(h==null?void 0:h.value)==="RENTAL_UNIT")&&(t(2,m=h.value),Ue($,i.location_type=h.value,i))}let L={};function ee(h){r.$$.not_equal(i.reading_date,h)&&(i.reading_date=h,$.set(i))}function fe(h,te){r.$$.not_equal(L[te.id].reading_value,h)&&(L[te.id].reading_value=h,t(5,L),t(6,n),t(0,l),t(1,d),t(2,m))}return r.$$set=h=>{"data"in h&&t(0,l=h.data)},r.$$.update=()=>{r.$$.dirty&7&&t(6,n=(l.meters??[]).filter(h=>h.is_active&&h.status==="ACTIVE"&&(!d||h.type===d)&&(!m||h.location_type===m))),r.$$.dirty&2,r.$$.dirty&4,r.$$.dirty&393496&&(s?(t(3,u=!0),w&&clearInterval(w),t(17,w=setInterval(()=>{t(4,_=Math.min(_+1,95))},100))):u&&(w&&(clearInterval(w),t(17,w=void 0)),t(4,_=100),f&&clearTimeout(f),t(18,f=setTimeout(()=>{t(3,u=!1),t(4,_=0),t(18,f=void 0)},500)))),r.$$.dirty&96&&n.forEach(h=>{L[h.id]||t(5,L[h.id]={reading_value:0},L)}),r.$$.dirty&128&&t(9,a=i)},[l,d,m,u,_,L,n,i,s,a,o,$,W,K,A,he,se,w,f,ee,fe]}class Yr extends Wt{constructor(e){super(),Yt(this,e,pr,_r,Ot,{data:0})}}export{Yr as component};
