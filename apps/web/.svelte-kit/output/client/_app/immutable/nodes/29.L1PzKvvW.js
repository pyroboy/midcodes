import{s as kt,M as Ne,b as y,a as A,t as O,N as Ct,d as c,j as P,f as L,g as U,p as ee,h as M,k as E,i as m,l as g,m as q,O as Ie,o as Et,P as yt,z as Pt,r as _t,n as De,e as le,Q as tt}from"../chunks/scheduler.Bl--k1HL.js";import{S as Tt,i as St,f as Ae,c as S,a as I,m as D,t as w,b as k,e as we,d as N,g as ke}from"../chunks/index.DR8de1tj.js";import{e as Le,u as Dt,o as Nt}from"../chunks/each.En5UpT5R.js";import{s as It}from"../chunks/formData.IVesd0ZS.js";import"../chunks/index.D4E8IgGl.js";import{C as Se}from"../chunks/card.Di3vQaZg.js";import{S as qe}from"../chunks/switch.CzzfDkL4.js";import{I as At}from"../chunks/input.CkoDOh7A.js";import{L as Qe}from"../chunks/label.BX-RGDB2.js";import{T as Lt,a as Vt,b as Ot,c as Je,d as _e,e as ie}from"../chunks/table-row.rK6DUprU.js";import{t as ye}from"../chunks/Toaster.svelte_svelte_type_style_lang.Rgr6G_b5.js";import{a as lt}from"../chunks/entry.B5jMEGBp.js";import{B as Xe}from"../chunks/button.BqeWxtk_.js";import{T as dt}from"../chunks/trash-2.BXYXLL88.js";import{C as Ge}from"../chunks/check.C8hdgrCp.js";import{C as st,T as ht}from"../chunks/triangle-alert.DBeP21Tl.js";function nt(r,e,t){const l=r.slice();return l[23]=e[t],l}function at(r,e,t){const l=r.slice();return l[26]=e[t][0],l[27]=e[t][1],l}function Mt(r){let e,t="Total Attendees",l,s,n=r[0].attendees.length+"",f;return{c(){e=A("h3"),e.textContent=t,l=y(),s=A("p"),f=O(n),this.h()},l(a){e=L(a,"H3",{class:!0,"data-svelte-h":!0}),ee(e)!=="svelte-tkmlhg"&&(e.textContent=t),l=P(a),s=L(a,"P",{class:!0});var i=U(s);f=M(i,n),i.forEach(c),this.h()},h(){E(e,"class","font-semibold text-lg mb-2"),E(s,"class","text-2xl font-bold text-primary")},m(a,i){m(a,e,i),m(a,l,i),m(a,s,i),g(s,f)},p(a,i){i&1&&n!==(n=a[0].attendees.length+"")&&q(f,n)},d(a){a&&(c(e),c(l),c(s))}}}function Rt(r){let e,t="Grand Total",l,s,n=r[11](r[0].paymentSummary.grandTotal)+"",f;return{c(){e=A("h3"),e.textContent=t,l=y(),s=A("p"),f=O(n),this.h()},l(a){e=L(a,"H3",{class:!0,"data-svelte-h":!0}),ee(e)!=="svelte-1sinnb5"&&(e.textContent=t),l=P(a),s=L(a,"P",{class:!0});var i=U(s);f=M(i,n),i.forEach(c),this.h()},h(){E(e,"class","font-semibold text-lg mb-2"),E(s,"class","text-2xl font-bold text-primary")},m(a,i){m(a,e,i),m(a,l,i),m(a,s,i),g(s,f)},p(a,i){i&1&&n!==(n=a[11](a[0].paymentSummary.grandTotal)+"")&&q(f,n)},d(a){a&&(c(e),c(l),c(s))}}}function Ft(r){let e,t="Total Paid",l,s,n=r[11](r[0].paymentSummary.totalPaid)+"",f;return{c(){e=A("h3"),e.textContent=t,l=y(),s=A("p"),f=O(n),this.h()},l(a){e=L(a,"H3",{class:!0,"data-svelte-h":!0}),ee(e)!=="svelte-1vrx0yf"&&(e.textContent=t),l=P(a),s=L(a,"P",{class:!0});var i=U(s);f=M(i,n),i.forEach(c),this.h()},h(){E(e,"class","font-semibold text-lg mb-2"),E(s,"class","text-2xl font-bold text-green-600")},m(a,i){m(a,e,i),m(a,l,i),m(a,s,i),g(s,f)},p(a,i){i&1&&n!==(n=a[11](a[0].paymentSummary.totalPaid)+"")&&q(f,n)},d(a){a&&(c(e),c(l),c(s))}}}function jt(r){let e,t="Total Unpaid",l,s,n=r[11](r[0].paymentSummary.totalUnpaid)+"",f;return{c(){e=A("h3"),e.textContent=t,l=y(),s=A("p"),f=O(n),this.h()},l(a){e=L(a,"H3",{class:!0,"data-svelte-h":!0}),ee(e)!=="svelte-r4woyy"&&(e.textContent=t),l=P(a),s=L(a,"P",{class:!0});var i=U(s);f=M(i,n),i.forEach(c),this.h()},h(){E(e,"class","font-semibold text-lg mb-2"),E(s,"class","text-2xl font-bold text-red-600")},m(a,i){m(a,e,i),m(a,l,i),m(a,s,i),g(s,f)},p(a,i){i&1&&n!==(n=a[11](a[0].paymentSummary.totalUnpaid)+"")&&q(f,n)},d(a){a&&(c(e),c(l),c(s))}}}function Ht(r){let e,t,l;return t=new Se({props:{class:"p-6",$$slots:{default:[Ut]},$$scope:{ctx:r}}}),{c(){e=A("div"),S(t.$$.fragment),this.h()},l(s){e=L(s,"DIV",{class:!0});var n=U(e);I(t.$$.fragment,n),n.forEach(c),this.h()},h(){E(e,"class","container mx-auto px-4 pb-8")},m(s,n){m(s,e,n),D(t,e,null),l=!0},p(s,n){const f={};n&1073741952&&(f.$$scope={dirty:n,ctx:s}),t.$set(f)},i(s){l||(w(t.$$.fragment,s),l=!0)},o(s){k(t.$$.fragment,s),l=!1},d(s){s&&c(e),N(t)}}}function rt(r){let e,t='<div class="animate-spin rounded-full h-6 w-6 border-b-2 border-primary"></div>';return{c(){e=A("div"),e.innerHTML=t,this.h()},l(l){e=L(l,"DIV",{class:!0,"data-svelte-h":!0}),ee(e)!=="svelte-1v8p48n"&&(e.innerHTML=t),this.h()},h(){E(e,"class","absolute inset-0 flex items-center justify-center bg-gray-50/50")},m(l,s){m(l,e,s)},d(l){l&&c(e)}}}function ft(r){let e,t,l,s="Receiver",n,f,a=r[26]+"",i,o,p,V="Total Amount",T,d,C=r[11](r[27])+"",v,R,$,u=r[7]&&rt();return{c(){e=A("div"),u&&u.c(),t=y(),l=A("p"),l.textContent=s,n=y(),f=A("p"),i=O(a),o=y(),p=A("p"),p.textContent=V,T=y(),d=A("p"),v=O(C),R=y(),this.h()},l(b){e=L(b,"DIV",{class:!0});var H=U(e);u&&u.l(H),t=P(H),l=L(H,"P",{class:!0,"data-svelte-h":!0}),ee(l)!=="svelte-1w7xd6d"&&(l.textContent=s),n=P(H),f=L(H,"P",{class:!0});var J=U(f);i=M(J,a),J.forEach(c),o=P(H),p=L(H,"P",{class:!0,"data-svelte-h":!0}),ee(p)!=="svelte-1mpahxy"&&(p.textContent=V),T=P(H),d=L(H,"P",{class:!0});var G=U(d);v=M(G,C),G.forEach(c),R=P(H),H.forEach(c),this.h()},h(){E(l,"class","text-sm text-gray-600 mb-1"),E(f,"class","font-medium mb-2"),E(p,"class","text-sm text-gray-600 mb-1"),E(d,"class","text-lg font-bold text-primary"),E(e,"class",$="bg-gray-50 p-4 rounded-lg relative "+(r[7]?"opacity-50":""))},m(b,H){m(b,e,H),u&&u.m(e,null),g(e,t),g(e,l),g(e,n),g(e,f),g(f,i),g(e,o),g(e,p),g(e,T),g(e,d),g(d,v),g(e,R)},p(b,H){b[7]?u||(u=rt(),u.c(),u.m(e,t)):u&&(u.d(1),u=null),H&128&&$!==($="bg-gray-50 p-4 rounded-lg relative "+(b[7]?"opacity-50":""))&&E(e,"class",$)},d(b){b&&c(e),u&&u.d()}}}function Ut(r){let e,t="Payments by Receiver",l,s,n=Le(Object.entries(r[13])),f=[];for(let a=0;a<n.length;a+=1)f[a]=ft(at(r,n,a));return{c(){e=A("h3"),e.textContent=t,l=y(),s=A("div");for(let a=0;a<f.length;a+=1)f[a].c();this.h()},l(a){e=L(a,"H3",{class:!0,"data-svelte-h":!0}),ee(e)!=="svelte-rnrzh6"&&(e.textContent=t),l=P(a),s=L(a,"DIV",{class:!0});var i=U(s);for(let o=0;o<f.length;o+=1)f[o].l(i);i.forEach(c),this.h()},h(){E(e,"class","font-semibold text-lg mb-4"),E(s,"class","grid grid-cols-1 md:grid-cols-3 gap-4")},m(a,i){m(a,e,i),m(a,l,i),m(a,s,i);for(let o=0;o<f.length;o+=1)f[o]&&f[o].m(s,null)},p(a,i){if(i&10368){n=Le(Object.entries(a[13]));let o;for(o=0;o<n.length;o+=1){const p=at(a,n,o);f[o]?f[o].p(p,i):(f[o]=ft(p),f[o].c(),f[o].m(s,null))}for(;o<f.length;o+=1)f[o].d(1);f.length=n.length}},d(a){a&&(c(e),c(l),c(s)),Pt(f,a)}}}function it(r){let e,t;return e=new Xe({props:{variant:"destructive",size:"sm",class:"flex items-center gap-2",$$slots:{default:[zt]},$$scope:{ctx:r}}}),e.$on("click",r[14]),{c(){S(e.$$.fragment)},l(l){I(e.$$.fragment,l)},m(l,s){D(e,l,s),t=!0},p(l,s){const n={};s&1073742080&&(n.$$scope={dirty:s,ctx:l}),e.$set(n)},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){k(e.$$.fragment,l),t=!1},d(l){N(e,l)}}}function zt(r){let e,t,l=r[8].length+"",s,n,f=r[8].length===1?"Entry":"Entries",a,i;return e=new dt({props:{class:"w-4 h-4"}}),{c(){S(e.$$.fragment),t=O(`
                    Clear `),s=O(l),n=O(" Expired "),a=O(f)},l(o){I(e.$$.fragment,o),t=M(o,`
                    Clear `),s=M(o,l),n=M(o," Expired "),a=M(o,f)},m(o,p){D(e,o,p),m(o,t,p),m(o,s,p),m(o,n,p),m(o,a,p),i=!0},p(o,p){(!i||p&256)&&l!==(l=o[8].length+"")&&q(s,l),(!i||p&256)&&f!==(f=o[8].length===1?"Entry":"Entries")&&q(a,f)},i(o){i||(w(e.$$.fragment,o),i=!0)},o(o){k(e.$$.fragment,o),i=!1},d(o){o&&(c(t),c(s),c(n),c(a)),N(e,o)}}}function Bt(r){let e;return{c(){e=O("Paid Only")},l(t){e=M(t,"Paid Only")},m(t,l){m(t,e,l)},d(t){t&&c(e)}}}function xt(r){let e;return{c(){e=O("Unpaid Only")},l(t){e=M(t,"Unpaid Only")},m(t,l){m(t,e,l)},d(t){t&&c(e)}}}function qt(r){let e,t,l;return{c(){e=O("Show Archived ("),t=O(r[9]),l=O(")")},l(s){e=M(s,"Show Archived ("),t=M(s,r[9]),l=M(s,")")},m(s,n){m(s,e,n),m(s,t,n),m(s,l,n)},p(s,n){n&512&&q(t,s[9])},d(s){s&&(c(e),c(t),c(l))}}}function ot(r){let e,t,l,s,n,f,a,i;return n=new Xe({props:{variant:"destructive",size:"sm",class:"flex items-center gap-2",$$slots:{default:[Qt]},$$scope:{ctx:r}}}),{c(){e=A("form"),t=A("input"),s=y(),S(n.$$.fragment),this.h()},l(o){e=L(o,"FORM",{action:!0,method:!0});var p=U(e);t=L(p,"INPUT",{type:!0,name:!0}),s=P(p),I(n.$$.fragment,p),p.forEach(c),this.h()},h(){E(t,"type","hidden"),E(t,"name","eventUrl"),t.value=l=r[0].event.url,E(e,"action","?/deleteAllArchived"),E(e,"method","POST")},m(o,p){m(o,e,p),g(e,t),g(e,s),D(n,e,null),f=!0,a||(i=_t(r[10].call(null,e)),a=!0)},p(o,p){(!f||p&1&&l!==(l=o[0].event.url))&&(t.value=l);const V={};p&1073741824&&(V.$$scope={dirty:p,ctx:o}),n.$set(V)},i(o){f||(w(n.$$.fragment,o),f=!0)},o(o){k(n.$$.fragment,o),f=!1},d(o){o&&c(e),N(n),a=!1,i()}}}function Qt(r){let e,t,l;return e=new dt({props:{class:"w-3 h-3"}}),{c(){S(e.$$.fragment),t=O(`
                            Delete All Archives`)},l(s){I(e.$$.fragment,s),t=M(s,`
                            Delete All Archives`)},m(s,n){D(e,s,n),m(s,t,n),l=!0},p:De,i(s){l||(w(e.$$.fragment,s),l=!0)},o(s){k(e.$$.fragment,s),l=!1},d(s){s&&c(t),N(e,s)}}}function Gt(r){let e;return{c(){e=O("Name")},l(t){e=M(t,"Name")},m(t,l){m(t,e,l)},d(t){t&&c(e)}}}function Jt(r){let e;return{c(){e=O("Email")},l(t){e=M(t,"Email")},m(t,l){m(t,e,l)},d(t){t&&c(e)}}}function Xt(r){let e;return{c(){e=O("Ticket Type")},l(t){e=M(t,"Ticket Type")},m(t,l){m(t,e,l)},d(t){t&&c(e)}}}function Yt(r){let e;return{c(){e=O("Amount")},l(t){e=M(t,"Amount")},m(t,l){m(t,e,l)},d(t){t&&c(e)}}}function Kt(r){let e;return{c(){e=O("Reference")},l(t){e=M(t,"Reference")},m(t,l){m(t,e,l)},d(t){t&&c(e)}}}function Wt(r){let e;return{c(){e=O("Registered")},l(t){e=M(t,"Registered")},m(t,l){m(t,e,l)},d(t){t&&c(e)}}}function Zt(r){let e;return{c(){e=O("Payment Status")},l(t){e=M(t,"Payment Status")},m(t,l){m(t,e,l)},d(t){t&&c(e)}}}function el(r){let e;return{c(){e=O("Actions")},l(t){e=M(t,"Actions")},m(t,l){m(t,e,l)},d(t){t&&c(e)}}}function tl(r){let e,t,l,s,n,f,a,i,o,p,V,T,d,C,v,R;return e=new _e({props:{$$slots:{default:[Gt]},$$scope:{ctx:r}}}),l=new _e({props:{$$slots:{default:[Jt]},$$scope:{ctx:r}}}),n=new _e({props:{$$slots:{default:[Xt]},$$scope:{ctx:r}}}),a=new _e({props:{$$slots:{default:[Yt]},$$scope:{ctx:r}}}),o=new _e({props:{$$slots:{default:[Kt]},$$scope:{ctx:r}}}),V=new _e({props:{$$slots:{default:[Wt]},$$scope:{ctx:r}}}),d=new _e({props:{$$slots:{default:[Zt]},$$scope:{ctx:r}}}),v=new _e({props:{class:"text-right",$$slots:{default:[el]},$$scope:{ctx:r}}}),{c(){S(e.$$.fragment),t=y(),S(l.$$.fragment),s=y(),S(n.$$.fragment),f=y(),S(a.$$.fragment),i=y(),S(o.$$.fragment),p=y(),S(V.$$.fragment),T=y(),S(d.$$.fragment),C=y(),S(v.$$.fragment)},l($){I(e.$$.fragment,$),t=P($),I(l.$$.fragment,$),s=P($),I(n.$$.fragment,$),f=P($),I(a.$$.fragment,$),i=P($),I(o.$$.fragment,$),p=P($),I(V.$$.fragment,$),T=P($),I(d.$$.fragment,$),C=P($),I(v.$$.fragment,$)},m($,u){D(e,$,u),m($,t,u),D(l,$,u),m($,s,u),D(n,$,u),m($,f,u),D(a,$,u),m($,i,u),D(o,$,u),m($,p,u),D(V,$,u),m($,T,u),D(d,$,u),m($,C,u),D(v,$,u),R=!0},p($,u){const b={};u&1073741824&&(b.$$scope={dirty:u,ctx:$}),e.$set(b);const H={};u&1073741824&&(H.$$scope={dirty:u,ctx:$}),l.$set(H);const J={};u&1073741824&&(J.$$scope={dirty:u,ctx:$}),n.$set(J);const G={};u&1073741824&&(G.$$scope={dirty:u,ctx:$}),a.$set(G);const Q={};u&1073741824&&(Q.$$scope={dirty:u,ctx:$}),o.$set(Q);const _={};u&1073741824&&(_.$$scope={dirty:u,ctx:$}),V.$set(_);const F={};u&1073741824&&(F.$$scope={dirty:u,ctx:$}),d.$set(F);const x={};u&1073741824&&(x.$$scope={dirty:u,ctx:$}),v.$set(x)},i($){R||(w(e.$$.fragment,$),w(l.$$.fragment,$),w(n.$$.fragment,$),w(a.$$.fragment,$),w(o.$$.fragment,$),w(V.$$.fragment,$),w(d.$$.fragment,$),w(v.$$.fragment,$),R=!0)},o($){k(e.$$.fragment,$),k(l.$$.fragment,$),k(n.$$.fragment,$),k(a.$$.fragment,$),k(o.$$.fragment,$),k(V.$$.fragment,$),k(d.$$.fragment,$),k(v.$$.fragment,$),R=!1},d($){$&&(c(t),c(s),c(f),c(i),c(p),c(T),c(C)),N(e,$),N(l,$),N(n,$),N(a,$),N(o,$),N(V,$),N(d,$),N(v,$)}}}function ll(r){let e,t;return e=new Je({props:{$$slots:{default:[tl]},$$scope:{ctx:r}}}),{c(){S(e.$$.fragment)},l(l){I(e.$$.fragment,l)},m(l,s){D(e,l,s),t=!0},p(l,s){const n={};s&1073741824&&(n.$$scope={dirty:s,ctx:l}),e.$set(n)},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){k(e.$$.fragment,l),t=!1},d(l){N(e,l)}}}function ut(r){let e,t;return e=new Je({props:{$$slots:{default:[nl]},$$scope:{ctx:r}}}),{c(){S(e.$$.fragment)},l(l){I(e.$$.fragment,l)},m(l,s){D(e,l,s),t=!0},p(l,s){const n={};s&1073741824&&(n.$$scope={dirty:s,ctx:l}),e.$set(n)},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){k(e.$$.fragment,l),t=!1},d(l){N(e,l)}}}function sl(r){let e;return{c(){e=O("No attendees found")},l(t){e=M(t,"No attendees found")},m(t,l){m(t,e,l)},d(t){t&&c(e)}}}function nl(r){let e,t,l;return e=new ie({props:{colspan:10,class:"text-center py-8 text-gray-500",$$slots:{default:[sl]},$$scope:{ctx:r}}}),{c(){S(e.$$.fragment),t=y()},l(s){I(e.$$.fragment,s),t=P(s)},m(s,n){D(e,s,n),m(s,t,n),l=!0},p(s,n){const f={};n&1073741824&&(f.$$scope={dirty:n,ctx:s}),e.$set(f)},i(s){l||(w(e.$$.fragment,s),l=!0)},o(s){k(e.$$.fragment,s),l=!1},d(s){s&&c(t),N(e,s)}}}function al(r){let e=r[23].basic_info.firstName+"",t,l,s=r[23].basic_info.lastName+"",n;return{c(){t=O(e),l=y(),n=O(s)},l(f){t=M(f,e),l=P(f),n=M(f,s)},m(f,a){m(f,t,a),m(f,l,a),m(f,n,a)},p(f,a){a&64&&e!==(e=f[23].basic_info.firstName+"")&&q(t,e),a&64&&s!==(s=f[23].basic_info.lastName+"")&&q(n,s)},d(f){f&&(c(t),c(l),c(n))}}}function rl(r){let e=r[23].basic_info.email+"",t;return{c(){t=O(e)},l(l){t=M(l,e)},m(l,s){m(l,t,s)},p(l,s){s&64&&e!==(e=l[23].basic_info.email+"")&&q(t,e)},d(l){l&&c(t)}}}function fl(r){let e=r[23].ticket_info.type+"",t;return{c(){t=O(e)},l(l){t=M(l,e)},m(l,s){m(l,t,s)},p(l,s){s&64&&e!==(e=l[23].ticket_info.type+"")&&q(t,e)},d(l){l&&c(t)}}}function il(r){let e=r[11](r[23].ticket_info.price||0)+"",t;return{c(){t=O(e)},l(l){t=M(l,e)},m(l,s){m(l,t,s)},p(l,s){s&64&&e!==(e=l[11](l[23].ticket_info.price||0)+"")&&q(t,e)},d(l){l&&c(t)}}}function ol(r){let e;return{c(){e=O("-")},l(t){e=M(t,"-")},m(t,l){m(t,e,l)},p:De,d(t){t&&c(e)}}}function ul(r){let e,t=r[23].reference_code_url+"",l,s;return{c(){e=A("a"),l=O(t),this.h()},l(n){e=L(n,"A",{href:!0,class:!0});var f=U(e);l=M(f,t),f.forEach(c),this.h()},h(){E(e,"href",s="/events/"+r[0].event.event_url+"/"+r[23].reference_code_url),E(e,"class","text-blue-600 hover:text-blue-800 hover:underline")},m(n,f){m(n,e,f),g(e,l)},p(n,f){f&64&&t!==(t=n[23].reference_code_url+"")&&q(l,t),f&65&&s!==(s="/events/"+n[0].event.event_url+"/"+n[23].reference_code_url)&&E(e,"href",s)},d(n){n&&c(e)}}}function cl(r){let e;function t(n,f){return n[23].reference_code_url?ul:ol}let l=t(r),s=l(r);return{c(){s.c(),e=le()},l(n){s.l(n),e=le()},m(n,f){s.m(n,f),m(n,e,f)},p(n,f){l===(l=t(n))&&s?s.p(n,f):(s.d(1),s=l(n),s&&(s.c(),s.m(e.parentNode,e)))},d(n){n&&c(e),s.d(n)}}}function $l(r){let e=r[12](r[23].created_at)+"",t;return{c(){t=O(e)},l(l){t=M(l,e)},m(l,s){m(l,t,s)},p(l,s){s&64&&e!==(e=l[12](l[23].created_at)+"")&&q(t,e)},d(l){l&&c(t)}}}function ml(r){let e,t,l,s,n=r[23].is_paid?"Paid":"Pending",f,a,i,o;var p=r[23].is_paid?Ge:st;function V(d,C){return{props:{class:"w-4 h-4 "+(d[23].is_paid?"text-green-500":"text-yellow-500")}}}p&&(t=tt(p,V(r)));let T=!r[23].is_paid&&r[5][r[23].id]&&!r[5][r[23].id].isExpired&&ct(r);return{c(){e=A("div"),t&&S(t.$$.fragment),l=y(),s=A("span"),f=O(n),i=y(),T&&T.c(),this.h()},l(d){e=L(d,"DIV",{class:!0});var C=U(e);t&&I(t.$$.fragment,C),l=P(C),s=L(C,"SPAN",{class:!0});var v=U(s);f=M(v,n),v.forEach(c),i=P(C),T&&T.l(C),C.forEach(c),this.h()},h(){E(s,"class",a="px-2 py-1 rounded-full text-xs font-semibold "+(r[23].is_paid?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800")),E(e,"class","flex items-center gap-2")},m(d,C){m(d,e,C),t&&D(t,e,null),g(e,l),g(e,s),g(s,f),g(e,i),T&&T.m(e,null),o=!0},p(d,C){if(C&64&&p!==(p=d[23].is_paid?Ge:st)){if(t){ke();const v=t;k(v.$$.fragment,1,0,()=>{N(v,1)}),we()}p?(t=tt(p,V(d)),S(t.$$.fragment),w(t.$$.fragment,1),D(t,e,l)):t=null}else if(p){const v={};C&64&&(v.class="w-4 h-4 "+(d[23].is_paid?"text-green-500":"text-yellow-500")),t.$set(v)}(!o||C&64)&&n!==(n=d[23].is_paid?"Paid":"Pending")&&q(f,n),(!o||C&64&&a!==(a="px-2 py-1 rounded-full text-xs font-semibold "+(d[23].is_paid?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800")))&&E(s,"class",a),!d[23].is_paid&&d[5][d[23].id]&&!d[5][d[23].id].isExpired?T?T.p(d,C):(T=ct(d),T.c(),T.m(e,null)):T&&(T.d(1),T=null)},i(d){o||(t&&w(t.$$.fragment,d),o=!0)},o(d){t&&k(t.$$.fragment,d),o=!1},d(d){d&&c(e),t&&N(t),T&&T.d()}}}function pl(r){let e,t,l,s,n="Archived",f;return t=new ht({props:{class:"w-4 h-4 text-gray-500"}}),{c(){e=A("div"),S(t.$$.fragment),l=y(),s=A("span"),s.textContent=n,this.h()},l(a){e=L(a,"DIV",{class:!0});var i=U(e);I(t.$$.fragment,i),l=P(i),s=L(i,"SPAN",{class:!0,"data-svelte-h":!0}),ee(s)!=="svelte-hsr27f"&&(s.textContent=n),i.forEach(c),this.h()},h(){E(s,"class","px-2 py-1 rounded-full text-xs font-semibold bg-gray-100 text-gray-800"),E(e,"class","flex items-center gap-2")},m(a,i){m(a,e,i),D(t,e,null),g(e,l),g(e,s),f=!0},p:De,i(a){f||(w(t.$$.fragment,a),f=!0)},o(a){k(t.$$.fragment,a),f=!1},d(a){a&&c(e),N(t)}}}function _l(r){let e,t,l,s,n="Expired",f;return t=new ht({props:{class:"w-4 h-4 text-red-500"}}),{c(){e=A("div"),S(t.$$.fragment),l=y(),s=A("span"),s.textContent=n,this.h()},l(a){e=L(a,"DIV",{class:!0});var i=U(e);I(t.$$.fragment,i),l=P(i),s=L(i,"SPAN",{class:!0,"data-svelte-h":!0}),ee(s)!=="svelte-1mknjlc"&&(s.textContent=n),i.forEach(c),this.h()},h(){E(s,"class","px-2 py-1 rounded-full text-xs font-semibold bg-red-100 text-red-800"),E(e,"class","flex items-center gap-2")},m(a,i){m(a,e,i),D(t,e,null),g(e,l),g(e,s),f=!0},p:De,i(a){f||(w(t.$$.fragment,a),f=!0)},o(a){k(t.$$.fragment,a),f=!1},d(a){a&&c(e),N(t)}}}function ct(r){let e,t,l=r[5][r[23].id].timeLeft+"",s,n,f;return{c(){e=A("span"),t=O("("),s=O(l),n=O(")"),this.h()},l(a){e=L(a,"SPAN",{class:!0});var i=U(e);t=M(i,"("),s=M(i,l),n=M(i,")"),i.forEach(c),this.h()},h(){E(e,"class",f="text-sm "+(r[5][r[23].id].timeLeft==="00:00:00"?"text-red-600 font-semibold":"text-gray-600"))},m(a,i){m(a,e,i),g(e,t),g(e,s),g(e,n)},p(a,i){i&96&&l!==(l=a[5][a[23].id].timeLeft+"")&&q(s,l),i&96&&f!==(f="text-sm "+(a[5][a[23].id].timeLeft==="00:00:00"?"text-red-600 font-semibold":"text-gray-600"))&&E(e,"class",f)},d(a){a&&c(e)}}}function dl(r){let e,t,l,s;const n=[_l,pl,ml],f=[];function a(i,o){var p;return i[23].attendance_status==="expired"||(p=i[5][i[23].id])!=null&&p.isExpired?0:i[23].attendance_status==="archived"?1:2}return e=a(r),t=f[e]=n[e](r),{c(){t.c(),l=le()},l(i){t.l(i),l=le()},m(i,o){f[e].m(i,o),m(i,l,o),s=!0},p(i,o){let p=e;e=a(i),e===p?f[e].p(i,o):(ke(),k(f[p],1,1,()=>{f[p]=null}),we(),t=f[e],t?t.p(i,o):(t=f[e]=n[e](i),t.c()),w(t,1),t.m(l.parentNode,l))},i(i){s||(w(t),s=!0)},o(i){k(t),s=!1},d(i){i&&c(l),f[e].d(i)}}}function $t(r){var T,d;let e,t,l,s,n,f,a,i,o,p,V;return i=new Xe({props:{type:"submit",variant:"outline",size:"sm",disabled:!((d=(T=r[0].session)==null?void 0:T.user)!=null&&d.id),class:"relative",$$slots:{default:[hl]},$$scope:{ctx:r}}}),{c(){e=A("form"),t=A("input"),s=y(),n=A("input"),a=y(),S(i.$$.fragment),this.h()},l(C){e=L(C,"FORM",{method:!0,action:!0,class:!0});var v=U(e);t=L(v,"INPUT",{type:!0,name:!0}),s=P(v),n=L(v,"INPUT",{type:!0,name:!0}),a=P(v),I(i.$$.fragment,v),v.forEach(c),this.h()},h(){var C,v;E(t,"type","hidden"),E(t,"name","attendeeId"),t.value=l=r[23].id,E(n,"type","hidden"),E(n,"name","receivedBy"),n.value=f=(v=(C=r[0].session)==null?void 0:C.user)==null?void 0:v.id,E(e,"method","POST"),E(e,"action","?/updatePayment"),E(e,"class","flex items-center justify-end")},m(C,v){m(C,e,v),g(e,t),g(e,s),g(e,n),g(e,a),D(i,e,null),o=!0,p||(V=_t(r[10].call(null,e)),p=!0)},p(C,v){var $,u,b,H;(!o||v&64&&l!==(l=C[23].id))&&(t.value=l),(!o||v&1&&f!==(f=(u=($=C[0].session)==null?void 0:$.user)==null?void 0:u.id))&&(n.value=f);const R={};v&1&&(R.disabled=!((H=(b=C[0].session)==null?void 0:b.user)!=null&&H.id)),v&1073741824&&(R.$$scope={dirty:v,ctx:C}),i.$set(R)},i(C){o||(w(i.$$.fragment,C),o=!0)},o(C){k(i.$$.fragment,C),o=!1},d(C){C&&c(e),N(i),p=!1,V()}}}function hl(r){let e,t,l,s;return t=new Ge({props:{class:"w-4 h-4 mr-2"}}),{c(){e=A("div"),S(t.$$.fragment),l=O(`
                                            Confirm Payment`),this.h()},l(n){e=L(n,"DIV",{class:!0});var f=U(e);I(t.$$.fragment,f),l=M(f,`
                                            Confirm Payment`),f.forEach(c),this.h()},h(){E(e,"class","flex items-center")},m(n,f){m(n,e,f),D(t,e,null),g(e,l),s=!0},p:De,i(n){s||(w(t.$$.fragment,n),s=!0)},o(n){k(t.$$.fragment,n),s=!1},d(n){n&&c(e),N(t)}}}function gl(r){let e,t,l=!r[23].is_paid&&r[23].attendance_status!=="expired"&&r[23].attendance_status!=="archived"&&$t(r);return{c(){l&&l.c(),e=le()},l(s){l&&l.l(s),e=le()},m(s,n){l&&l.m(s,n),m(s,e,n),t=!0},p(s,n){!s[23].is_paid&&s[23].attendance_status!=="expired"&&s[23].attendance_status!=="archived"?l?(l.p(s,n),n&64&&w(l,1)):(l=$t(s),l.c(),w(l,1),l.m(e.parentNode,e)):l&&(ke(),k(l,1,1,()=>{l=null}),we())},i(s){t||(w(l),t=!0)},o(s){k(l),t=!1},d(s){s&&c(e),l&&l.d(s)}}}function vl(r){let e,t,l,s,n,f,a,i,o,p,V,T,d,C,v,R,$;return e=new ie({props:{$$slots:{default:[al]},$$scope:{ctx:r}}}),l=new ie({props:{$$slots:{default:[rl]},$$scope:{ctx:r}}}),n=new ie({props:{$$slots:{default:[fl]},$$scope:{ctx:r}}}),a=new ie({props:{$$slots:{default:[il]},$$scope:{ctx:r}}}),o=new ie({props:{$$slots:{default:[cl]},$$scope:{ctx:r}}}),V=new ie({props:{$$slots:{default:[$l]},$$scope:{ctx:r}}}),d=new ie({props:{$$slots:{default:[dl]},$$scope:{ctx:r}}}),v=new ie({props:{class:"text-right",$$slots:{default:[gl]},$$scope:{ctx:r}}}),{c(){S(e.$$.fragment),t=y(),S(l.$$.fragment),s=y(),S(n.$$.fragment),f=y(),S(a.$$.fragment),i=y(),S(o.$$.fragment),p=y(),S(V.$$.fragment),T=y(),S(d.$$.fragment),C=y(),S(v.$$.fragment),R=y()},l(u){I(e.$$.fragment,u),t=P(u),I(l.$$.fragment,u),s=P(u),I(n.$$.fragment,u),f=P(u),I(a.$$.fragment,u),i=P(u),I(o.$$.fragment,u),p=P(u),I(V.$$.fragment,u),T=P(u),I(d.$$.fragment,u),C=P(u),I(v.$$.fragment,u),R=P(u)},m(u,b){D(e,u,b),m(u,t,b),D(l,u,b),m(u,s,b),D(n,u,b),m(u,f,b),D(a,u,b),m(u,i,b),D(o,u,b),m(u,p,b),D(V,u,b),m(u,T,b),D(d,u,b),m(u,C,b),D(v,u,b),m(u,R,b),$=!0},p(u,b){const H={};b&1073741888&&(H.$$scope={dirty:b,ctx:u}),e.$set(H);const J={};b&1073741888&&(J.$$scope={dirty:b,ctx:u}),l.$set(J);const G={};b&1073741888&&(G.$$scope={dirty:b,ctx:u}),n.$set(G);const Q={};b&1073741888&&(Q.$$scope={dirty:b,ctx:u}),a.$set(Q);const _={};b&1073741889&&(_.$$scope={dirty:b,ctx:u}),o.$set(_);const F={};b&1073741888&&(F.$$scope={dirty:b,ctx:u}),V.$set(F);const x={};b&1073741920&&(x.$$scope={dirty:b,ctx:u}),d.$set(x);const Y={};b&1073741889&&(Y.$$scope={dirty:b,ctx:u}),v.$set(Y)},i(u){$||(w(e.$$.fragment,u),w(l.$$.fragment,u),w(n.$$.fragment,u),w(a.$$.fragment,u),w(o.$$.fragment,u),w(V.$$.fragment,u),w(d.$$.fragment,u),w(v.$$.fragment,u),$=!0)},o(u){k(e.$$.fragment,u),k(l.$$.fragment,u),k(n.$$.fragment,u),k(a.$$.fragment,u),k(o.$$.fragment,u),k(V.$$.fragment,u),k(d.$$.fragment,u),k(v.$$.fragment,u),$=!1},d(u){u&&(c(t),c(s),c(f),c(i),c(p),c(T),c(C),c(R)),N(e,u),N(l,u),N(n,u),N(a,u),N(o,u),N(V,u),N(d,u),N(v,u)}}}function mt(r,e){let t,l,s;return l=new Je({props:{$$slots:{default:[vl]},$$scope:{ctx:e}}}),{key:r,first:null,c(){t=le(),S(l.$$.fragment),this.h()},l(n){t=le(),I(l.$$.fragment,n),this.h()},h(){this.first=t},m(n,f){m(n,t,f),D(l,n,f),s=!0},p(n,f){e=n;const a={};f&1073741921&&(a.$$scope={dirty:f,ctx:e}),l.$set(a)},i(n){s||(w(l.$$.fragment,n),s=!0)},o(n){k(l.$$.fragment,n),s=!1},d(n){n&&c(t),N(l,n)}}}function bl(r){let e=[],t=new Map,l,s,n=Le(r[6]);const f=i=>i[23].id;for(let i=0;i<n.length;i+=1){let o=nt(r,n,i),p=f(o);t.set(p,e[i]=mt(p,o))}let a=null;return n.length||(a=ut(r)),{c(){for(let i=0;i<e.length;i+=1)e[i].c();l=le(),a&&a.c()},l(i){for(let o=0;o<e.length;o+=1)e[o].l(i);l=le(),a&&a.l(i)},m(i,o){for(let p=0;p<e.length;p+=1)e[p]&&e[p].m(i,o);m(i,l,o),a&&a.m(i,o),s=!0},p(i,o){o&6241&&(n=Le(i[6]),ke(),e=Dt(e,o,f,1,i,n,t,l.parentNode,Nt,mt,l,nt),we(),!n.length&&a?a.p(i,o):n.length?a&&(ke(),k(a,1,1,()=>{a=null}),we()):(a=ut(i),a.c(),w(a,1),a.m(l.parentNode,l)))},i(i){if(!s){for(let o=0;o<n.length;o+=1)w(e[o]);s=!0}},o(i){for(let o=0;o<e.length;o+=1)k(e[o]);s=!1},d(i){i&&c(l);for(let o=0;o<e.length;o+=1)e[o].d(i);a&&a.d(i)}}}function wl(r){let e,t,l,s;return e=new Vt({props:{$$slots:{default:[ll]},$$scope:{ctx:r}}}),l=new Ot({props:{$$slots:{default:[bl]},$$scope:{ctx:r}}}),{c(){S(e.$$.fragment),t=y(),S(l.$$.fragment)},l(n){I(e.$$.fragment,n),t=P(n),I(l.$$.fragment,n)},m(n,f){D(e,n,f),m(n,t,f),D(l,n,f),s=!0},p(n,f){const a={};f&1073741824&&(a.$$scope={dirty:f,ctx:n}),e.$set(a);const i={};f&1073741921&&(i.$$scope={dirty:f,ctx:n}),l.$set(i)},i(n){s||(w(e.$$.fragment,n),w(l.$$.fragment,n),s=!0)},o(n){k(e.$$.fragment,n),k(l.$$.fragment,n),s=!1},d(n){n&&c(t),N(e,n),N(l,n)}}}function kl(r){let e,t,l,s,n,f="Payment Management",a,i,o=r[0].event.event_name+"",p,V,T,d,C,v,R,$,u,b,H,J=Object.keys(r[13]).length>0,G,Q,_,F,x,Y,Ve,te,oe,se,Oe,Me,ue,Re,ce,ne,Fe,je,$e,He,K,ae,Ue,ze,me,Be,xe,Ce,pe,Ee;document.title=e="Payment Management - "+r[0].event.event_name,d=new Se({props:{class:"p-6",$$slots:{default:[Mt]},$$scope:{ctx:r}}}),v=new Se({props:{class:"p-6",$$slots:{default:[Rt]},$$scope:{ctx:r}}}),$=new Se({props:{class:"p-6",$$slots:{default:[Ft]},$$scope:{ctx:r}}}),b=new Se({props:{class:"p-6",$$slots:{default:[jt]},$$scope:{ctx:r}}});let W=J&&Ht(r);function gt(h){r[15](h)}let Ye={type:"search",placeholder:"Search attendees...",class:"w-[300px]"};r[1]!==void 0&&(Ye.value=r[1]),F=new At({props:Ye}),Ne.push(()=>Ae(F,"value",gt));let z=r[8].length>0&&it(r);function vt(h){r[16](h)}let Ke={};r[2]!==void 0&&(Ke.checked=r[2]),se=new qe({props:Ke}),Ne.push(()=>Ae(se,"checked",vt)),ue=new Qe({props:{$$slots:{default:[Bt]},$$scope:{ctx:r}}});function bt(h){r[17](h)}let We={};r[3]!==void 0&&(We.checked=r[3]),ne=new qe({props:We}),Ne.push(()=>Ae(ne,"checked",bt)),$e=new Qe({props:{$$slots:{default:[xt]},$$scope:{ctx:r}}});function wt(h){r[18](h)}let Ze={};r[4]!==void 0&&(Ze.checked=r[4]),ae=new qe({props:Ze}),Ne.push(()=>Ae(ae,"checked",wt)),me=new Qe({props:{$$slots:{default:[qt]},$$scope:{ctx:r}}});let B=r[4]&&r[9]>0&&ot(r);return pe=new Lt({props:{$$slots:{default:[wl]},$$scope:{ctx:r}}}),{c(){t=y(),l=A("div"),s=A("div"),n=A("h1"),n.textContent=f,a=y(),i=A("p"),p=O(o),V=y(),T=A("div"),S(d.$$.fragment),C=y(),S(v.$$.fragment),R=y(),S($.$$.fragment),u=y(),S(b.$$.fragment),H=y(),W&&W.c(),G=y(),Q=A("div"),_=A("div"),S(F.$$.fragment),Y=y(),z&&z.c(),Ve=y(),te=A("div"),oe=A("div"),S(se.$$.fragment),Me=y(),S(ue.$$.fragment),Re=y(),ce=A("div"),S(ne.$$.fragment),je=y(),S($e.$$.fragment),He=y(),K=A("div"),S(ae.$$.fragment),ze=y(),S(me.$$.fragment),Be=y(),B&&B.c(),xe=y(),Ce=A("div"),S(pe.$$.fragment),this.h()},l(h){Ct("svelte-pq86yb",document.head).forEach(c),t=P(h),l=L(h,"DIV",{class:!0});var X=U(l);s=L(X,"DIV",{class:!0});var de=U(s);n=L(de,"H1",{class:!0,"data-svelte-h":!0}),ee(n)!=="svelte-16eyabe"&&(n.textContent=f),a=P(de),i=L(de,"P",{class:!0});var Pe=U(i);p=M(Pe,o),Pe.forEach(c),de.forEach(c),V=P(X),T=L(X,"DIV",{class:!0});var Z=U(T);I(d.$$.fragment,Z),C=P(Z),I(v.$$.fragment,Z),R=P(Z),I($.$$.fragment,Z),u=P(Z),I(b.$$.fragment,Z),Z.forEach(c),H=P(X),W&&W.l(X),G=P(X),Q=L(X,"DIV",{class:!0});var he=U(Q);_=L(he,"DIV",{class:!0});var ge=U(_);I(F.$$.fragment,ge),Y=P(ge),z&&z.l(ge),ge.forEach(c),Ve=P(he),te=L(he,"DIV",{class:!0});var re=U(te);oe=L(re,"DIV",{class:!0});var ve=U(oe);I(se.$$.fragment,ve),Me=P(ve),I(ue.$$.fragment,ve),ve.forEach(c),Re=P(re),ce=L(re,"DIV",{class:!0});var be=U(ce);I(ne.$$.fragment,be),je=P(be),I($e.$$.fragment,be),be.forEach(c),He=P(re),K=L(re,"DIV",{class:!0});var fe=U(K);I(ae.$$.fragment,fe),ze=P(fe),I(me.$$.fragment,fe),Be=P(fe),B&&B.l(fe),fe.forEach(c),re.forEach(c),he.forEach(c),xe=P(X),Ce=L(X,"DIV",{class:!0});var Te=U(Ce);I(pe.$$.fragment,Te),Te.forEach(c),X.forEach(c),this.h()},h(){E(n,"class","text-3xl font-bold mb-2"),E(i,"class","text-gray-600"),E(s,"class","mb-8"),E(T,"class","grid grid-cols-1 md:grid-cols-4 gap-4 mb-8"),E(_,"class","flex items-center gap-4"),E(oe,"class","flex items-center gap-2"),E(ce,"class","flex items-center gap-2"),E(K,"class","flex items-center gap-2"),E(te,"class","flex items-center gap-2"),E(Q,"class","flex items-center justify-between mb-4"),E(Ce,"class","bg-white rounded-lg shadow overflow-x-auto"),E(l,"class","container mx-auto px-4 py-8")},m(h,j){m(h,t,j),m(h,l,j),g(l,s),g(s,n),g(s,a),g(s,i),g(i,p),g(l,V),g(l,T),D(d,T,null),g(T,C),D(v,T,null),g(T,R),D($,T,null),g(T,u),D(b,T,null),g(l,H),W&&W.m(l,null),g(l,G),g(l,Q),g(Q,_),D(F,_,null),g(_,Y),z&&z.m(_,null),g(Q,Ve),g(Q,te),g(te,oe),D(se,oe,null),g(oe,Me),D(ue,oe,null),g(te,Re),g(te,ce),D(ne,ce,null),g(ce,je),D($e,ce,null),g(te,He),g(te,K),D(ae,K,null),g(K,ze),D(me,K,null),g(K,Be),B&&B.m(K,null),g(l,xe),g(l,Ce),D(pe,Ce,null),Ee=!0},p(h,[j]){(!Ee||j&1)&&e!==(e="Payment Management - "+h[0].event.event_name)&&(document.title=e),(!Ee||j&1)&&o!==(o=h[0].event.event_name+"")&&q(p,o);const X={};j&1073741825&&(X.$$scope={dirty:j,ctx:h}),d.$set(X);const de={};j&1073741825&&(de.$$scope={dirty:j,ctx:h}),v.$set(de);const Pe={};j&1073741825&&(Pe.$$scope={dirty:j,ctx:h}),$.$set(Pe);const Z={};j&1073741825&&(Z.$$scope={dirty:j,ctx:h}),b.$set(Z),J&&W.p(h,j);const he={};!x&&j&2&&(x=!0,he.value=h[1],Ie(()=>x=!1)),F.$set(he),h[8].length>0?z?(z.p(h,j),j&256&&w(z,1)):(z=it(h),z.c(),w(z,1),z.m(_,null)):z&&(ke(),k(z,1,1,()=>{z=null}),we());const ge={};!Oe&&j&4&&(Oe=!0,ge.checked=h[2],Ie(()=>Oe=!1)),se.$set(ge);const re={};j&1073741824&&(re.$$scope={dirty:j,ctx:h}),ue.$set(re);const ve={};!Fe&&j&8&&(Fe=!0,ve.checked=h[3],Ie(()=>Fe=!1)),ne.$set(ve);const be={};j&1073741824&&(be.$$scope={dirty:j,ctx:h}),$e.$set(be);const fe={};!Ue&&j&16&&(Ue=!0,fe.checked=h[4],Ie(()=>Ue=!1)),ae.$set(fe);const Te={};j&1073742336&&(Te.$$scope={dirty:j,ctx:h}),me.$set(Te),h[4]&&h[9]>0?B?(B.p(h,j),j&528&&w(B,1)):(B=ot(h),B.c(),w(B,1),B.m(K,null)):B&&(ke(),k(B,1,1,()=>{B=null}),we());const et={};j&1073741921&&(et.$$scope={dirty:j,ctx:h}),pe.$set(et)},i(h){Ee||(w(d.$$.fragment,h),w(v.$$.fragment,h),w($.$$.fragment,h),w(b.$$.fragment,h),w(W),w(F.$$.fragment,h),w(z),w(se.$$.fragment,h),w(ue.$$.fragment,h),w(ne.$$.fragment,h),w($e.$$.fragment,h),w(ae.$$.fragment,h),w(me.$$.fragment,h),w(B),w(pe.$$.fragment,h),Ee=!0)},o(h){k(d.$$.fragment,h),k(v.$$.fragment,h),k($.$$.fragment,h),k(b.$$.fragment,h),k(W),k(F.$$.fragment,h),k(z),k(se.$$.fragment,h),k(ue.$$.fragment,h),k(ne.$$.fragment,h),k($e.$$.fragment,h),k(ae.$$.fragment,h),k(me.$$.fragment,h),k(B),k(pe.$$.fragment,h),Ee=!1},d(h){h&&(c(t),c(l)),N(d),N(v),N($),N(b),W&&W.d(),N(F),z&&z.d(),N(se),N(ue),N(ne),N($e),N(ae),N(me),B&&B.d(),N(pe)}}}function pt(r){const e=new Date(r).getTime(),t=new Date().getTime(),l=24*60*60*1e3,s=e+l-t;if(s<=0)return"00:00:00";const n=Math.floor(s/(1e3*60*60)),f=Math.floor(s%(1e3*60*60)/(1e3*60)),a=Math.floor(s%(1e3*60)/1e3);return`${n.toString().padStart(2,"0")}:${f.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`}function Cl(r,e,t){let l,s,n,{data:f}=e;const{form:a,enhance:i}=It(f.form,{onSubmit:({formData:_})=>{t(7,v=!0);const F=Object.fromEntries(_);return console.log("[Client] Form data being submitted:",F),!0},onResult:async({result:_})=>{console.log("[Client] Form submission result:",_),_.type==="success"?(await Promise.all([lt("app:attendees"),lt("app:payment-summary")]),ye.success("Payment status updated")):_.type==="error"&&(_.error==="PAYMENT_EXPIRED"?ye.error("Payment window has expired. Registration must be done again."):ye.error("Failed to update payment status")),setTimeout(()=>{t(7,v=!1)},2e3)},resetForm:!1,applyAction:!0,invalidateAll:!0}),o=_=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(_),p=_=>new Date(_).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});let V="",T=!1,d=!1,C=!1,v=!1,R={};function $(_,F){if(R[_])return;const x=setInterval(()=>{const Y=pt(F);t(5,R[_]={...R[_],timeLeft:Y},R),Y==="00:00:00"&&(clearInterval(R[_].interval),t(5,R[_].isExpired=!0,R),t(5,R={...R}))},1e3);t(5,R[_]={timeLeft:pt(F),interval:x,isExpired:!1},R)}Et(()=>{l.forEach(_=>{!_.is_paid&&_.attendance_status!=="expired"&&_.attendance_status!=="archived"&&$(_.id,_.created_at)})}),yt(()=>{Object.values(R).forEach(_=>{clearInterval(_.interval)})});const u=f.paymentSummary.totalByReceiver;async function b(){if(n.length){console.log("[Client] Clearing expired entries:",{expiredIds:n});try{const _=new FormData;_.append("attendeeIds",JSON.stringify(n));const F=await fetch("?/clearExpired",{method:"POST",body:_}),x=await F.json();F.ok?(console.log("[Client] Successfully cleared expired entries"),ye.success("Successfully cleared expired entries"),window.location.reload()):(console.error("[Client] Failed to clear expired entries:",x),ye.error(x.message||"Failed to clear expired entries"))}catch(_){console.error("[Client] Error clearing expired entries:",_),ye.error("Failed to clear expired entries")}}}function H(_){V=_,t(1,V)}function J(_){T=_,t(2,T)}function G(_){d=_,t(3,d)}function Q(_){C=_,t(4,C)}return r.$$set=_=>{"data"in _&&t(0,f=_.data)},r.$$.update=()=>{r.$$.dirty&31&&t(6,l=f.attendees.filter(_=>{var F,x,Y;return(C||_.attendance_status!=="archived")&&(!V||((F=_.basic_info.firstName)==null?void 0:F.toLowerCase().includes(V.toLowerCase()))||((x=_.basic_info.lastName)==null?void 0:x.toLowerCase().includes(V.toLowerCase()))||((Y=_.basic_info.email)==null?void 0:Y.toLowerCase().includes(V.toLowerCase())))&&(!T||_.is_paid)&&(!d||!_.is_paid)}).sort((_,F)=>new Date(F.created_at).getTime()-new Date(_.created_at).getTime())),r.$$.dirty&1&&t(9,s=f.attendees.filter(_=>_.attendance_status==="archived").length),r.$$.dirty&96&&t(8,n=l.filter(_=>{const F=R[_.id];return(F==null?void 0:F.timeLeft)&&Number(F.timeLeft)<=0||(F==null?void 0:F.isExpired)||_.attendance_status==="expired"}).map(_=>_.id))},[f,V,T,d,C,R,l,v,n,s,i,o,p,u,b,H,J,G,Q]}class Hl extends Tt{constructor(e){super(),St(this,e,Cl,kl,kt,{data:0})}}export{Hl as component};
