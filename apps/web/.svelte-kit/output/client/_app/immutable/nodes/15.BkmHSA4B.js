import{s as it,C as Te,M as We,a as L,b as I,f as j,g as y,j as C,d as u,k as _,i as w,l as d,v as Ve,y as ft,r as wt,O as Xe,A as kt,S as Et,t as B,h as U,m as ne,n as le,R as ye,V as Ne,e as ve,z as ut,p as je,c as It,o as Ct,X as $e,Y as ge}from"../chunks/scheduler.O3yElrGi.js";import{S as ct,i as dt,f as Ye,c as D,a as A,m as F,t as v,g as Ae,b,e as Fe,d as M}from"../chunks/index.ZL6-Qda4.js";import{e as Ee,u as St,o as Vt}from"../chunks/each.DIkwcrxx.js";import{g as Pe,a as Le}from"../chunks/spread.CgU5AtxT.js";import{B as De}from"../chunks/button.UQtnxgui.js";import{I as Ge}from"../chunks/input.CuGHtir4.js";import{L as Se}from"../chunks/label.nGZ3SWbE.js";import{R as Je,S as _t,a as mt,V as pt,b as $t}from"../chunks/index.CXcOdhrV.js";import{z as he}from"../chunks/index.D4CdqmV7.js";import{B as Dt}from"../chunks/index.BzLgNpIl.js";import"../chunks/index.D5P3bu3G.js";import{s as At}from"../chunks/formData.Cqbx9YEq.js";import"../chunks/string.DBeRn4Bt.js";import{z as Ft}from"../chunks/zod.Cm6Z4om1.js";import{C as Ke}from"../chunks/card.VXLJCglc.js";import{C as gt}from"../chunks/card-content.BcXlgrz8.js";import{C as Mt,a as yt}from"../chunks/card-title.BtGlweLB.js";import{a as ke}from"../chunks/entry.CPepBop_.js";const ht=he.enum(["ACTIVE","INACTIVE","MAINTENANCE"]);he.object({id:he.coerce.number({required_error:"Floor ID is required",invalid_type_error:"Invalid floor ID"}).positive("Invalid floor ID")});const Tt=he.object({id:he.number().optional(),property_id:he.coerce.number({required_error:"Property selection is required",invalid_type_error:"Property must be selected"}).min(1,"Property must be selected"),floor_number:he.coerce.number({required_error:"Floor number is required",invalid_type_error:"Floor number must be a valid number"}).int("Floor number must be an integer").min(1,"Floor number must be greater than 0"),wing:he.string().optional(),status:ht.default("ACTIVE")});function Nt(s,e,r){const t=s.slice();return t[18]=e[r],t}function Qe(s,e,r){const t=s.slice();return t[21]=e[r],t}function Ze(s){let e,r,t;return{c(){e=L("input"),this.h()},l(n){e=j(n,"INPUT",{type:!0,name:!0}),this.h()},h(){_(e,"type","hidden"),_(e,"name","id")},m(n,l){w(n,e,l),Ve(e,s[6].id),r||(t=ft(e,"input",s[12]),r=!0)},p(n,l){l&64&&Ve(e,n[6].id)},d(n){n&&u(e),r=!1,t()}}}function Pt(s){let e;return{c(){e=B("Property")},l(r){e=U(r,"Property")},m(r,t){w(r,e,t)},d(r){r&&u(e)}}}function Lt(s){let e,r;return e=new pt({props:{placeholder:"Select a property"}}),{c(){D(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,n){F(e,t,n),r=!0},p:le,i(t){r||(v(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){M(e,t)}}}function jt(s){let e=s[21].name+"",r,t;return{c(){r=B(e),t=I()},l(n){r=U(n,e),t=C(n)},m(n,l){w(n,r,l),w(n,t,l)},p(n,l){l&1&&e!==(e=n[21].name+"")&&ne(r,e)},d(n){n&&(u(r),u(t))}}}function xe(s){let e,r;return e=new $t({props:{value:s[21].id.toString(),$$slots:{default:[jt]},$$scope:{ctx:s}}}),{c(){D(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,n){F(e,t,n),r=!0},p(t,n){const l={};n&1&&(l.value=t[21].id.toString()),n&16777217&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){r||(v(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){M(e,t)}}}function qt(s){let e,r,t=Ee(s[0].properties),n=[];for(let a=0;a<t.length;a+=1)n[a]=xe(Qe(s,t,a));const l=a=>b(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=ve()},l(a){for(let o=0;o<n.length;o+=1)n[o].l(a);e=ve()},m(a,o){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(a,o);w(a,e,o),r=!0},p(a,o){if(o&1){t=Ee(a[0].properties);let i;for(i=0;i<t.length;i+=1){const $=Qe(a,t,i);n[i]?(n[i].p($,o),v(n[i],1)):(n[i]=xe($),n[i].c(),v(n[i],1),n[i].m(e.parentNode,e))}for(Ae(),i=t.length;i<n.length;i+=1)l(i);Fe()}},i(a){if(!r){for(let o=0;o<t.length;o+=1)v(n[o]);r=!0}},o(a){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)b(n[o]);r=!1},d(a){a&&u(e),ut(n,a)}}}function Bt(s){let e,r,t,n;return e=new _t({props:{"data-error":!!s[7].property_id,$$slots:{default:[Lt]},$$scope:{ctx:s}}}),t=new mt({props:{$$slots:{default:[qt]},$$scope:{ctx:s}}}),{c(){D(e.$$.fragment),r=I(),D(t.$$.fragment)},l(l){A(e.$$.fragment,l),r=C(l),A(t.$$.fragment,l)},m(l,a){F(e,l,a),w(l,r,a),F(t,l,a),n=!0},p(l,a){const o={};a&128&&(o["data-error"]=!!l[7].property_id),a&16777216&&(o.$$scope={dirty:a,ctx:l}),e.$set(o);const i={};a&16777217&&(i.$$scope={dirty:a,ctx:l}),t.$set(i)},i(l){n||(v(e.$$.fragment,l),v(t.$$.fragment,l),n=!0)},o(l){b(e.$$.fragment,l),b(t.$$.fragment,l),n=!1},d(l){l&&u(r),M(e,l),M(t,l)}}}function et(s){let e,r=s[7].property_id+"",t;return{c(){e=L("p"),t=B(r),this.h()},l(n){e=j(n,"P",{class:!0});var l=y(e);t=U(l,r),l.forEach(u),this.h()},h(){_(e,"class","text-sm font-medium text-destructive")},m(n,l){w(n,e,l),d(e,t)},p(n,l){l&128&&r!==(r=n[7].property_id+"")&&ne(t,r)},d(n){n&&u(e)}}}function Ut(s){let e;return{c(){e=B("Floor Number")},l(r){e=U(r,"Floor Number")},m(r,t){w(r,e,t)},d(r){r&&u(e)}}}function tt(s){let e,r=s[7].floor_number+"",t;return{c(){e=L("p"),t=B(r),this.h()},l(n){e=j(n,"P",{class:!0});var l=y(e);t=U(l,r),l.forEach(u),this.h()},h(){_(e,"class","text-sm font-medium text-destructive")},m(n,l){w(n,e,l),d(e,t)},p(n,l){l&128&&r!==(r=n[7].floor_number+"")&&ne(t,r)},d(n){n&&u(e)}}}function zt(s){let e;return{c(){e=B("Wing")},l(r){e=U(r,"Wing")},m(r,t){w(r,e,t)},d(r){r&&u(e)}}}function rt(s){let e,r=s[7].wing+"",t;return{c(){e=L("p"),t=B(r),this.h()},l(n){e=j(n,"P",{class:!0});var l=y(e);t=U(l,r),l.forEach(u),this.h()},h(){_(e,"class","text-sm font-medium text-destructive")},m(n,l){w(n,e,l),d(e,t)},p(n,l){l&128&&r!==(r=n[7].wing+"")&&ne(t,r)},d(n){n&&u(e)}}}function Ht(s){let e;return{c(){e=B("Status")},l(r){e=U(r,"Status")},m(r,t){w(r,e,t)},d(r){r&&u(e)}}}function Ot(s){let e,r;return e=new pt({props:{placeholder:"Select a status"}}),{c(){D(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,n){F(e,t,n),r=!0},p:le,i(t){r||(v(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){M(e,t)}}}function Rt(s){let e,r;return{c(){e=B(s[18]),r=I()},l(t){e=U(t,s[18]),r=C(t)},m(t,n){w(t,e,n),w(t,r,n)},p:le,d(t){t&&(u(e),u(r))}}}function Wt(s){let e,r;return e=new $t({props:{value:s[18],$$slots:{default:[Rt]},$$scope:{ctx:s}}}),{c(){D(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,n){F(e,t,n),r=!0},p(t,n){const l={};n&16777216&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){r||(v(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){M(e,t)}}}function Xt(s){let e,r,t=Ee(ht.options),n=[];for(let l=0;l<t.length;l+=1)n[l]=Wt(Nt(s,t,l));return{c(){for(let l=0;l<n.length;l+=1)n[l].c();e=ve()},l(l){for(let a=0;a<n.length;a+=1)n[a].l(l);e=ve()},m(l,a){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(l,a);w(l,e,a),r=!0},p:le,i(l){if(!r){for(let a=0;a<t.length;a+=1)v(n[a]);r=!0}},o(l){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)b(n[a]);r=!1},d(l){l&&u(e),ut(n,l)}}}function Yt(s){let e,r,t,n;const l=[{"data-error":!!s[7].status},s[8].status];let a={$$slots:{default:[Ot]},$$scope:{ctx:s}};for(let o=0;o<l.length;o+=1)a=Te(a,l[o]);return e=new _t({props:a}),t=new mt({props:{$$slots:{default:[Xt]},$$scope:{ctx:s}}}),{c(){D(e.$$.fragment),r=I(),D(t.$$.fragment)},l(o){A(e.$$.fragment,o),r=C(o),A(t.$$.fragment,o)},m(o,i){F(e,o,i),w(o,r,i),F(t,o,i),n=!0},p(o,i){const $=i&384?Pe(l,[i&128&&{"data-error":!!o[7].status},i&256&&Le(o[8].status)]):{};i&16777216&&($.$$scope={dirty:i,ctx:o}),e.$set($);const V={};i&16777216&&(V.$$scope={dirty:i,ctx:o}),t.$set(V)},i(o){n||(v(e.$$.fragment,o),v(t.$$.fragment,o),n=!0)},o(o){b(e.$$.fragment,o),b(t.$$.fragment,o),n=!1},d(o){o&&u(r),M(e,o),M(t,o)}}}function nt(s){let e,r=s[7].status+"",t;return{c(){e=L("p"),t=B(r),this.h()},l(n){e=j(n,"P",{class:!0});var l=y(e);t=U(l,r),l.forEach(u),this.h()},h(){_(e,"class","text-sm font-medium text-destructive")},m(n,l){w(n,e,l),d(e,t)},p(n,l){l&128&&r!==(r=n[7].status+"")&&ne(t,r)},d(n){n&&u(e)}}}function Gt(s){let e=s[1]?"Update":"Add",r,t;return{c(){r=B(e),t=B(" Floor")},l(n){r=U(n,e),t=U(n," Floor")},m(n,l){w(n,r,l),w(n,t,l)},p(n,l){l&2&&e!==(e=n[1]?"Update":"Add")&&ne(r,e)},d(n){n&&(u(r),u(t))}}}function lt(s){let e,r;return e=new De({props:{type:"button",variant:"destructive",$$slots:{default:[Jt]},$$scope:{ctx:s}}}),e.$on("click",s[17]),{c(){D(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,n){F(e,t,n),r=!0},p(t,n){const l={};n&16777216&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){r||(v(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){M(e,t)}}}function Jt(s){let e;return{c(){e=B("Cancel")},l(r){e=U(r,"Cancel")},m(r,t){w(r,e,t)},d(r){r&&u(e)}}}function Kt(s){var qe,Be;let e,r,t,n,l,a,o,i,$,V,c,h,S,k,X,Y,H,O,R,ee,J,se,m,K,N,P,g,T,de,we,re,q,E,oe,te,ie,_e,G=s[1]&&s[6].id&&Ze(s);n=new Se({props:{for:"property_id",$$slots:{default:[Pt]},$$scope:{ctx:s}}}),i=new Je({props:{selected:{value:((qe=s[6].property_id)==null?void 0:qe.toString())||"",label:((Be=s[0].properties.find(s[14]))==null?void 0:Be.name)||"Select a property"},onSelectedChange:s[10],$$slots:{default:[Bt]},$$scope:{ctx:s}}});let z=s[7].property_id&&et(s);h=new Se({props:{for:"floor_number",$$slots:{default:[Ut]},$$scope:{ctx:s}}});const me=[{type:"number"},{id:"floor_number"},{name:"floor_number"},{min:"1"},{class:"w-full"},{"data-error":!!s[7].floor_number},{"aria-invalid":!!s[7].floor_number},s[8].floor_number];function vt(f){s[15](f)}let Ie={};for(let f=0;f<me.length;f+=1)Ie=Te(Ie,me[f]);s[6].floor_number!==void 0&&(Ie.value=s[6].floor_number),k=new Ge({props:Ie}),We.push(()=>Ye(k,"value",vt));let Q=s[7].floor_number&&tt(s);R=new Se({props:{for:"wing",$$slots:{default:[zt]},$$scope:{ctx:s}}});const pe=[{type:"text"},{id:"wing"},{name:"wing"},{class:"w-full"},{"data-error":!!s[7].wing},{"aria-invalid":!!s[7].wing},s[8].wing,{placeholder:"Optional"}];function bt(f){s[16](f)}let Ce={};for(let f=0;f<pe.length;f+=1)Ce=Te(Ce,pe[f]);s[6].wing!==void 0&&(Ce.value=s[6].wing),J=new Ge({props:Ce}),We.push(()=>Ye(J,"value",bt));let Z=s[7].wing&&rt(s);P=new Se({props:{for:"status",$$slots:{default:[Ht]},$$scope:{ctx:s}}}),T=new Je({props:{selected:{value:s[6].status||"",label:s[6].status||"Select a status"},onSelectedChange:s[11],$$slots:{default:[Yt]},$$scope:{ctx:s}}});let x=s[7].status&&nt(s);q=new De({props:{type:"submit",$$slots:{default:[Gt]},$$scope:{ctx:s}}});let W=s[1]&&lt(s);return{c(){e=L("form"),G&&G.c(),r=I(),t=L("div"),D(n.$$.fragment),l=I(),a=L("input"),o=I(),D(i.$$.fragment),$=I(),z&&z.c(),V=I(),c=L("div"),D(h.$$.fragment),S=I(),D(k.$$.fragment),Y=I(),Q&&Q.c(),H=I(),O=L("div"),D(R.$$.fragment),ee=I(),D(J.$$.fragment),m=I(),Z&&Z.c(),K=I(),N=L("div"),D(P.$$.fragment),g=I(),D(T.$$.fragment),de=I(),x&&x.c(),we=I(),re=L("div"),D(q.$$.fragment),E=I(),W&&W.c(),this.h()},l(f){e=j(f,"FORM",{method:!0,action:!0,class:!0});var p=y(e);G&&G.l(p),r=C(p),t=j(p,"DIV",{class:!0});var ae=y(t);A(n.$$.fragment,ae),l=C(ae),a=j(ae,"INPUT",{type:!0,name:!0}),o=C(ae),A(i.$$.fragment,ae),$=C(ae),z&&z.l(ae),ae.forEach(u),V=C(p),c=j(p,"DIV",{class:!0});var fe=y(c);A(h.$$.fragment,fe),S=C(fe),A(k.$$.fragment,fe),Y=C(fe),Q&&Q.l(fe),fe.forEach(u),H=C(p),O=j(p,"DIV",{class:!0});var ue=y(O);A(R.$$.fragment,ue),ee=C(ue),A(J.$$.fragment,ue),m=C(ue),Z&&Z.l(ue),ue.forEach(u),K=C(p),N=j(p,"DIV",{class:!0});var ce=y(N);A(P.$$.fragment,ce),g=C(ce),A(T.$$.fragment,ce),de=C(ce),x&&x.l(ce),ce.forEach(u),we=C(p),re=j(p,"DIV",{class:!0});var be=y(re);A(q.$$.fragment,be),E=C(be),W&&W.l(be),be.forEach(u),p.forEach(u),this.h()},h(){_(a,"type","hidden"),_(a,"name","property_id"),_(t,"class","space-y-2"),_(c,"class","space-y-2"),_(O,"class","space-y-2"),_(N,"class","space-y-2"),_(re,"class","flex justify-end space-x-2"),_(e,"method","POST"),_(e,"action",oe=s[1]?"?/update":"?/create"),_(e,"class","space-y-4"),e.noValidate=!0},m(f,p){w(f,e,p),G&&G.m(e,null),d(e,r),d(e,t),F(n,t,null),d(t,l),d(t,a),Ve(a,s[6].property_id),d(t,o),F(i,t,null),d(t,$),z&&z.m(t,null),d(e,V),d(e,c),F(h,c,null),d(c,S),F(k,c,null),d(c,Y),Q&&Q.m(c,null),d(e,H),d(e,O),F(R,O,null),d(O,ee),F(J,O,null),d(O,m),Z&&Z.m(O,null),d(e,K),d(e,N),F(P,N,null),d(N,g),F(T,N,null),d(N,de),x&&x.m(N,null),d(e,we),d(e,re),F(q,re,null),d(re,E),W&&W.m(re,null),te=!0,ie||(_e=[ft(a,"input",s[13]),wt(s[4].call(null,e))],ie=!0)},p(f,[p]){var Oe,Re;f[1]&&f[6].id?G?G.p(f,p):(G=Ze(f),G.c(),G.m(e,r)):G&&(G.d(1),G=null);const ae={};p&16777216&&(ae.$$scope={dirty:p,ctx:f}),n.$set(ae),p&64&&Ve(a,f[6].property_id);const fe={};p&65&&(fe.selected={value:((Oe=f[6].property_id)==null?void 0:Oe.toString())||"",label:((Re=f[0].properties.find(f[14]))==null?void 0:Re.name)||"Select a property"}),p&16777345&&(fe.$$scope={dirty:p,ctx:f}),i.$set(fe),f[7].property_id?z?z.p(f,p):(z=et(f),z.c(),z.m(t,null)):z&&(z.d(1),z=null);const ue={};p&16777216&&(ue.$$scope={dirty:p,ctx:f}),h.$set(ue);const ce=p&384?Pe(me,[me[0],me[1],me[2],me[3],me[4],p&128&&{"data-error":!!f[7].floor_number},p&128&&{"aria-invalid":!!f[7].floor_number},p&256&&Le(f[8].floor_number)]):{};!X&&p&64&&(X=!0,ce.value=f[6].floor_number,Xe(()=>X=!1)),k.$set(ce),f[7].floor_number?Q?Q.p(f,p):(Q=tt(f),Q.c(),Q.m(c,null)):Q&&(Q.d(1),Q=null);const be={};p&16777216&&(be.$$scope={dirty:p,ctx:f}),R.$set(be);const Ue=p&384?Pe(pe,[pe[0],pe[1],pe[2],pe[3],p&128&&{"data-error":!!f[7].wing},p&128&&{"aria-invalid":!!f[7].wing},p&256&&Le(f[8].wing),pe[7]]):{};!se&&p&64&&(se=!0,Ue.value=f[6].wing,Xe(()=>se=!1)),J.$set(Ue),f[7].wing?Z?Z.p(f,p):(Z=rt(f),Z.c(),Z.m(O,null)):Z&&(Z.d(1),Z=null);const ze={};p&16777216&&(ze.$$scope={dirty:p,ctx:f}),P.$set(ze);const Me={};p&64&&(Me.selected={value:f[6].status||"",label:f[6].status||"Select a status"}),p&16777600&&(Me.$$scope={dirty:p,ctx:f}),T.$set(Me),f[7].status?x?x.p(f,p):(x=nt(f),x.c(),x.m(N,null)):x&&(x.d(1),x=null);const He={};p&16777218&&(He.$$scope={dirty:p,ctx:f}),q.$set(He),f[1]?W?(W.p(f,p),p&2&&v(W,1)):(W=lt(f),W.c(),v(W,1),W.m(re,null)):W&&(Ae(),b(W,1,1,()=>{W=null}),Fe()),(!te||p&2&&oe!==(oe=f[1]?"?/update":"?/create"))&&_(e,"action",oe)},i(f){te||(v(n.$$.fragment,f),v(i.$$.fragment,f),v(h.$$.fragment,f),v(k.$$.fragment,f),v(R.$$.fragment,f),v(J.$$.fragment,f),v(P.$$.fragment,f),v(T.$$.fragment,f),v(q.$$.fragment,f),v(W),te=!0)},o(f){b(n.$$.fragment,f),b(i.$$.fragment,f),b(h.$$.fragment,f),b(k.$$.fragment,f),b(R.$$.fragment,f),b(J.$$.fragment,f),b(P.$$.fragment,f),b(T.$$.fragment,f),b(q.$$.fragment,f),b(W),te=!1},d(f){f&&u(e),G&&G.d(),M(n),M(i),z&&z.d(),M(h),M(k),Q&&Q.d(),M(R),M(J),Z&&Z.d(),M(P),M(T),x&&x.d(),M(q),W&&W.d(),ie=!1,kt(_e)}}}function Qt(s,e,r){let t,n=le,l=()=>(n(),n=ye(k,g=>r(6,t=g)),k),a,o=le,i=()=>(o(),o=ye(X,g=>r(7,a=g)),X),$,V=le,c=()=>(V(),V=ye(H,g=>r(8,$=g)),H);s.$$.on_destroy.push(()=>n()),s.$$.on_destroy.push(()=>o()),s.$$.on_destroy.push(()=>V());let{data:h}=e,{editMode:S=!1}=e,{form:k}=e;l();let{errors:X}=e;i();let{enhance:Y}=e,{constraints:H}=e;c();const O=Et();function R(g){const T=g;if(T!=null&&T.value){const de=parseInt(T.value,10);isNaN(de)||Ne(k,t.property_id=de,t)}}function ee(g){const T=g;T!=null&&T.value&&Ne(k,t.status=T.value,t)}function J(){t.id=this.value,k.set(t)}function se(){t.property_id=this.value,k.set(t)}const m=g=>g.id===t.property_id;function K(g){s.$$.not_equal(t.floor_number,g)&&(t.floor_number=g,k.set(t))}function N(g){s.$$.not_equal(t.wing,g)&&(t.wing=g,k.set(t))}const P=()=>O("cancel");return s.$$set=g=>{"data"in g&&r(0,h=g.data),"editMode"in g&&r(1,S=g.editMode),"form"in g&&l(r(2,k=g.form)),"errors"in g&&i(r(3,X=g.errors)),"enhance"in g&&r(4,Y=g.enhance),"constraints"in g&&c(r(5,H=g.constraints))},[h,S,k,X,Y,H,t,a,$,O,R,ee,J,se,m,K,N,P]}class Zt extends ct{constructor(e){super(),dt(this,e,Qt,Kt,it,{data:0,editMode:1,form:2,errors:3,enhance:4,constraints:5})}}function st(s,e,r){const t=s.slice();return t[21]=e[r],t}function xt(s){let e,r="No floors found";return{c(){e=L("div"),e.textContent=r,this.h()},l(t){e=j(t,"DIV",{class:!0,"data-svelte-h":!0}),je(e)!=="svelte-1inofmg"&&(e.textContent=r),this.h()},h(){_(e,"class","p-4 text-center text-muted-foreground")},m(t,n){w(t,e,n)},p:le,i:le,o:le,d(t){t&&u(e)}}}function er(s){let e=[],r=new Map,t,n,l=Ee(s[1]);const a=o=>o[21].id;for(let o=0;o<l.length;o+=1){let i=st(s,l,o),$=a(i);r.set($,e[o]=ot($,i))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=ve()},l(o){for(let i=0;i<e.length;i+=1)e[i].l(o);t=ve()},m(o,i){for(let $=0;$<e.length;$+=1)e[$]&&e[$].m(o,i);w(o,t,i),n=!0},p(o,i){i&1283&&(l=Ee(o[1]),Ae(),e=St(e,i,a,1,o,l,r,t.parentNode,Vt,ot,t,st),Fe())},i(o){if(!n){for(let i=0;i<l.length;i+=1)v(e[i]);n=!0}},o(o){for(let i=0;i<e.length;i+=1)b(e[i]);n=!1},d(o){o&&u(t);for(let i=0;i<e.length;i+=1)e[i].d(o)}}}function tr(s){let e=(s[21].status||"ACTIVE")+"",r;return{c(){r=B(e)},l(t){r=U(t,e)},m(t,n){w(t,r,n)},p(t,n){n&2&&e!==(e=(t[21].status||"ACTIVE")+"")&&ne(r,e)},d(t){t&&u(r)}}}function rr(s){let e,r,t,n;return{c(){e=$e("svg"),r=$e("path"),t=$e("path"),n=B(`
                  Edit`),this.h()},l(l){e=ge(l,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var a=y(e);r=ge(a,"path",{d:!0}),y(r).forEach(u),t=ge(a,"path",{d:!0}),y(t).forEach(u),a.forEach(u),n=U(l,`
                  Edit`),this.h()},h(){_(r,"d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"),_(t,"d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"width","16"),_(e,"height","16"),_(e,"viewBox","0 0 24 24"),_(e,"fill","none"),_(e,"stroke","currentColor"),_(e,"stroke-width","2"),_(e,"stroke-linecap","round"),_(e,"stroke-linejoin","round"),_(e,"class","mr-2")},m(l,a){w(l,e,a),d(e,r),d(e,t),w(l,n,a)},p:le,d(l){l&&(u(e),u(n))}}}function nr(s){let e,r,t,n,l,a;return{c(){e=$e("svg"),r=$e("path"),t=$e("path"),n=$e("path"),l=$e("path"),a=B(`
                  Delete`),this.h()},l(o){e=ge(o,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var i=y(e);r=ge(i,"path",{d:!0}),y(r).forEach(u),t=ge(i,"path",{d:!0}),y(t).forEach(u),n=ge(i,"path",{d:!0}),y(n).forEach(u),l=ge(i,"path",{d:!0}),y(l).forEach(u),i.forEach(u),a=U(o,`
                  Delete`),this.h()},h(){_(r,"d","M3 6h18"),_(t,"d","M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"),_(n,"d","M10 11v6"),_(l,"d","M14 11v6"),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"width","16"),_(e,"height","16"),_(e,"viewBox","0 0 24 24"),_(e,"fill","none"),_(e,"stroke","currentColor"),_(e,"stroke-width","2"),_(e,"stroke-linecap","round"),_(e,"stroke-linejoin","round"),_(e,"class","mr-2")},m(o,i){w(o,e,i),d(e,r),d(e,t),d(e,n),d(e,l),w(o,a,i)},p:le,d(o){o&&(u(e),u(a))}}}function ot(s,e){var re;let r,t,n=(((re=e[21].property)==null?void 0:re.name)||"Unknown Property")+"",l,a,o,i,$=e[21].floor_number+"",V,c,h,S=(e[21].wing||"-")+"",k,X,Y,H,O,R,ee=((e[21].rental_unit&&Array.isArray(e[21].rental_unit)?e[21].rental_unit.length:0)||0)+"",J,se,m,K,N,P,g,T;H=new Dt({props:{variant:at(e[21].status||"ACTIVE"),$$slots:{default:[tr]},$$scope:{ctx:e}}});function de(){return e[11](e[21])}K=new De({props:{size:"sm",variant:"outline",disabled:!e[0].isAdminLevel&&!e[0].isStaffLevel,$$slots:{default:[rr]},$$scope:{ctx:e}}}),K.$on("click",de);function we(){return e[12](e[21])}return P=new De({props:{size:"sm",variant:"destructive",disabled:!e[0].isAdminLevel,$$slots:{default:[nr]},$$scope:{ctx:e}}}),P.$on("click",we),{key:s,first:null,c(){r=L("div"),t=L("div"),l=B(n),a=I(),o=L("div"),i=B("Floor "),V=B($),c=I(),h=L("div"),k=B(S),X=I(),Y=L("div"),D(H.$$.fragment),O=I(),R=L("div"),J=B(ee),se=I(),m=L("div"),D(K.$$.fragment),N=I(),D(P.$$.fragment),g=I(),this.h()},l(q){r=j(q,"DIV",{class:!0});var E=y(r);t=j(E,"DIV",{class:!0});var oe=y(t);l=U(oe,n),oe.forEach(u),a=C(E),o=j(E,"DIV",{});var te=y(o);i=U(te,"Floor "),V=U(te,$),te.forEach(u),c=C(E),h=j(E,"DIV",{});var ie=y(h);k=U(ie,S),ie.forEach(u),X=C(E),Y=j(E,"DIV",{});var _e=y(Y);A(H.$$.fragment,_e),_e.forEach(u),O=C(E),R=j(E,"DIV",{class:!0});var G=y(R);J=U(G,ee),G.forEach(u),se=C(E),m=j(E,"DIV",{class:!0});var z=y(m);A(K.$$.fragment,z),N=C(z),A(P.$$.fragment,z),z.forEach(u),g=C(E),E.forEach(u),this.h()},h(){_(t,"class","font-medium"),_(R,"class","flex items-center justify-center"),_(m,"class","flex items-center gap-2"),_(r,"class","grid grid-cols-[2fr_1fr_1fr_1fr_1fr_2fr] gap-4 p-4 text-left hover:bg-muted/50 w-full border-b last:border-b-0"),this.first=r},m(q,E){w(q,r,E),d(r,t),d(t,l),d(r,a),d(r,o),d(o,i),d(o,V),d(r,c),d(r,h),d(h,k),d(r,X),d(r,Y),F(H,Y,null),d(r,O),d(r,R),d(R,J),d(r,se),d(r,m),F(K,m,null),d(m,N),F(P,m,null),d(r,g),T=!0},p(q,E){var _e;e=q,(!T||E&2)&&n!==(n=(((_e=e[21].property)==null?void 0:_e.name)||"Unknown Property")+"")&&ne(l,n),(!T||E&2)&&$!==($=e[21].floor_number+"")&&ne(V,$),(!T||E&2)&&S!==(S=(e[21].wing||"-")+"")&&ne(k,S);const oe={};E&2&&(oe.variant=at(e[21].status||"ACTIVE")),E&16777218&&(oe.$$scope={dirty:E,ctx:e}),H.$set(oe),(!T||E&2)&&ee!==(ee=((e[21].rental_unit&&Array.isArray(e[21].rental_unit)?e[21].rental_unit.length:0)||0)+"")&&ne(J,ee);const te={};E&1&&(te.disabled=!e[0].isAdminLevel&&!e[0].isStaffLevel),E&16777216&&(te.$$scope={dirty:E,ctx:e}),K.$set(te);const ie={};E&1&&(ie.disabled=!e[0].isAdminLevel),E&16777216&&(ie.$$scope={dirty:E,ctx:e}),P.$set(ie)},i(q){T||(v(H.$$.fragment,q),v(K.$$.fragment,q),v(P.$$.fragment,q),T=!0)},o(q){b(H.$$.fragment,q),b(K.$$.fragment,q),b(P.$$.fragment,q),T=!1},d(q){q&&u(r),M(H),M(K),M(P)}}}function lr(s){let e,r='<div class="flex items-center">Property</div> <div class="flex items-center">Floor</div> <div class="flex items-center">Wing</div> <div class="flex items-center">Status</div> <div class="flex items-center justify-center">Units</div> <div class="flex items-center">Actions</div>',t,n,l,a,o;const i=[er,xt],$=[];function V(c,h){var S;return((S=c[1])==null?void 0:S.length)>0?0:1}return n=V(s),l=$[n]=i[n](s),{c(){e=L("div"),e.innerHTML=r,t=I(),l.c(),a=ve(),this.h()},l(c){e=j(c,"DIV",{class:!0,"data-svelte-h":!0}),je(e)!=="svelte-2qwwuu"&&(e.innerHTML=r),t=C(c),l.l(c),a=ve(),this.h()},h(){_(e,"class","grid grid-cols-[2fr_1fr_1fr_1fr_1fr_2fr] gap-4 p-4 font-medium border-b bg-muted/50")},m(c,h){w(c,e,h),w(c,t,h),$[n].m(c,h),w(c,a,h),o=!0},p(c,h){let S=n;n=V(c),n===S?$[n].p(c,h):(Ae(),b($[S],1,1,()=>{$[S]=null}),Fe(),l=$[n],l?l.p(c,h):(l=$[n]=i[n](c),l.c()),v(l,1),l.m(a.parentNode,a))},i(c){o||(v(l),o=!0)},o(c){b(l),o=!1},d(c){c&&(u(e),u(t),u(a)),$[n].d(c)}}}function sr(s){let e,r;return e=new gt({props:{class:"p-0",$$slots:{default:[lr]},$$scope:{ctx:s}}}),{c(){D(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,n){F(e,t,n),r=!0},p(t,n){const l={};n&16777219&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){r||(v(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){M(e,t)}}}function or(s){let e=s[2]?"Edit":"Add",r,t;return{c(){r=B(e),t=B(" Floor")},l(n){r=U(n,e),t=U(n," Floor")},m(n,l){w(n,r,l),w(n,t,l)},p(n,l){l&4&&e!==(e=n[2]?"Edit":"Add")&&ne(r,e)},d(n){n&&(u(r),u(t))}}}function ar(s){let e,r;return e=new yt({props:{$$slots:{default:[or]},$$scope:{ctx:s}}}),{c(){D(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,n){F(e,t,n),r=!0},p(t,n){const l={};n&16777220&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){r||(v(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){M(e,t)}}}function ir(s){let e,r;return e=new Zt({props:{data:s[0],editMode:s[2],form:s[4],errors:s[6],enhance:s[5],constraints:s[7]}}),e.$on("cancel",s[9]),e.$on("floorSaved",s[13]),{c(){D(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,n){F(e,t,n),r=!0},p(t,n){const l={};n&1&&(l.data=t[0]),n&4&&(l.editMode=t[2]),e.$set(l)},i(t){r||(v(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){M(e,t)}}}function fr(s){let e,r,t,n;return e=new Mt({props:{$$slots:{default:[ar]},$$scope:{ctx:s}}}),t=new gt({props:{$$slots:{default:[ir]},$$scope:{ctx:s}}}),{c(){D(e.$$.fragment),r=I(),D(t.$$.fragment)},l(l){A(e.$$.fragment,l),r=C(l),A(t.$$.fragment,l)},m(l,a){F(e,l,a),w(l,r,a),F(t,l,a),n=!0},p(l,a){const o={};a&16777220&&(o.$$scope={dirty:a,ctx:l}),e.$set(o);const i={};a&16777229&&(i.$$scope={dirty:a,ctx:l}),t.$set(i)},i(l){n||(v(e.$$.fragment,l),v(t.$$.fragment,l),n=!0)},o(l){b(e.$$.fragment,l),b(t.$$.fragment,l),n=!1},d(l){l&&u(r),M(e,l),M(t,l)}}}function ur(s){let e,r,t,n='<h1 class="text-2xl font-bold">Floors</h1>',l,a,o,i,$,V;return a=new Ke({props:{$$slots:{default:[sr]},$$scope:{ctx:s}}}),$=new Ke({props:{$$slots:{default:[fr]},$$scope:{ctx:s}}}),{c(){e=L("div"),r=L("div"),t=L("div"),t.innerHTML=n,l=I(),D(a.$$.fragment),o=I(),i=L("div"),D($.$$.fragment),this.h()},l(c){e=j(c,"DIV",{class:!0});var h=y(e);r=j(h,"DIV",{class:!0});var S=y(r);t=j(S,"DIV",{class:!0,"data-svelte-h":!0}),je(t)!=="svelte-s2vd95"&&(t.innerHTML=n),l=C(S),A(a.$$.fragment,S),S.forEach(u),o=C(h),i=j(h,"DIV",{class:!0});var k=y(i);A($.$$.fragment,k),k.forEach(u),h.forEach(u),this.h()},h(){_(t,"class","flex justify-between items-center mb-4"),_(r,"class","w-full lg:w-2/3"),_(i,"class","w-full lg:w-1/3"),_(e,"class","container mx-auto p-4 flex flex-col lg:flex-row gap-4")},m(c,h){w(c,e,h),d(e,r),d(r,t),d(r,l),F(a,r,null),d(e,o),d(e,i),F($,i,null),V=!0},p(c,[h]){const S={};h&16777219&&(S.$$scope={dirty:h,ctx:c}),a.$set(S);const k={};h&16777229&&(k.$$scope={dirty:h,ctx:c}),$.$set(k)},i(c){V||(v(a.$$.fragment,c),v($.$$.fragment,c),V=!0)},o(c){b(a.$$.fragment,c),b($.$$.fragment,c),V=!1},d(c){c&&u(e),M(a),M($)}}}function at(s){switch(s){case"ACTIVE":return"secondary";case"INACTIVE":return"destructive";case"MAINTENANCE":return"outline";default:return"default"}}function cr(s,e,r){let t,n,l,a,o,i,$,{data:V}=e;const{form:c,enhance:h,errors:S,constraints:k}=At(V.form,{id:"floor-form",validators:Ft(Tt),validationMethod:"oninput",dataType:"json",delayMs:10,taintedMessage:null,resetForm:!0,onError:({result:m})=>{console.error("Form submission error:",{error:m.error,status:m.status}),m.error&&console.error("Server error:",m.error.message)},onResult:async({result:m})=>{console.log("Form submission result:",m),m.type==="success"&&(r(3,Y=void 0),r(2,X=!1),await ke("app:floors"))}});It(s,c,m=>r(19,$=m));let X=!1,Y;function H(m){console.log("Floor selected for editing:",{id:m.id,property:m.property.name,floorNumber:m.floor_number}),r(3,Y=m),r(2,X=!0),Ne(c,$={id:m.id,property_id:m.property_id,floor_number:m.floor_number,wing:m.wing??"",status:m.status||"ACTIVE"},$)}function O(){console.log("Cancelling floor operation"),r(3,Y=void 0),r(2,X=!1)}async function R(m){if(console.log("Delete requested for floor:",{id:m.id,property:m.property.name,floorNumber:m.floor_number}),!confirm(`Are you sure you want to delete floor ${m.floor_number}?`)){console.log("Delete cancelled by user");return}const K=new FormData;K.append("id",m.id.toString());try{console.log("Sending delete request for floor:",m.id);const N=await fetch("?/delete",{method:"POST",body:K}),P=await N.json();console.log("Delete response:",P),N.ok?(r(1,t=t.filter(g=>g.id!==m.id)),r(3,Y=void 0),r(2,X=!1),await Promise.all([ke("app:floors"),ke(g=>g.pathname.includes("/floors"))]),alert("Floor deleted successfully")):(console.error("Delete failed:",{status:N.status,response:P,error:P.message}),alert(`Failed to delete floor: ${P.message||"Unknown error"}`))}catch(N){console.error("Error deleting floor:",N),alert(`Error deleting floor: ${N instanceof Error?N.message:"Unknown error"}`)}}Ct(()=>{console.log("Component mounted, invalidating floors data"),ke("app:floors")});const ee=m=>H(m),J=m=>R(m),se=async()=>{r(3,Y=void 0),r(2,X=!1),await ke("app:floors")};return s.$$set=m=>{"data"in m&&r(0,V=m.data)},s.$$.update=()=>{s.$$.dirty&1&&r(1,{floors:t,properties:n,form:l,user:a,isAdminLevel:o,isStaffLevel:i}=V,t),s.$$.dirty&2&&t&&console.log("Floors data updated:",{count:t.length,floorIds:t.map(m=>m.id)})},[V,t,X,Y,c,h,S,k,H,O,R,ee,J,se]}class Fr extends ct{constructor(e){super(),dt(this,e,cr,ur,it,{data:0})}}export{Fr as component};
