import{s as Qe,M as Ce,a as f,b as I,f as _,g,p as Ie,j as w,d,k as O,v as Ue,w as We,i as me,l as n,x as Re,y as Je,O as we,z as Ve,t as k,h as j,n as Xe,m as ue,B as Ze}from"../chunks/scheduler.Bl--k1HL.js";import{S as xe,i as et,f as Le,c as ie,a as de,m as ce,t as fe,b as _e,d as pe}from"../chunks/index.DR8de1tj.js";import{e as Ne}from"../chunks/each.En5UpT5R.js";import{g as Pe,h as ke}from"../chunks/utils.D33FkIxg.js";import{I as ye}from"../chunks/input.CkoDOh7A.js";import{L as Ae}from"../chunks/label.BX-RGDB2.js";import"../chunks/index.D4E8IgGl.js";import{s as tt}from"../chunks/formData.IVesd0ZS.js";import{z as s}from"../chunks/index.D4CdqmV7.js";const je={Values:{CASH:"CASH",BANK:"BANK",GCASH:"GCASH",OTHER:"OTHER"}},Se=s.enum(["RENT","UTILITY","PENALTY","MAINTENANCE","SERVICE"]),ze=s.enum(["PENDING","PAID","OVERDUE"]),at=s.enum(["ELECTRICITY","WATER","INTERNET"]),nt=s.enum(["MONTHLY","QUARTERLY","ANNUAL","ONE_TIME"]);s.object({id:s.number(),lease_id:s.number(),type:Se,utility_type:at.optional().nullable(),amount:s.number(),paid_amount:s.number().default(0),balance:s.number(),status:ze.default("PENDING"),due_date:s.string(),billing_date:s.string(),penalty_amount:s.number().default(0),notes:s.string().optional().nullable(),created_at:s.string(),updated_at:s.string().optional().nullable()});s.object({id:s.number(),lease_id:s.number(),due_date:s.string(),expected_amount:s.number(),type:Se.default("RENT"),frequency:nt,status:ze.default("PENDING"),notes:s.string().optional().nullable(),created_at:s.string(),updated_at:s.string().optional().nullable()});s.object({id:s.number(),type:Se,grace_period:s.number(),penalty_percentage:s.number(),compound_period:s.number().optional().nullable(),max_penalty_percentage:s.number().optional().nullable(),created_at:s.string(),updated_at:s.string().optional().nullable()});s.object({status:s.enum(["PENDING","PAID","OVERDUE","ALL"]),method:s.enum(["CASH","BANK","GCASH","OTHER"]).optional(),startDate:s.date().optional(),endDate:s.date().optional(),searchTerm:s.string().optional()});function Be(l,e,a){const r=l.slice();return r[12]=e[a],r}function Ge(l,e,a){const r=l.slice();return r[15]=e[a][0],r[16]=e[a][1],r}function lt(l){let e;return{c(){e=k("Search")},l(a){e=j(a,"Search")},m(a,r){me(a,e,r)},d(a){a&&d(e)}}}function st(l){let e;return{c(){e=k("Start Date")},l(a){e=j(a,"Start Date")},m(a,r){me(a,e,r)},d(a){a&&d(e)}}}function rt(l){let e;return{c(){e=k("End Date")},l(a){e=j(a,"End Date")},m(a,r){me(a,e,r)},d(a){a&&d(e)}}}function ot(l){let e;return{c(){e=k("Payment Method")},l(a){e=j(a,"Payment Method")},m(a,r){me(a,e,r)},d(a){a&&d(e)}}}function Ye(l){let e,a=l[15]+"",r;return{c(){e=f("option"),r=k(a),this.h()},l(E){e=_(E,"OPTION",{});var m=g(e);r=j(m,a),m.forEach(d),this.h()},h(){e.__value=l[16],Ue(e,e.__value)},m(E,m){me(E,e,m),n(e,r)},p:Xe,d(E){E&&d(e)}}}function qe(l){var $e,he,x,q;let e,a,r=Pe(l[12].paid_at)+"",E,m,c,v=((($e=l[12].billing)==null?void 0:$e.type)??"N/A")+"",b,J,D,B=(((q=(x=(he=l[12].billing)==null?void 0:he.lease)==null?void 0:x.tenant)==null?void 0:q.name)??"N/A")+"",z,i,T,G=ke(l[12].amount_paid)+"",L,K,R,y=l[12].method+"",S,F,H,X=(l[12].reference_number??"N/A")+"",ae,Y,M,Z=l[12].status+"",N,V;return{c(){e=f("tr"),a=f("td"),E=k(r),m=I(),c=f("td"),b=k(v),J=I(),D=f("td"),z=k(B),i=I(),T=f("td"),L=k(G),K=I(),R=f("td"),S=k(y),F=I(),H=f("td"),ae=k(X),Y=I(),M=f("td"),N=k(Z),V=I(),this.h()},l(h){e=_(h,"TR",{class:!0});var o=g(e);a=_(o,"TD",{class:!0});var ee=g(a);E=j(ee,r),ee.forEach(d),m=w(o),c=_(o,"TD",{class:!0});var P=g(c);b=j(P,v),P.forEach(d),J=w(o),D=_(o,"TD",{class:!0});var Q=g(D);z=j(Q,B),Q.forEach(d),i=w(o),T=_(o,"TD",{class:!0});var te=g(T);L=j(te,G),te.forEach(d),K=w(o),R=_(o,"TD",{class:!0});var Ee=g(R);S=j(Ee,y),Ee.forEach(d),F=w(o),H=_(o,"TD",{class:!0});var Te=g(H);ae=j(Te,X),Te.forEach(d),Y=w(o),M=_(o,"TD",{class:!0});var De=g(M);N=j(De,Z),De.forEach(d),V=w(o),o.forEach(d),this.h()},h(){O(a,"class","p-2"),O(c,"class","p-2"),O(D,"class","p-2"),O(T,"class","p-2"),O(R,"class","p-2"),O(H,"class","p-2"),O(M,"class","p-2"),O(e,"class","border-b")},m(h,o){me(h,e,o),n(e,a),n(a,E),n(e,m),n(e,c),n(c,b),n(e,J),n(e,D),n(D,z),n(e,i),n(e,T),n(T,L),n(e,K),n(e,R),n(R,S),n(e,F),n(e,H),n(H,ae),n(e,Y),n(e,M),n(M,N),n(e,V)},p(h,o){var ee,P,Q,te;o&16&&r!==(r=Pe(h[12].paid_at)+"")&&ue(E,r),o&16&&v!==(v=(((ee=h[12].billing)==null?void 0:ee.type)??"N/A")+"")&&ue(b,v),o&16&&B!==(B=(((te=(Q=(P=h[12].billing)==null?void 0:P.lease)==null?void 0:Q.tenant)==null?void 0:te.name)??"N/A")+"")&&ue(z,B),o&16&&G!==(G=ke(h[12].amount_paid)+"")&&ue(L,G),o&16&&y!==(y=h[12].method+"")&&ue(S,y),o&16&&X!==(X=(h[12].reference_number??"N/A")+"")&&ue(ae,X),o&16&&Z!==(Z=h[12].status+"")&&ue(N,Z)},d(h){h&&d(e)}}}function ut(l){let e,a,r,E="Transaction History",m,c,v,b,J,D,B,z,i,T,G,L,K,R,y,S,F,H,X,ae,Y,M,Z,N,V,$e="All Methods",he,x,q,h,o='<tr class="border-b"><th class="p-2 text-left">Date</th> <th class="p-2 text-left">Type</th> <th class="p-2 text-left">Paid By</th> <th class="p-2 text-left">Amount</th> <th class="p-2 text-left">Method</th> <th class="p-2 text-left">Reference</th> <th class="p-2 text-left">Status</th></tr>',ee,P,Q,te,Ee;b=new Ae({props:{for:"search",$$slots:{default:[lt]},$$scope:{ctx:l}}});function Te(t){l[6](t)}let De={id:"search",type:"text",placeholder:"Search transactions..."};l[0]!==void 0&&(De.value=l[0]),D=new ye({props:De}),Ce.push(()=>Le(D,"value",Te)),T=new Ae({props:{for:"startDate",$$slots:{default:[st]},$$scope:{ctx:l}}});function Ke(t){l[7](t)}let He={id:"startDate",type:"date"};l[1]!==void 0&&(He.value=l[1]),L=new ye({props:He}),Ce.push(()=>Le(L,"value",Ke)),S=new Ae({props:{for:"endDate",$$slots:{default:[rt]},$$scope:{ctx:l}}});function Fe(t){l[8](t)}let Me={id:"endDate",type:"date"};l[2]!==void 0&&(Me.value=l[2]),H=new ye({props:Me}),Ce.push(()=>Le(H,"value",Fe)),M=new Ae({props:{$$slots:{default:[ot]},$$scope:{ctx:l}}});let ge=Ne(Object.entries(je.Values)),A=[];for(let t=0;t<ge.length;t+=1)A[t]=Ye(Ge(l,ge,t));let ve=Ne(l[4]),C=[];for(let t=0;t<ve.length;t+=1)C[t]=qe(Be(l,ve,t));return{c(){e=f("div"),a=f("div"),r=f("h2"),r.textContent=E,m=I(),c=f("div"),v=f("div"),ie(b.$$.fragment),J=I(),ie(D.$$.fragment),z=I(),i=f("div"),ie(T.$$.fragment),G=I(),ie(L.$$.fragment),R=I(),y=f("div"),ie(S.$$.fragment),F=I(),ie(H.$$.fragment),ae=I(),Y=f("div"),ie(M.$$.fragment),Z=I(),N=f("select"),V=f("option"),V.textContent=$e;for(let t=0;t<A.length;t+=1)A[t].c();he=I(),x=f("div"),q=f("table"),h=f("thead"),h.innerHTML=o,ee=I(),P=f("tbody");for(let t=0;t<C.length;t+=1)C[t].c();this.h()},l(t){e=_(t,"DIV",{class:!0});var p=g(e);a=_(p,"DIV",{class:!0});var $=g(a);r=_($,"H2",{class:!0,"data-svelte-h":!0}),Ie(r)!=="svelte-1yxqdqu"&&(r.textContent=E),m=w($),c=_($,"DIV",{class:!0});var U=g(c);v=_(U,"DIV",{});var ne=g(v);de(b.$$.fragment,ne),J=w(ne),de(D.$$.fragment,ne),ne.forEach(d),z=w(U),i=_(U,"DIV",{});var le=g(i);de(T.$$.fragment,le),G=w(le),de(L.$$.fragment,le),le.forEach(d),R=w(U),y=_(U,"DIV",{});var se=g(y);de(S.$$.fragment,se),F=w(se),de(H.$$.fragment,se),se.forEach(d),ae=w(U),Y=_(U,"DIV",{});var re=g(Y);de(M.$$.fragment,re),Z=w(re),N=_(re,"SELECT",{class:!0});var be=g(N);V=_(be,"OPTION",{"data-svelte-h":!0}),Ie(V)!=="svelte-1cxnip5"&&(V.textContent=$e);for(let oe=0;oe<A.length;oe+=1)A[oe].l(be);be.forEach(d),re.forEach(d),U.forEach(d),he=w($),x=_($,"DIV",{class:!0});var u=g(x);q=_(u,"TABLE",{class:!0});var W=g(q);h=_(W,"THEAD",{"data-svelte-h":!0}),Ie(h)!=="svelte-8nzvp6"&&(h.innerHTML=o),ee=w(W),P=_(W,"TBODY",{});var Oe=g(P);for(let oe=0;oe<C.length;oe+=1)C[oe].l(Oe);Oe.forEach(d),W.forEach(d),u.forEach(d),$.forEach(d),p.forEach(d),this.h()},h(){O(r,"class","text-2xl font-bold mb-4"),V.__value="",Ue(V,V.__value),O(N,"class","w-full p-2 border rounded"),l[3]===void 0&&We(()=>l[9].call(N)),O(c,"class","grid grid-cols-1 md:grid-cols-4 gap-4 mb-4"),O(q,"class","w-full"),O(x,"class","overflow-x-auto"),O(a,"class","mb-8"),O(e,"class","container mx-auto p-4")},m(t,p){me(t,e,p),n(e,a),n(a,r),n(a,m),n(a,c),n(c,v),ce(b,v,null),n(v,J),ce(D,v,null),n(c,z),n(c,i),ce(T,i,null),n(i,G),ce(L,i,null),n(c,R),n(c,y),ce(S,y,null),n(y,F),ce(H,y,null),n(c,ae),n(c,Y),ce(M,Y,null),n(Y,Z),n(Y,N),n(N,V);for(let $=0;$<A.length;$+=1)A[$]&&A[$].m(N,null);Re(N,l[3],!0),n(a,he),n(a,x),n(x,q),n(q,h),n(q,ee),n(q,P);for(let $=0;$<C.length;$+=1)C[$]&&C[$].m(P,null);Q=!0,te||(Ee=Je(N,"change",l[9]),te=!0)},p(t,[p]){const $={};p&524288&&($.$$scope={dirty:p,ctx:t}),b.$set($);const U={};!B&&p&1&&(B=!0,U.value=t[0],we(()=>B=!1)),D.$set(U);const ne={};p&524288&&(ne.$$scope={dirty:p,ctx:t}),T.$set(ne);const le={};!K&&p&2&&(K=!0,le.value=t[1],we(()=>K=!1)),L.$set(le);const se={};p&524288&&(se.$$scope={dirty:p,ctx:t}),S.$set(se);const re={};!X&&p&4&&(X=!0,re.value=t[2],we(()=>X=!1)),H.$set(re);const be={};if(p&524288&&(be.$$scope={dirty:p,ctx:t}),M.$set(be),p&0){ge=Ne(Object.entries(je.Values));let u;for(u=0;u<ge.length;u+=1){const W=Ge(t,ge,u);A[u]?A[u].p(W,p):(A[u]=Ye(W),A[u].c(),A[u].m(N,null))}for(;u<A.length;u+=1)A[u].d(1);A.length=ge.length}if(p&8&&Re(N,t[3]),p&16){ve=Ne(t[4]);let u;for(u=0;u<ve.length;u+=1){const W=Be(t,ve,u);C[u]?C[u].p(W,p):(C[u]=qe(W),C[u].c(),C[u].m(P,null))}for(;u<C.length;u+=1)C[u].d(1);C.length=ve.length}},i(t){Q||(fe(b.$$.fragment,t),fe(D.$$.fragment,t),fe(T.$$.fragment,t),fe(L.$$.fragment,t),fe(S.$$.fragment,t),fe(H.$$.fragment,t),fe(M.$$.fragment,t),Q=!0)},o(t){_e(b.$$.fragment,t),_e(D.$$.fragment,t),_e(T.$$.fragment,t),_e(L.$$.fragment,t),_e(S.$$.fragment,t),_e(H.$$.fragment,t),_e(M.$$.fragment,t),Q=!1},d(t){t&&d(e),pe(b),pe(D),pe(T),pe(L),pe(S),pe(H),pe(M),Ve(A,t),Ve(C,t),te=!1,Ee()}}}function it(l,e,a){let r,{data:E}=e;tt(E.form);let m="",c="",v="",b=null;function J(i){m=i,a(0,m)}function D(i){c=i,a(1,c)}function B(i){v=i,a(2,v)}function z(){b=Ze(this),a(3,b)}return l.$$set=i=>{"data"in i&&a(5,E=i.data)},l.$$.update=()=>{l.$$.dirty&47&&a(4,r=E.transactions.filter(i=>{var K,R,y,S,F;const T=m?((K=i.billing)==null?void 0:K.type.toLowerCase().includes(m.toLowerCase()))||((S=(y=(R=i.billing)==null?void 0:R.lease)==null?void 0:y.tenant)==null?void 0:S.name.toLowerCase().includes(m.toLowerCase()))||((F=i.reference_number)==null?void 0:F.toLowerCase().includes(m.toLowerCase())):!0,G=(!c||new Date(i.paid_at)>=new Date(c))&&(!v||new Date(i.paid_at)<=new Date(v)),L=!b||i.method===b;return T&&G&&L}))},[m,c,v,b,r,E,J,D,B,z]}class bt extends xe{constructor(e){super(),et(this,e,it,ut,Qe,{data:5})}}export{bt as component};
